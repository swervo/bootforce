/*!
 * Bootforce v0.0.2 ()
 * Bootforce owes much to Bootstrap "http://getbootstrap.com"
 * Licensed under the MIT license
 */

var requirejs,require,define;!function(p){var o,s,d,y,m={},g={},v={},b={},n=Object.prototype.hasOwnProperty,r=[].slice,_=/\.js$/;function w(t,e){return n.call(t,e)}function a(t,e){var n,r,i,o,s,a,u,c,l,h,f,p=e&&e.split("/"),d=v.map,y=d&&d["*"]||{};if(t){for(s=(t=t.split("/")).length-1,v.nodeIdCompat&&_.test(t[s])&&(t[s]=t[s].replace(_,"")),"."===t[0].charAt(0)&&p&&(t=p.slice(0,p.length-1).concat(t)),l=0;l<t.length;l++)if("."===(f=t[l]))t.splice(l,1),l-=1;else if(".."===f){if(0===l||1===l&&".."===t[2]||".."===t[l-1])continue;0<l&&(t.splice(l-1,2),l-=2)}t=t.join("/")}if((p||y)&&d){for(l=(n=t.split("/")).length;0<l;l-=1){if(r=n.slice(0,l).join("/"),p)for(h=p.length;0<h;h-=1)if((i=d[p.slice(0,h).join("/")])&&(i=i[r])){o=i,a=l;break}if(o)break;!u&&y&&y[r]&&(u=y[r],c=l)}!o&&u&&(o=u,a=c),o&&(n.splice(0,a,o),t=n.join("/"))}return t}function T(e,n){return function(){var t=r.call(arguments,0);return"string"!=typeof t[0]&&1===t.length&&t.push(null),s.apply(p,t.concat([e,n]))}}function E(e){return function(t){m[e]=t}}function x(t){if(w(g,t)){var e=g[t];delete g[t],b[t]=!0,o.apply(p,e)}if(!w(m,t)&&!w(b,t))throw new Error("No "+t);return m[t]}function u(t){var e,n=t?t.indexOf("!"):-1;return-1<n&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function S(t){return t?u(t):[]}d=function(t,e){var n,r,i=u(t),o=i[0],s=e[1];return t=i[1],o&&(n=x(o=a(o,s))),o?t=n&&n.normalize?n.normalize(t,(r=s,function(t){return a(t,r)})):a(t,s):(o=(i=u(t=a(t,s)))[0],t=i[1],o&&(n=x(o))),{f:o?o+"!"+t:t,n:t,pr:o,p:n}},y={require:function(t){return T(t)},exports:function(t){var e=m[t];return void 0!==e?e:m[t]={}},module:function(t){return{id:t,uri:"",exports:m[t],config:(e=t,function(){return v&&v.config&&v.config[e]||{}})};var e}},o=function(t,e,n,r){var i,o,s,a,u,c,l,h=[],f=typeof n;if(c=S(r=r||t),"undefined"===f||"function"===f){for(e=!e.length&&n.length?["require","exports","module"]:e,u=0;u<e.length;u+=1)if("require"===(o=(a=d(e[u],c)).f))h[u]=y.require(t);else if("exports"===o)h[u]=y.exports(t),l=!0;else if("module"===o)i=h[u]=y.module(t);else if(w(m,o)||w(g,o)||w(b,o))h[u]=x(o);else{if(!a.p)throw new Error(t+" missing "+o);a.p.load(a.n,T(r,!0),E(o),{}),h[u]=m[o]}s=n?n.apply(m[t],h):void 0,t&&(i&&i.exports!==p&&i.exports!==m[t]?m[t]=i.exports:s===p&&l||(m[t]=s))}else t&&(m[t]=n)},requirejs=require=s=function(t,e,n,r,i){if("string"==typeof t)return y[t]?y[t](e):x(d(t,S(e)).f);if(!t.splice){if((v=t).deps&&s(v.deps,v.callback),!e)return;e.splice?(t=e,e=n,n=null):t=p}return e=e||function(){},"function"==typeof n&&(n=r,r=i),r?o(p,t,e,n):setTimeout(function(){o(p,t,e,n)},4),s},s.config=function(t){return s(t)},requirejs._defined=m,(define=function(t,e,n){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(n=e,e=[]),w(m,t)||w(g,t)||(g[t]=[t,e,n])}).amd={jQuery:!0}}(),define("../../node_modules/almond/almond",function(){}),function(Ha){var Na,Ia=this||eval("this"),Ja=Ia.document,Ka=Ia.navigator,La=Ia.jQuery,Ma=Ia.JSON;Na=function(t,r){function n(t,e){return(null===t||typeof t in m)&&t===e}function o(t,e){var n;return function(){n||(n=S.a.setTimeout(function(){n=Ha,t()},e))}}function s(t,e){var n;return function(){clearTimeout(n),n=S.a.setTimeout(t,e)}}function u(t,e){e&&e!==g?"beforeChange"===e?this.Ob(t):this.Ja(t,e):this.Pb(t)}function i(t,e){null!==e&&e.k&&e.k()}function a(t,e){var n=this.Mc,r=n[T];r.T||(this.ob&&this.Oa[e]?(n.Sb(e,t,this.Oa[e]),this.Oa[e]=null,--this.ob):r.s[e]||n.Sb(e,t,r.t?{$:t}:n.yc(t)),t.Ha&&t.Hc())}function e(t,u,c,l){S.d[t]={init:function(r,i,t,e,o){var s,a;return S.m(function(){var t=i(),e=S.a.c(t),n=(e=!c!=!e,!a);(n||u||e!==s)&&(n&&S.xa.Ca()&&(a=S.a.wa(S.f.childNodes(r),!0)),e?(n||S.f.fa(r,S.a.wa(a)),S.hb(l?l(o,t):o,r)):S.f.za(r),s=e)},null,{i:r}),{controlsDescendantBindings:!0}}},S.h.va[t]=!1,S.f.aa[t]=!0}var c,l,h,f,p,d,y,S=void 0!==t?t:{};S.b=function(t,e){for(var n=t.split("."),r=S,i=0;i<n.length-1;i++)r=r[n[i]];r[n[n.length-1]]=e},S.H=function(t,e,n){t[e]=n},S.version="3.4.2",S.b("version",S.version),S.options={deferUpdates:!1,useOnlyNativeEvents:!1},S.a=function(){function h(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function t(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function e(t,e){return t.__proto__=e,t}function i(t,e,n,r){var i=t[e].match(c)||[];S.a.r(n.match(c),function(t){S.a.ra(i,t,r)}),t[e]=i.join(" ")}var n={__proto__:[]}instanceof Array,r="function"==typeof Symbol,o={},s={};o[Ka&&/Firefox\/2/i.test(Ka.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],o.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),h(o,function(t,e){if(e.length)for(var n=0,r=e.length;n<r;n++)s[e[n]]=t});var a={propertychange:!0},u=Ja&&function(){for(var t=3,e=Ja.createElement("div"),n=e.getElementsByTagName("i");e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",n[0];);return 4<t?t:Ha}(),c=/\S+/g;return{gc:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],r:function(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)},o:function(t,e){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(t,e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},Vb:function(t,e,n){for(var r=0,i=t.length;r<i;r++)if(e.call(n,t[r],r))return t[r];return null},Na:function(t,e){var n=S.a.o(t,e);0<n?t.splice(n,1):0===n&&t.shift()},Wb:function(t){for(var e=[],n=0,r=(t=t||[]).length;n<r;n++)S.a.o(e,t[n])<0&&e.push(t[n]);return e},ib:function(t,e){for(var n=[],r=0,i=(t=t||[]).length;r<i;r++)n.push(e(t[r],r));return n},Ma:function(t,e){for(var n=[],r=0,i=(t=t||[]).length;r<i;r++)e(t[r],r)&&n.push(t[r]);return n},ta:function(t,e){if(e instanceof Array)t.push.apply(t,e);else for(var n=0,r=e.length;n<r;n++)t.push(e[n]);return t},ra:function(t,e,n){var r=S.a.o(S.a.Bb(t),e);r<0?n&&t.push(e):n||t.splice(r,1)},la:n,extend:t,$a:e,ab:n?e:t,D:h,Ea:function(t,e){if(!t)return t;var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n],n,t));return r},rb:function(t){for(;t.firstChild;)S.removeNode(t.firstChild)},nc:function(t){for(var e=((t=S.a.W(t))[0]&&t[0].ownerDocument||Ja).createElement("div"),n=0,r=t.length;n<r;n++)e.appendChild(S.ba(t[n]));return e},wa:function(t,e){for(var n=0,r=t.length,i=[];n<r;n++){var o=t[n].cloneNode(!0);i.push(e?S.ba(o):o)}return i},fa:function(t,e){if(S.a.rb(t),e)for(var n=0,r=e.length;n<r;n++)t.appendChild(e[n])},uc:function(t,e){var n=t.nodeType?[t]:t;if(0<n.length){for(var r=n[0],i=r.parentNode,o=0,s=e.length;o<s;o++)i.insertBefore(e[o],r);for(o=0,s=n.length;o<s;o++)S.removeNode(n[o])}},Ba:function(t,e){if(t.length){for(e=8===e.nodeType&&e.parentNode||e;t.length&&t[0].parentNode!==e;)t.splice(0,1);for(;1<t.length&&t[t.length-1].parentNode!==e;)t.length--;if(1<t.length){var n=t[0],r=t[t.length-1];for(t.length=0;n!==r;)t.push(n),n=n.nextSibling;t.push(r)}}return t},wc:function(t,e){u<7?t.setAttribute("selected",e):t.selected=e},cb:function(t){return null===t||t===Ha?"":t.trim?t.trim():t.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},sd:function(t,e){return t=t||"",!(e.length>t.length)&&t.substring(0,e.length)===e},Rc:function(t,e){if(t===e)return!0;if(11===t.nodeType)return!1;if(e.contains)return e.contains(3===t.nodeType?t.parentNode:t);if(e.compareDocumentPosition)return 16==(16&e.compareDocumentPosition(t));for(;t&&t!=e;)t=t.parentNode;return!!t},qb:function(t){return S.a.Rc(t,t.ownerDocument.documentElement)},Tb:function(t){return!!S.a.Vb(t,S.a.qb)},A:function(t){return t&&t.tagName&&t.tagName.toLowerCase()},Zb:function(t){return S.onError?function(){try{return t.apply(this,arguments)}catch(t){throw S.onError&&S.onError(t),t}}:t},setTimeout:function(t,e){return setTimeout(S.a.Zb(t),e)},dc:function(t){setTimeout(function(){throw S.onError&&S.onError(t),t},0)},q:function(e,t,n){var r=S.a.Zb(n);if(n=u&&a[t],S.options.useOnlyNativeEvents||n||!La)if(n||"function"!=typeof e.addEventListener){if(void 0===e.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var i=function(t){r.call(e,t)},o="on"+t;e.attachEvent(o,i),S.a.G.qa(e,function(){e.detachEvent(o,i)})}else e.addEventListener(t,r,!1);else La(e).bind(t,r)},Fa:function(t,e){if(!t||!t.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var n;if(n=!("input"!==S.a.A(t)||!t.type||"click"!=e.toLowerCase()||"checkbox"!=(n=t.type)&&"radio"!=n),S.options.useOnlyNativeEvents||!La||n)if("function"==typeof Ja.createEvent){if("function"!=typeof t.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");(n=Ja.createEvent(s[e]||"HTMLEvents")).initEvent(e,!0,!0,Ia,0,0,0,0,0,!1,!1,!1,!1,0,t),t.dispatchEvent(n)}else if(n&&t.click)t.click();else{if(void 0===t.fireEvent)throw Error("Browser doesn't support triggering events");t.fireEvent("on"+e)}else La(t).trigger(e)},c:function(t){return S.I(t)?t():t},Bb:function(t){return S.I(t)?t.p():t},fb:function(e,t,n){var r;t&&("object"==typeof e.classList?(r=e.classList[n?"add":"remove"],S.a.r(t.match(c),function(t){r.call(e.classList,t)})):"string"==typeof e.className.baseVal?i(e.className,"baseVal",t,n):i(e,"className",t,n))},bb:function(t,e){var n=S.a.c(e);null!==n&&n!==Ha||(n="");var r=S.f.firstChild(t);!r||3!=r.nodeType||S.f.nextSibling(r)?S.f.fa(t,[t.ownerDocument.createTextNode(n)]):r.data=n,S.a.Wc(t)},vc:function(t,e){if(t.name=e,u<=7)try{t.mergeAttributes(Ja.createElement("<input name='"+t.name+"'/>"),!1)}catch(t){}},Wc:function(t){9<=u&&(t=1==t.nodeType?t:t.parentNode).style&&(t.style.zoom=t.style.zoom)},Sc:function(t){if(u){var e=t.style.width;t.style.width=0,t.style.width=e}},nd:function(t,e){t=S.a.c(t),e=S.a.c(e);for(var n=[],r=t;r<=e;r++)n.push(r);return n},W:function(t){for(var e=[],n=0,r=t.length;n<r;n++)e.push(t[n]);return e},bc:function(t){return r?Symbol(t):t},xd:6===u,yd:7===u,C:u,ic:function(t,e){for(var n=S.a.W(t.getElementsByTagName("input")).concat(S.a.W(t.getElementsByTagName("textarea"))),r="string"==typeof e?function(t){return t.name===e}:function(t){return e.test(t.name)},i=[],o=n.length-1;0<=o;o--)r(n[o])&&i.push(n[o]);return i},kd:function(t){return"string"==typeof t&&(t=S.a.cb(t))?Ma&&Ma.parse?Ma.parse(t):new Function("return "+t)():null},Gb:function(t,e,n){if(!Ma||!Ma.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return Ma.stringify(S.a.c(t),e,n)},ld:function(t,e,n){var r=(n=n||{}).params||{},i=n.includeFields||this.gc,o=t;if("object"==typeof t&&"form"===S.a.A(t)){o=t.action;for(var s=i.length-1;0<=s;s--)for(var a=S.a.ic(t,i[s]),u=a.length-1;0<=u;u--)r[a[u].name]=a[u].value}e=S.a.c(e);var c=Ja.createElement("form");for(var l in c.style.display="none",c.action=o,c.method="post",e)(t=Ja.createElement("input")).type="hidden",t.name=l,t.value=S.a.Gb(S.a.c(e[l])),c.appendChild(t);h(r,function(t,e){var n=Ja.createElement("input");n.type="hidden",n.name=t,n.value=e,c.appendChild(n)}),Ja.body.appendChild(c),n.submitter?n.submitter(c):c.submit(),setTimeout(function(){c.parentNode.removeChild(c)},0)}}}(),S.b("utils",S.a),S.b("utils.arrayForEach",S.a.r),S.b("utils.arrayFirst",S.a.Vb),S.b("utils.arrayFilter",S.a.Ma),S.b("utils.arrayGetDistinctValues",S.a.Wb),S.b("utils.arrayIndexOf",S.a.o),S.b("utils.arrayMap",S.a.ib),S.b("utils.arrayPushAll",S.a.ta),S.b("utils.arrayRemoveItem",S.a.Na),S.b("utils.extend",S.a.extend),S.b("utils.fieldsIncludedWithJsonPost",S.a.gc),S.b("utils.getFormFields",S.a.ic),S.b("utils.peekObservable",S.a.Bb),S.b("utils.postJson",S.a.ld),S.b("utils.parseJson",S.a.kd),S.b("utils.registerEventHandler",S.a.q),S.b("utils.stringifyJson",S.a.Gb),S.b("utils.range",S.a.nd),S.b("utils.toggleDomNodeCssClass",S.a.fb),S.b("utils.triggerEvent",S.a.Fa),S.b("utils.unwrapObservable",S.a.c),S.b("utils.objectForEach",S.a.D),S.b("utils.addOrRemoveItem",S.a.ra),S.b("utils.setTextContent",S.a.bb),S.b("unwrap",S.a.c),Function.prototype.bind||(Function.prototype.bind=function(e){var n=this;if(1===arguments.length)return function(){return n.apply(e,arguments)};var r=Array.prototype.slice.call(arguments,1);return function(){var t=r.slice(0);return t.push.apply(t,arguments),n.apply(e,t)}}),S.a.e=new function(){function r(t,e){var n=t[o];if(!n||"null"===n||!s[n]){if(!e)return Ha;n=t[o]="ko"+i++,s[n]={}}return s[n]}var i=0,o="__ko__"+(new Date).getTime(),s={};return{get:function(t,e){var n=r(t,!1);return n===Ha?Ha:n[e]},set:function(t,e,n){n===Ha&&r(t,!1)===Ha||(r(t,!0)[e]=n)},clear:function(t){var e=t[o];return!(!e||(delete s[e],t[o]=null))},J:function(){return i+++o}}},S.b("utils.domData",S.a.e),S.b("utils.domData.clear",S.a.e.clear),S.a.G=new function(){function r(t,e){var n=S.a.e.get(t,o);return n===Ha&&e&&(n=[],S.a.e.set(t,o,n)),n}function i(t){if(e=r(t,!1))for(var e=e.slice(0),n=0;n<e.length;n++)e[n](t);if(S.a.e.clear(t),S.a.G.cleanExternalData(t),a[t.nodeType])for(e=t.firstChild;t=e;)e=t.nextSibling,8===t.nodeType&&i(t)}var o=S.a.e.J(),s={1:!0,8:!0,9:!0},a={1:!0,9:!0};return{qa:function(t,e){if("function"!=typeof e)throw Error("Callback must be a function");r(t,!0).push(e)},tc:function(t,e){var n=r(t,!1);n&&(S.a.Na(n,e),0==n.length&&S.a.e.set(t,o,Ha))},ba:function(t){if(s[t.nodeType]&&(i(t),a[t.nodeType])){var e=[];S.a.ta(e,t.getElementsByTagName("*"));for(var n=0,r=e.length;n<r;n++)i(e[n])}return t},removeNode:function(t){S.ba(t),t.parentNode&&t.parentNode.removeChild(t)},cleanExternalData:function(t){La&&"function"==typeof La.cleanData&&La.cleanData([t])}}},S.ba=S.a.G.ba,S.removeNode=S.a.G.removeNode,S.b("cleanNode",S.ba),S.b("removeNode",S.removeNode),S.b("utils.domNodeDisposal",S.a.G),S.b("utils.domNodeDisposal.addDisposeCallback",S.a.G.qa),S.b("utils.domNodeDisposal.removeDisposeCallback",S.a.G.tc),c=[0,"",""],p={thead:l=[1,"<table>","</table>"],tbody:l,tfoot:l,tr:[2,"<table><tbody>","</tbody></table>"],td:h=[3,"<table><tbody><tr>","</tr></tbody></table>"],th:h,option:f=[1,"<select multiple='multiple'>","</select>"],optgroup:f},d=S.a.C<=8,S.a.na=function(t,e){var n;if(La){if(La.parseHTML)n=La.parseHTML(t,e)||[];else if((n=La.clean([t],e))&&n[0]){for(var r=n[0];r.parentNode&&11!==r.parentNode.nodeType;)r=r.parentNode;r.parentNode&&r.parentNode.removeChild(r)}}else{(n=e)||(n=Ja),r=n.parentWindow||n.defaultView||Ia;var i,o=S.a.cb(t).toLowerCase(),s=n.createElement("div");for(o=(i=(o=o.match(/^<([a-z]+)[ >]/))&&p[o[1]]||c)[0],i="ignored<div>"+i[1]+t+i[2]+"</div>","function"==typeof r.innerShiv?s.appendChild(r.innerShiv(i)):(d&&n.appendChild(s),s.innerHTML=i,d&&s.parentNode.removeChild(s));o--;)s=s.lastChild;n=S.a.W(s.lastChild.childNodes)}return n},S.a.Eb=function(t,e){if(S.a.rb(t),null!==(e=S.a.c(e))&&e!==Ha)if("string"!=typeof e&&(e=e.toString()),La)La(t).html(e);else for(var n=S.a.na(e,t.ownerDocument),r=0;r<n.length;r++)t.appendChild(n[r])},S.b("utils.parseHtmlFragment",S.a.na),S.b("utils.setHtml",S.a.Eb),S.N=(y={},{yb:function(t){if("function"!=typeof t)throw Error("You can only pass a function to ko.memoization.memoize()");var e=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return y[e]=t,"\x3c!--[ko_memo:"+e+"]--\x3e"},Bc:function(t,e){var n=y[t];if(n===Ha)throw Error("Couldn't find any memo with ID "+t+". Perhaps it's already been unmemoized.");try{return n.apply(null,e||[]),!0}finally{delete y[t]}},Cc:function(t,e){var n=[];!function t(e,n){if(e)if(8==e.nodeType)null!=(r=S.N.pc(e.nodeValue))&&n.push({Qc:e,hd:r});else if(1==e.nodeType)for(var r=0,i=e.childNodes,o=i.length;r<o;r++)t(i[r],n)}(t,n);for(var r=0,i=n.length;r<i;r++){var o=n[r].Qc,s=[o];e&&S.a.ta(s,e),S.N.Bc(n[r].hd,s),o.nodeValue="",o.parentNode&&o.parentNode.removeChild(o)}},pc:function(t){return(t=t.match(/^\[ko_memo\:(.*?)\]$/))?t[1]:null}}),S.b("memoization",S.N),S.b("memoization.memoize",S.N.yb),S.b("memoization.unmemoize",S.N.Bc),S.b("memoization.parseMemoText",S.N.pc),S.b("memoization.unmemoizeDomNodeAndDescendants",S.N.Cc),S.Z=function(){function t(){if(o)for(var t,e=o,n=0;a<o;)if(t=i[a++]){if(e<a){if(5e3<=++n){a=o,S.a.dc(Error("'Too much recursion' after processing "+n+" task groups."));break}e=o}try{t()}catch(t){S.a.dc(t)}}}function e(){t(),a=o=i.length=0}var n,r,i=[],o=0,s=1,a=0;return{scheduler:Ia.MutationObserver?(n=e,r=Ja.createElement("div"),new MutationObserver(n).observe(r,{attributes:!0}),function(){r.classList.toggle("foo")}):Ja&&"onreadystatechange"in Ja.createElement("script")?function(t){var e=Ja.createElement("script");e.onreadystatechange=function(){e.onreadystatechange=null,Ja.documentElement.removeChild(e),e=null,t()},Ja.documentElement.appendChild(e)}:function(t){setTimeout(t,0)},Za:function(t){return o||S.Z.scheduler(e),i[o++]=t,s++},cancel:function(t){a<=(t-=s-o)&&t<o&&(i[t]=null)},resetForTesting:function(){var t=o-a;return a=o=i.length=0,t},rd:t}}(),S.b("tasks",S.Z),S.b("tasks.schedule",S.Z.Za),S.b("tasks.runEarly",S.Z.rd),S.Aa={throttle:function(e,n){e.throttleEvaluation=n;var r=null;return S.B({read:e,write:function(t){clearTimeout(r),r=S.a.setTimeout(function(){e(t)},n)}})},rateLimit:function(t,e){var n,r,i;"number"==typeof e?n=e:(n=e.timeout,r=e.method),t.gb=!1,i="notifyWhenChangesStop"==r?s:o,t.Wa(function(t){return i(t,n)})},deferred:function(r,t){if(!0!==t)throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");r.gb||(r.gb=!0,r.Wa(function(t){var e,n=!1;return function(){if(!n){S.Z.cancel(e),e=S.Z.Za(t);try{n=!0,r.notifySubscribers(Ha,"dirty")}finally{n=!1}}}}))},notify:function(t,e){t.equalityComparer="always"==e?null:n}};var m={undefined:1,boolean:1,number:1,string:1};S.b("extenders",S.Aa),S.zc=function(t,e,n){this.$=t,this.jb=e,this.Pc=n,this.T=!1,S.H(this,"dispose",this.k)},S.zc.prototype.k=function(){this.T=!0,this.Pc()},S.K=function(){S.a.ab(this,v),v.ub(this)};var g="change",v={ub:function(t){t.F={change:[]},t.Qb=1},Y:function(t,e,n){var r=this;n=n||g;var i=new S.zc(r,e?t.bind(e):t,function(){S.a.Na(r.F[n],i),r.Ka&&r.Ka(n)});return r.ua&&r.ua(n),r.F[n]||(r.F[n]=[]),r.F[n].push(i),i},notifySubscribers:function(t,e){if((e=e||g)===g&&this.Kb(),this.Ra(e)){var n=e===g&&this.Fc||this.F[e].slice(0);try{S.l.Xb();for(var r,i=0;r=n[i];++i)r.T||r.jb(t)}finally{S.l.end()}}},Pa:function(){return this.Qb},Zc:function(t){return this.Pa()!==t},Kb:function(){++this.Qb},Wa:function(t){var e,n,r,i,o=this,s=S.I(o);o.Ja||(o.Ja=o.notifySubscribers,o.notifySubscribers=u);var a=t(function(){o.Ha=!1,s&&i===o&&(i=o.Mb?o.Mb():o());var t=n||o.Ua(r,i);n=e=!1,t&&o.Ja(r=i)});o.Pb=function(t){o.Fc=o.F[g].slice(0),o.Ha=e=!0,i=t,a()},o.Ob=function(t){e||(r=t,o.Ja(t,"beforeChange"))},o.Hc=function(){o.Ua(r,o.p(!0))&&(n=!0)}},Ra:function(t){return this.F[t]&&this.F[t].length},Xc:function(t){if(t)return this.F[t]&&this.F[t].length||0;var n=0;return S.a.D(this.F,function(t,e){"dirty"!==t&&(n+=e.length)}),n},Ua:function(t,e){return!this.equalityComparer||!this.equalityComparer(t,e)},extend:function(t){var r=this;return t&&S.a.D(t,function(t,e){var n=S.Aa[t];"function"==typeof n&&(r=n(r,e)||r)}),r}};S.H(v,"subscribe",v.Y),S.H(v,"extend",v.extend),S.H(v,"getSubscriptionsCount",v.Xc),S.a.la&&S.a.$a(v,Function.prototype),S.K.fn=v,S.lc=function(t){return null!=t&&"function"==typeof t.Y&&"function"==typeof t.notifySubscribers},S.b("subscribable",S.K),S.b("isSubscribable",S.lc),S.xa=S.l=function(){function r(t){n.push(e),e=t}function i(){e=n.pop()}var e,n=[],o=0;return{Xb:r,end:i,sc:function(t){if(e){if(!S.lc(t))throw Error("Only subscribable things can act as dependencies");e.jb.call(e.Lc,t,t.Gc||(t.Gc=++o))}},w:function(t,e,n){try{return r(),t.apply(e,n||[])}finally{i()}},Ca:function(){if(e)return e.m.Ca()},Va:function(){if(e)return e.Va}}}(),S.b("computedContext",S.xa),S.b("computedContext.getDependenciesCount",S.xa.Ca),S.b("computedContext.isInitial",S.xa.Va),S.b("ignoreDependencies",S.wd=S.l.w);var b=S.a.bc("_latestValue");S.O=function(t){function e(){return 0<arguments.length?(e.Ua(e[b],arguments[0])&&(e.ia(),e[b]=arguments[0],e.ha()),this):(S.l.sc(e),e[b])}return e[b]=t,S.a.la||S.a.extend(e,S.K.fn),S.K.fn.ub(e),S.a.ab(e,_),S.options.deferUpdates&&S.Aa.deferred(e,!0),e};var _={equalityComparer:n,p:function(){return this[b]},ha:function(){this.notifySubscribers(this[b])},ia:function(){this.notifySubscribers(this[b],"beforeChange")}};S.a.la&&S.a.$a(_,S.K.fn);var w=S.O.md="__ko_proto__";_[w]=S.O,S.Qa=function(t,e){return null!==t&&t!==Ha&&t[w]!==Ha&&(t[w]===e||S.Qa(t[w],e))},S.I=function(t){return S.Qa(t,S.O)},S.Da=function(t){return!!("function"==typeof t&&t[w]===S.O||"function"==typeof t&&t[w]===S.B&&t.$c)},S.b("observable",S.O),S.b("isObservable",S.I),S.b("isWriteableObservable",S.Da),S.b("isWritableObservable",S.Da),S.b("observable.fn",_),S.H(_,"peek",_.p),S.H(_,"valueHasMutated",_.ha),S.H(_,"valueWillMutate",_.ia),S.ma=function(t){if("object"!=typeof(t=t||[])||!("length"in t))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return t=S.O(t),S.a.ab(t,S.ma.fn),t.extend({trackArrayChanges:!0})},S.ma.fn={remove:function(e){for(var t=this.p(),n=[],r="function"!=typeof e||S.I(e)?function(t){return t===e}:e,i=0;i<t.length;i++){var o=t[i];r(o)&&(0===n.length&&this.ia(),n.push(o),t.splice(i,1),i--)}return n.length&&this.ha(),n},removeAll:function(e){if(e!==Ha)return e?this.remove(function(t){return 0<=S.a.o(e,t)}):[];var t=this.p(),n=t.slice(0);return this.ia(),t.splice(0,t.length),this.ha(),n},destroy:function(e){var t=this.p(),n="function"!=typeof e||S.I(e)?function(t){return t===e}:e;this.ia();for(var r=t.length-1;0<=r;r--)n(t[r])&&(t[r]._destroy=!0);this.ha()},destroyAll:function(e){return e===Ha?this.destroy(function(){return!0}):e?this.destroy(function(t){return 0<=S.a.o(e,t)}):[]},indexOf:function(t){var e=this();return S.a.o(e,t)},replace:function(t,e){var n=this.indexOf(t);0<=n&&(this.ia(),this.p()[n]=e,this.ha())}},S.a.la&&S.a.$a(S.ma.fn,S.O.fn),S.a.r("pop push reverse shift sort splice unshift".split(" "),function(n){S.ma.fn[n]=function(){var t=this.p();this.ia(),this.Yb(t,n,arguments);var e=t[n].apply(t,arguments);return this.ha(),e===t?this:e}}),S.a.r(["slice"],function(e){S.ma.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}}),S.b("observableArray",S.ma),S.Aa.trackArrayChanges=function(r,t){if(r.kb={},t&&"object"==typeof t&&S.a.extend(r.kb,t),r.kb.sparse=!0,!r.Yb){var e,i,h=!1,f=null,p=0,n=r.ua,o=r.Ka;r.ua=function(t){n&&n.call(r,t),"arrayChange"===t&&function(){if(!h){h=!0,i=r.notifySubscribers,r.notifySubscribers=function(t,e){return e&&e!==g||++p,i.apply(this,arguments)};var n=[].concat(r.p()||[]);f=null,e=r.Y(function(t){var e;t=[].concat(t||[]),r.Ra("arrayChange")&&((!f||1<p)&&(f=S.a.lb(n,t,r.kb)),e=f),n=t,f=null,p=0,e&&e.length&&r.notifySubscribers(e,"arrayChange")})}}()},r.Ka=function(t){o&&o.call(r,t),"arrayChange"!==t||r.Ra("arrayChange")||(i&&(r.notifySubscribers=i,i=Ha),e.k(),h=!1)},r.Yb=function(t,e,n){function r(t,e,n){return i[i.length]={status:t,value:e,index:n}}if(h&&!p){var i=[],o=t.length,s=n.length,a=0;switch(e){case"push":a=o;case"unshift":for(e=0;e<s;e++)r("added",n[e],a+e);break;case"pop":a=o-1;case"shift":o&&r("deleted",t[a],a);break;case"splice":e=Math.min(Math.max(0,n[0]<0?o+n[0]:n[0]),o),o=1===s?o:Math.min(e+(n[1]||0),o),s=e+s-2,a=Math.max(o,s);for(var u=[],c=[],l=2;e<a;++e,++l)e<o&&c.push(r("deleted",t[e],e)),e<s&&u.push(r("added",n[l],e));S.a.hc(c,u);break;default:return}f=i}}}};var T=S.a.bc("_state");S.m=S.B=function(t,e,n){function r(){if(0<arguments.length){if("function"!=typeof i)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return i.apply(o.sb,arguments),this}return S.l.sc(r),(o.V||o.t&&r.Sa())&&r.U(),o.M}if("object"==typeof t?n=t:(n=n||{},t&&(n.read=t)),"function"!=typeof n.read)throw Error("Pass a function that returns the value of the ko.computed");var i=n.write,o={M:Ha,da:!0,V:!0,Ta:!1,Hb:!1,T:!1,Ya:!1,t:!1,od:n.read,sb:e||n.owner,i:n.disposeWhenNodeIsRemoved||n.i||null,ya:n.disposeWhen||n.ya,pb:null,s:{},L:0,fc:null};return r[T]=o,r.$c="function"==typeof i,S.a.la||S.a.extend(r,S.K.fn),S.K.fn.ub(r),S.a.ab(r,E),n.pure?(o.Ya=!0,o.t=!0,S.a.extend(r,x)):n.deferEvaluation&&S.a.extend(r,C),S.options.deferUpdates&&S.Aa.deferred(r,!0),o.i&&(o.Hb=!0,o.i.nodeType||(o.i=null)),o.t||n.deferEvaluation||r.U(),o.i&&r.ca()&&S.a.G.qa(o.i,o.pb=function(){r.k()}),r};var E={equalityComparer:n,Ca:function(){return this[T].L},Sb:function(t,e,n){if(this[T].Ya&&e===this)throw Error("A 'pure' computed must not be called recursively");(this[T].s[t]=n).Ia=this[T].L++,n.pa=e.Pa()},Sa:function(){var t,e,n=this[T].s;for(t in n)if(n.hasOwnProperty(t)&&(e=n[t],this.oa&&e.$.Ha||e.$.Zc(e.pa)))return!0},gd:function(){this.oa&&!this[T].Ta&&this.oa(!1)},ca:function(){var t=this[T];return t.V||0<t.L},qd:function(){this.Ha?this[T].V&&(this[T].da=!0):this.ec()},yc:function(t){if(!t.gb||this[T].i)return t.Y(this.ec,this);var e=t.Y(this.gd,this,"dirty"),n=t.Y(this.qd,this);return{$:t,k:function(){e.k(),n.k()}}},ec:function(){var t=this,e=t.throttleEvaluation;e&&0<=e?(clearTimeout(this[T].fc),this[T].fc=S.a.setTimeout(function(){t.U(!0)},e)):t.oa?t.oa(!0):t.U(!0)},U:function(t){var e=this[T],n=e.ya,r=!1;if(!e.Ta&&!e.T){if(e.i&&!S.a.qb(e.i)||n&&n()){if(!e.Hb)return void this.k()}else e.Hb=!1;e.Ta=!0;try{r=this.Vc(t)}finally{e.Ta=!1}return e.L||this.k(),r}},Vc:function(t){var e=this[T],n=!1,r=e.Ya?Ha:!e.L,i={Mc:this,Oa:e.s,ob:e.L};return S.l.Xb({Lc:i,jb:a,m:this,Va:r}),e.s={},e.L=0,i=this.Uc(e,i),this.Ua(e.M,i)&&(e.t||this.notifySubscribers(e.M,"beforeChange"),e.M=i,e.t?this.Kb():t&&this.notifySubscribers(e.M),n=!0),r&&this.notifySubscribers(e.M,"awake"),n},Uc:function(t,e){try{var n=t.od;return t.sb?n.call(t.sb):n()}finally{S.l.end(),e.ob&&!t.t&&S.a.D(e.Oa,i),t.da=t.V=!1}},p:function(t){var e=this[T];return(e.V&&(t||!e.L)||e.t&&this.Sa())&&this.U(),e.M},Wa:function(t){S.K.fn.Wa.call(this,t),this.Mb=function(){return this[T].da?this.U():this[T].V=!1,this[T].M},this.oa=function(t){this.Ob(this[T].M),this[T].V=!0,t&&(this[T].da=!0),this.Pb(this)}},k:function(){var t=this[T];!t.t&&t.s&&S.a.D(t.s,function(t,e){e.k&&e.k()}),t.i&&t.pb&&S.a.G.tc(t.i,t.pb),t.s=null,t.L=0,t.T=!0,t.da=!1,t.V=!1,t.t=!1,t.i=null}},x={ua:function(t){var i=this,o=i[T];if(!o.T&&o.t&&"change"==t){if(o.t=!1,o.da||i.Sa())o.s=null,o.L=0,i.U()&&i.Kb();else{var n=[];S.a.D(o.s,function(t,e){n[e.Ia]=t}),S.a.r(n,function(t,e){var n=o.s[t],r=i.yc(n.$);r.Ia=e,r.pa=n.pa,o.s[t]=r})}o.T||i.notifySubscribers(o.M,"awake")}},Ka:function(t){var n=this[T];n.T||"change"!=t||this.Ra("change")||(S.a.D(n.s,function(t,e){e.k&&(n.s[t]={$:e.$,Ia:e.Ia,pa:e.pa},e.k())}),n.t=!0,this.notifySubscribers(Ha,"asleep"))},Pa:function(){var t=this[T];return t.t&&(t.da||this.Sa())&&this.U(),S.K.fn.Pa.call(this)}},C={ua:function(t){"change"!=t&&"beforeChange"!=t||this.p()}};S.a.la&&S.a.$a(E,S.K.fn);var N,k=S.O.md;S.m[k]=S.O,E[k]=S.m,S.bd=function(t){return S.Qa(t,S.m)},S.cd=function(t){return S.Qa(t,S.m)&&t[T]&&t[T].Ya},S.b("computed",S.m),S.b("dependentObservable",S.m),S.b("isComputed",S.bd),S.b("isPureComputed",S.cd),S.b("computed.fn",E),S.H(E,"peek",E.p),S.H(E,"dispose",E.k),S.H(E,"isActive",E.ca),S.H(E,"getDependenciesCount",E.Ca),S.rc=function(t,e){return"function"==typeof t?S.m(t,e,{pure:!0}):((t=S.a.extend({},t)).pure=!0,S.m(t,e))},S.b("pureComputed",S.rc),function(){function a(r,i,o){if(o=o||new t,"object"!=typeof(r=i(r))||null===r||r===Ha||r instanceof RegExp||r instanceof Date||r instanceof String||r instanceof Number||r instanceof Boolean)return r;var s=r instanceof Array?[]:{};return o.save(r,s),function(t,e){if(t instanceof Array){for(var n=0;n<t.length;n++)e(n);"function"==typeof t.toJSON&&e("toJSON")}else for(n in t)e(n)}(r,function(t){var e=i(r[t]);switch(typeof e){case"boolean":case"number":case"string":case"function":s[t]=e;break;case"object":case"undefined":var n=o.get(e);s[t]=n!==Ha?n:a(e,i,o)}}),s}function t(){this.keys=[],this.Lb=[]}S.Ac=function(t){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return a(t,function(t){for(var e=0;S.I(t)&&e<10;e++)t=t();return t})},S.toJSON=function(t,e,n){return t=S.Ac(t),S.a.Gb(t,e,n)},t.prototype={save:function(t,e){var n=S.a.o(this.keys,t);0<=n?this.Lb[n]=e:(this.keys.push(t),this.Lb.push(e))},get:function(t){return 0<=(t=S.a.o(this.keys,t))?this.Lb[t]:Ha}}}(),S.b("toJS",S.Ac),S.b("toJSON",S.toJSON),S.j={u:function(t){switch(S.a.A(t)){case"option":return!0===t.__ko__hasDomDataOptionValue__?S.a.e.get(t,S.d.options.zb):S.a.C<=7?t.getAttributeNode("value")&&t.getAttributeNode("value").specified?t.value:t.text:t.value;case"select":return 0<=t.selectedIndex?S.j.u(t.options[t.selectedIndex]):Ha;default:return t.value}},ja:function(t,e,n){switch(S.a.A(t)){case"option":switch(typeof e){case"string":S.a.e.set(t,S.d.options.zb,Ha),"__ko__hasDomDataOptionValue__"in t&&delete t.__ko__hasDomDataOptionValue__,t.value=e;break;default:S.a.e.set(t,S.d.options.zb,e),t.__ko__hasDomDataOptionValue__=!0,t.value="number"==typeof e?e:""}break;case"select":""!==e&&null!==e||(e=Ha);for(var r,i=-1,o=0,s=t.options.length;o<s;++o)if((r=S.j.u(t.options[o]))==e||""==r&&e===Ha){i=o;break}(n||0<=i||e===Ha&&1<t.size)&&(t.selectedIndex=i);break;default:null!==e&&e!==Ha||(e=""),t.value=e}}},S.b("selectExtensions",S.j),S.b("selectExtensions.readValue",S.j.u),S.b("selectExtensions.writeValue",S.j.ja),S.h=function(){function r(t){123===(t=S.a.cb(t)).charCodeAt(0)&&(t=t.slice(1,-1));var e,n=[],r=t.match(h),i=[],o=0;if(r){r.push(",");for(var s,a=0;s=r[a];++a){var u=s.charCodeAt(0);if(44===u){if(o<=0){n.push(e&&i.length?{key:e,value:i.join("")}:{unknown:e||i.join("")}),e=o=0,i=[];continue}}else if(58===u){if(!o&&!e&&1===i.length){e=i.pop();continue}}else 47===u&&a&&1<s.length?(u=r[a-1].match(f))&&!p[u[0]]&&((r=(t=t.substr(t.indexOf(s)+1)).match(h)).push(","),a=-1,s="/"):40===u||123===u||91===u?++o:41===u||125===u||93===u?--o:e||i.length||34!==u&&39!==u||(s=s.slice(1,-1));i.push(s)}}return n}var c=["true","false","null","undefined"],l=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,h=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),f=/[\])"'A-Za-z0-9_$]+$/,p={in:1,return:1,typeof:1},d={};return{va:[],ga:d,Ab:r,Xa:function(t,e){function i(t,e){var n;if(!u){var r=S.getBindingHandler(t);if(r&&r.preprocess&&!(e=r.preprocess(e,t,i)))return;(r=d[t])&&(n=e,r=n=!(0<=S.a.o(c,n))&&null!==(r=n.match(l))&&(r[1]?"Object("+r[1]+")"+r[2]:n)),r&&s.push("'"+t+"':function(_z){"+n+"=_z}")}a&&(e="function(){return "+e+" }"),o.push("'"+t+"':"+e)}var o=[],s=[],a=(e=e||{}).valueAccessors,u=e.bindingParams,n="string"==typeof t?r(t):t;return S.a.r(n,function(t){i(t.key||t.unknown,t.value)}),s.length&&i("_ko_property_writers","{"+s.join(",")+" }"),o.join(",")},fd:function(t,e){for(var n=0;n<t.length;n++)if(t[n].key==e)return!0;return!1},Ga:function(t,e,n,r,i){t&&S.I(t)?!S.Da(t)||i&&t.p()===r||t(r):(t=e.get("_ko_property_writers"))&&t[n]&&t[n](r)}}}(),S.b("expressionRewriting",S.h),S.b("expressionRewriting.bindingRewriteValidators",S.h.va),S.b("expressionRewriting.parseObjectLiteral",S.h.Ab),S.b("expressionRewriting.preProcessBindings",S.h.Xa),S.b("expressionRewriting._twoWayBindings",S.h.ga),S.b("jsonExpressionRewriting",S.h),S.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",S.h.Xa),function(){function o(t){return 8==t.nodeType&&n.test(e?t.text:t.nodeValue)}function s(t){return 8==t.nodeType&&i.test(e?t.text:t.nodeValue)}function r(t,e){for(var n=t,r=1,i=[];n=n.nextSibling;){if(s(n)&&0==--r)return i;i.push(n),o(n)&&r++}if(!e)throw Error("Cannot find closing comment tag to match: "+t.nodeValue);return null}function a(t,e){var n=r(t,e);return n?0<n.length?n[n.length-1].nextSibling:t.nextSibling:null}var e=Ja&&"\x3c!--test--\x3e"===Ja.createComment("test").text,n=e?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,i=e?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,u={ul:!0,ol:!0};S.f={aa:{},childNodes:function(t){return o(t)?r(t):t.childNodes},za:function(t){if(o(t))for(var e=0,n=(t=S.f.childNodes(t)).length;e<n;e++)S.removeNode(t[e]);else S.a.rb(t)},fa:function(t,e){if(o(t)){S.f.za(t);for(var n=t.nextSibling,r=0,i=e.length;r<i;r++)n.parentNode.insertBefore(e[r],n)}else S.a.fa(t,e)},qc:function(t,e){o(t)?t.parentNode.insertBefore(e,t.nextSibling):t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},kc:function(t,e,n){n?o(t)?t.parentNode.insertBefore(e,n.nextSibling):n.nextSibling?t.insertBefore(e,n.nextSibling):t.appendChild(e):S.f.qc(t,e)},firstChild:function(t){return o(t)?!t.nextSibling||s(t.nextSibling)?null:t.nextSibling:t.firstChild},nextSibling:function(t){return o(t)&&(t=a(t)),t.nextSibling&&s(t.nextSibling)?null:t.nextSibling},Yc:o,vd:function(t){return(t=(e?t.text:t.nodeValue).match(n))?t[1]:null},oc:function(t){if(u[S.a.A(t)]){var e=t.firstChild;if(e)do{if(1===e.nodeType){var n,r=null;if(n=e.firstChild)do{if(r)r.push(n);else if(o(n)){var i=a(n,!0);i?n=i:r=[n]}else s(n)&&(r=[n])}while(n=n.nextSibling);if(n=r)for(r=e.nextSibling,i=0;i<n.length;i++)r?t.insertBefore(n[i],r):t.appendChild(n[i])}}while(e=e.nextSibling)}}}}(),S.b("virtualElements",S.f),S.b("virtualElements.allowedBindings",S.f.aa),S.b("virtualElements.emptyNode",S.f.za),S.b("virtualElements.insertAfter",S.f.kc),S.b("virtualElements.prepend",S.f.qc),S.b("virtualElements.setDomNodeChildren",S.f.fa),S.S=function(){this.Kc={}},S.a.extend(S.S.prototype,{nodeHasBindings:function(t){switch(t.nodeType){case 1:return null!=t.getAttribute("data-bind")||S.g.getComponentNameForNode(t);case 8:return S.f.Yc(t);default:return!1}},getBindings:function(t,e){var n=(n=this.getBindingsString(t,e))?this.parseBindingsString(n,e,t):null;return S.g.Rb(n,t,e,!1)},getBindingAccessors:function(t,e){var n=(n=this.getBindingsString(t,e))?this.parseBindingsString(n,e,t,{valueAccessors:!0}):null;return S.g.Rb(n,t,e,!0)},getBindingsString:function(t){switch(t.nodeType){case 1:return t.getAttribute("data-bind");case 8:return S.f.vd(t);default:return null}},parseBindingsString:function(e,t,n,r){try{var i,o=this.Kc,s=e+(r&&r.valueAccessors||"");if(!(i=o[s])){var a,u="with($context){with($data||{}){return{"+S.h.Xa(e,r)+"}}}";a=new Function("$context","$element",u),i=o[s]=a}return i(t,n)}catch(t){throw t.message="Unable to parse bindings.\nBindings value: "+e+"\nMessage: "+t.message,t}}}),S.S.instance=new S.S,S.b("bindingProvider",S.S),function(){function s(t){return function(){return t}}function m(t){return t()}function a(n){return S.a.Ea(S.l.w(n),function(t,e){return function(){return n()[e]}})}function g(t,e){return a(this.getBindings.bind(this,t,e))}function o(t,e,n){var r,i=S.f.firstChild(e),o=S.S.instance,s=o.preprocessNode;if(s){for(;r=i;)i=S.f.nextSibling(r),s.call(o,r);i=S.f.firstChild(e)}for(;r=i;)i=S.f.nextSibling(r),u(t,r,n)}function u(t,e,n){var r=!0,i=1===e.nodeType;i&&S.f.oc(e),(i&&n||S.S.instance.nodeHasBindings(e))&&(r=c(e,null,t,n).shouldBindDescendants),r&&!h[S.a.A(e)]&&o(t,e,!i)}function c(i,t,o,e){var s,a,r,u,c,l,n=S.a.e.get(i,v);if(!t){if(n)throw Error("You cannot apply bindings multiple times to the same element.");S.a.e.set(i,v,!0)}if(!n&&e&&S.xc(i,o),t&&"function"!=typeof t)s=t;else{var h=S.S.instance,f=h.getBindingAccessors||g,p=S.B(function(){return(s=t?t(o,i):f.call(h,i,o))&&o.Q&&o.Q(),s},null,{i:i});s&&p.ca()||(p=null)}if(s){var d=p?function(t){return function(){return m(p()[t])}}:function(t){return s[t]},y=function(){return S.a.Ea(p?p():s,m)};y.get=function(t){return s[t]&&m(d(t))},y.has=function(t){return t in s},r=s,u=[],c={},l=[],S.a.D(r,function e(t){if(!c[t]){var n=S.getBindingHandler(t);n&&(n.after&&(l.push(t),S.a.r(n.after,function(t){if(r[t]){if(-1!==S.a.o(l,t))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+l.join(", "));e(t)}}),l.length--),u.push({key:t,jc:n})),c[t]=!0}}),e=u,S.a.r(e,function(t){var e=t.jc.init,n=t.jc.update,r=t.key;if(8===i.nodeType&&!S.f.aa[r])throw Error("The binding '"+r+"' cannot be used with virtual elements");try{"function"==typeof e&&S.l.w(function(){var t=e(i,d(r),y,o.$data,o);if(t&&t.controlsDescendantBindings){if(a!==Ha)throw Error("Multiple bindings ("+a+" and "+r+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");a=r}}),"function"==typeof n&&S.B(function(){n(i,d(r),y,o.$data,o)},null,{i:i})}catch(t){throw t.message='Unable to process binding "'+r+": "+s[r]+'"\nMessage: '+t.message,t}})}return{shouldBindDescendants:a===Ha}}function l(t){return t&&t instanceof S.R?t:new S.R(t)}S.d={};var h={script:!0,textarea:!0,template:!0};S.getBindingHandler=function(t){return S.d[t]},S.R=function(n,r,i,o,t){function e(){var t=c?n():n,e=S.a.c(t);return r?(r.Q&&r.Q(),S.a.extend(u,r),u.Q=a):(u.$parents=[],u.$root=e,u.ko=S),u.$rawData=t,u.$data=e,i&&(u[i]=e),o&&o(u,r,e),u.$data}var s,a,u=this,c="function"==typeof n&&!S.I(n);t&&t.exportDependencies?e():(a=S.B(e,null,{ya:function(){return s&&!S.a.Tb(s)},i:!0})).ca()&&((u.Q=a).equalityComparer=null,s=[],a.Dc=function(t){s.push(t),S.a.G.qa(t,function(t){S.a.Na(s,t),s.length||(a.k(),u.Q=a=Ha)})})},S.R.prototype.createChildContext=function(t,e,n,r){return new S.R(t,this,e,function(t,e){t.$parentContext=e,t.$parent=e.$data,t.$parents=(e.$parents||[]).slice(0),t.$parents.unshift(t.$parent),n&&n(t)},r)},S.R.prototype.extend=function(n){return new S.R(this.Q||this.$data,this,null,function(t,e){t.$rawData=e.$rawData,S.a.extend(t,"function"==typeof n?n():n)})},S.R.prototype.ac=function(t,e){return this.createChildContext(t,e,null,{exportDependencies:!0})};var v=S.a.e.J(),n=S.a.e.J();S.xc=function(t,e){if(2!=arguments.length)return S.a.e.get(t,n);S.a.e.set(t,n,e),e.Q&&e.Q.Dc(t)},S.La=function(t,e,n){return 1===t.nodeType&&S.f.oc(t),c(t,e,l(n),!0)},S.Ic=function(t,e,n){return n=l(n),S.La(t,(i=n,o=t,"function"==typeof(r=e)?a(r.bind(null,i,o)):S.a.Ea(r,s)),n);var r,i,o},S.hb=function(t,e){1!==e.nodeType&&8!==e.nodeType||o(l(t),e,!0)},S.Ub=function(t,e){if(!La&&Ia.jQuery&&(La=Ia.jQuery),e&&1!==e.nodeType&&8!==e.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");e=e||Ia.document.body,u(l(t),e,!0)},S.nb=function(t){switch(t.nodeType){case 1:case 8:var e=S.xc(t);if(e)return e;if(t.parentNode)return S.nb(t.parentNode)}return Ha},S.Oc=function(t){return(t=S.nb(t))?t.$data:Ha},S.b("bindingHandlers",S.d),S.b("applyBindings",S.Ub),S.b("applyBindingsToDescendants",S.hb),S.b("applyBindingAccessorsToNode",S.La),S.b("applyBindingsToNode",S.Ic),S.b("contextFor",S.nb),S.b("dataFor",S.Oc)}(),function(a){function r(r,t){var i,n,o,s=c.hasOwnProperty(r)?c[r]:a;s?s.Y(t):((s=c[r]=new S.K).Y(t),o=function(t,e){var n=!(!e||!e.synchronous);l[r]={definition:t,dd:n},delete c[r],i||n?s.notifySubscribers(t):S.Z.Za(function(){s.notifySubscribers(t)})},u("getConfig",[n=r],function(e){e?u("loadComponent",[n,e],function(t){o(t,e)}):o(null,null)}),i=!0)}function u(e,n,r,i){i||(i=S.g.loaders.slice(0));var t=i.shift();if(t){var o=t[e];if(o){var s=!1;if(o.apply(t,n.concat(function(t){s?r(null):null!==t?r(t):u(e,n,r,i)}))!==a&&(s=!0,!t.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else u(e,n,r,i)}else r(null)}var c={},l={};S.g={get:function(t,e){var n=l.hasOwnProperty(t)?l[t]:a;n?n.dd?S.l.w(function(){e(n.definition)}):S.Z.Za(function(){e(n.definition)}):r(t,e)},$b:function(t){delete l[t]},Nb:u},S.g.loaders=[],S.b("components",S.g),S.b("components.get",S.g.get),S.b("components.clearCachedDefinition",S.g.$b)}(),function(){function i(t){switch(S.a.A(t)){case"script":return S.a.na(t.text);case"textarea":return S.a.na(t.value);case"template":if(o(t.content))return S.a.wa(t.content.childNodes)}return S.a.wa(t.childNodes)}function o(t){return Ia.DocumentFragment?t instanceof DocumentFragment:t&&11===t.nodeType}function u(t,e,n){"string"==typeof e.require?r||Ia.require?(r||Ia.require)([e.require],n):t("Uses require, but no AMD loader is present"):n(e)}function s(e){return function(t){throw Error("Component '"+e+"': "+t)}}var n={};S.g.register=function(t,e){if(!e)throw Error("Invalid configuration for "+t);if(S.g.wb(t))throw Error("Component "+t+" is already registered");n[t]=e},S.g.wb=function(t){return n.hasOwnProperty(t)},S.g.ud=function(t){delete n[t],S.g.$b(t)},S.g.cc={getConfig:function(t,e){e(n.hasOwnProperty(t)?n[t]:null)},loadComponent:function(e,t,n){var r=s(e);u(r,t,function(t){!function(e,t,n,r){function i(){0==--s&&r(o)}var o={},s=2,a=n.template;n=n.viewModel,a?u(t,a,function(t){S.g.Nb("loadTemplate",[e,t],function(t){o.template=t,i()})}):i(),n?u(t,n,function(t){S.g.Nb("loadViewModel",[e,t],function(t){o[c]=t,i()})}):i()}(e,r,t,n)})},loadTemplate:function(t,e,n){if(t=s(t),"string"==typeof e)n(S.a.na(e));else if(e instanceof Array)n(e);else if(o(e))n(S.a.W(e.childNodes));else if(e.element)if(e=e.element,Ia.HTMLElement?e instanceof HTMLElement:e&&e.tagName&&1===e.nodeType)n(i(e));else if("string"==typeof e){var r=Ja.getElementById(e);r?n(i(r)):t("Cannot find element with ID "+e)}else t("Unknown element type: "+e);else t("Unknown template value: "+e)},loadViewModel:function(t,e,n){!function t(e,n,r){if("function"==typeof n)r(function(t){return new n(t)});else if("function"==typeof n[c])r(n[c]);else if("instance"in n){var i=n.instance;r(function(){return i})}else"viewModel"in n?t(e,n.viewModel,r):e("Unknown viewModel value: "+n)}(s(t),e,n)}};var c="createViewModel";S.b("components.register",S.g.register),S.b("components.isRegistered",S.g.wb),S.b("components.unregister",S.g.ud),S.b("components.defaultLoader",S.g.cc),S.g.loaders.push(S.g.cc),S.g.Ec=n}(),function(){S.g.getComponentNameForNode=function(t){var e=S.a.A(t);if(S.g.wb(e)&&(-1!=e.indexOf("-")||"[object HTMLUnknownElement]"==""+t||S.a.C<=8&&t.tagName===e))return e},S.g.Rb=function(t,e,n,r){if(1===e.nodeType){var i=S.g.getComponentNameForNode(e);if(i){if((t=t||{}).component)throw Error('Cannot use the "component" binding on a custom element matching a component');var o={name:i,params:function(n,t){if(e=n.getAttribute("params")){var e=s.parseBindingsString(e,t,n,{valueAccessors:!0,bindingParams:!0}),r=(e=S.a.Ea(e,function(t){return S.m(t,null,{i:n})}),S.a.Ea(e,function(e){var t=e.p();return e.ca()?S.m({read:function(){return S.a.c(e())},write:S.Da(t)&&function(t){e()(t)},i:n}):t}));return r.hasOwnProperty("$raw")||(r.$raw=e),r}return{$raw:{}}}(e,n)};t.component=r?function(){return o}:o}}return t};var r,e,s=new S.S;S.a.C<9&&(S.g.register=(e=S.g.register,function(t){return Ja.createElement(t),e.apply(this,arguments)}),Ja.createDocumentFragment=(r=Ja.createDocumentFragment,function(){var t,e=r(),n=S.g.Ec;for(t in n)n.hasOwnProperty(t)&&e.createElement(t);return e}))}(),N=0,S.d.component={init:function(l,e,t,n,h){function f(){var t=p&&p.dispose;"function"==typeof t&&t.call(p),d=p=null}var p,d,y=S.a.W(S.f.childNodes(l));return S.a.G.qa(l,f),S.m(function(){var a,u,t=S.a.c(e());if("string"==typeof t?a=t:(a=S.a.c(t.name),u=S.a.c(t.params)),!a)throw Error("No component name specified");var c=d=++N;S.g.get(a,function(t){if(d===c){if(f(),!t)throw Error("Unknown component '"+a+"'");!function(t,e,n){if(!(e=e.template))throw Error("Component '"+t+"' has no template");t=S.a.wa(e),S.f.fa(n,t)}(a,t,l);var e=(r=l,i=y,o=u,(s=(n=t).createViewModel)?s.call(n,o,{element:r,templateNodes:i}):o);t=h.createChildContext(e,void 0,function(t){t.$component=e,t.$componentTemplateNodes=y}),p=e,S.hb(t,l)}var n,r,i,o,s})},null,{i:l}),{controlsDescendantBindings:!0}}},S.f.aa.component=!0;var I={class:"className",for:"htmlFor"};S.d.attr={update:function(r,t){var e=S.a.c(t())||{};S.a.D(e,function(t,e){var n=!1===(e=S.a.c(e))||null===e||e===Ha;n&&r.removeAttribute(t),S.a.C<=8&&t in I?(t=I[t],n?r.removeAttribute(t):r[t]=e):n||r.setAttribute(t,e.toString()),"name"===t&&S.a.vc(r,n?"":e.toString())})}},S.d.checked={after:["value","attr"],init:function(i,o,s){function t(){var t=i.checked,e=f?a():t;if(!S.xa.Va()&&(!u||t)){var n=S.l.w(o);if(c){var r=l?n.p():n;h!==e?(t&&(S.a.ra(r,e,!0),S.a.ra(r,h,!1)),h=e):S.a.ra(r,e,t),l&&S.Da(n)&&n(r)}else S.h.Ga(n,s,"checked",e,!0)}}var a=S.rc(function(){return s.has("checkedValue")?S.a.c(s.get("checkedValue")):s.has("value")?S.a.c(s.get("value")):i.value}),e="checkbox"==i.type,u="radio"==i.type;if(e||u){var n=o(),c=e&&S.a.c(n)instanceof Array,l=!(c&&n.push&&n.splice),h=c?a():Ha,f=u||c;u&&!i.name&&S.d.uniqueName.init(i,function(){return!0}),S.m(t,null,{i:i}),S.a.q(i,"click",t),S.m(function(){var t=S.a.c(o());i.checked=c?0<=S.a.o(t,a()):e?t:a()===t},null,{i:i}),n=Ha}}},S.h.ga.checked=!0,S.d.checkedValue={update:function(t,e){t.value=S.a.c(e())}},S.d.css={update:function(n,t){var e=S.a.c(t());null!==e&&"object"==typeof e?S.a.D(e,function(t,e){e=S.a.c(e),S.a.fb(n,t,e)}):(e=S.a.cb(String(e||"")),S.a.fb(n,n.__ko__cssValue,!1),n.__ko__cssValue=e,S.a.fb(n,e,!0))}},S.d.enable={update:function(t,e){var n=S.a.c(e());n&&t.disabled?t.removeAttribute("disabled"):n||t.disabled||(t.disabled=!0)}},S.d.disable={update:function(t,e){S.d.enable.update(t,function(){return!S.a.c(e())})}},S.d.event={init:function(t,o,s,a,u){var e=o()||{};S.a.D(e,function(i){"string"==typeof i&&S.a.q(t,i,function(t){var e,n=o()[i];if(n){try{var r=S.a.W(arguments);a=u.$data,r.unshift(a),e=n.apply(a,r)}finally{!0!==e&&(t.preventDefault?t.preventDefault():t.returnValue=!1)}!1===s.get(i+"Bubble")&&(t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation())}})})}},S.d.foreach={mc:function(n){return function(){var t=n(),e=S.a.Bb(t);return e&&"number"!=typeof e.length?(S.a.c(t),{foreach:e.data,as:e.as,includeDestroyed:e.includeDestroyed,afterAdd:e.afterAdd,beforeRemove:e.beforeRemove,afterRender:e.afterRender,beforeMove:e.beforeMove,afterMove:e.afterMove,templateEngine:S.X.vb}):{foreach:t,templateEngine:S.X.vb}}},init:function(t,e){return S.d.template.init(t,S.d.foreach.mc(e))},update:function(t,e,n,r,i){return S.d.template.update(t,S.d.foreach.mc(e),n,r,i)}},S.h.va.foreach=!1,S.f.aa.foreach=!0,S.d.hasfocus={init:function(r,i,o){function t(t){r.__ko_hasfocusUpdating=!0;var e=r.ownerDocument;if("activeElement"in e){var n;try{n=e.activeElement}catch(t){n=e.body}t=n===r}e=i(),S.h.Ga(e,o,"hasfocus",t,!0),r.__ko_hasfocusLastValue=t,r.__ko_hasfocusUpdating=!1}var e=t.bind(null,!0),n=t.bind(null,!1);S.a.q(r,"focus",e),S.a.q(r,"focusin",e),S.a.q(r,"blur",n),S.a.q(r,"focusout",n)},update:function(t,e){var n=!!S.a.c(e());t.__ko_hasfocusUpdating||t.__ko_hasfocusLastValue===n||(n?t.focus():t.blur(),!n&&t.__ko_hasfocusLastValue&&t.ownerDocument.body.focus(),S.l.w(S.a.Fa,null,[t,n?"focusin":"focusout"]))}},S.h.ga.hasfocus=!0,S.d.hasFocus=S.d.hasfocus,S.h.ga.hasFocus=!0,S.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(t,e){S.a.Eb(t,e())}},e("if"),e("ifnot",!1,!0),e("with",!0,!1,function(t,e){return t.ac(e)});var D={};S.d.options={init:function(t){if("select"!==S.a.A(t))throw Error("options binding applies only to SELECT elements");for(;0<t.length;)t.remove(0);return{controlsDescendantBindings:!0}},update:function(r,t,i){function e(){return S.a.Ma(r.options,function(t){return t.selected})}function o(t,e,n){var r=typeof e;return"function"==r?e(t):"string"==r?t[e]:n}function n(t,e){if(p&&c)S.j.ja(r,S.a.c(i.get("value")),!0);else if(f.length){var n=0<=S.a.o(f,S.j.u(e[0]));S.a.wc(e[0],n),p&&!n&&S.l.w(S.a.Fa,null,[r,"change"])}}var s=r.multiple,a=0!=r.length&&s?r.scrollTop:null,u=S.a.c(t()),c=i.get("valueAllowUnset")&&i.has("value"),l=i.get("optionsIncludeDestroyed");t={};var h,f=[];c||(s?f=S.a.ib(e(),S.j.u):0<=r.selectedIndex&&f.push(S.j.u(r.options[r.selectedIndex]))),u&&(void 0===u.length&&(u=[u]),h=S.a.Ma(u,function(t){return l||t===Ha||null===t||!S.a.c(t._destroy)}),i.has("optionsCaption")&&null!==(u=S.a.c(i.get("optionsCaption")))&&u!==Ha&&h.unshift(D));var p=!1;t.beforeRemove=function(t){r.removeChild(t)},u=n,i.has("optionsAfterRender")&&"function"==typeof i.get("optionsAfterRender")&&(u=function(t,e){n(0,e),S.l.w(i.get("optionsAfterRender"),null,[e[0],t!==D?t:Ha])}),S.a.Db(r,h,function(t,e,n){return n.length&&(f=!c&&n[0].selected?[S.j.u(n[0])]:[],p=!0),e=r.ownerDocument.createElement("option"),t===D?(S.a.bb(e,i.get("optionsCaption")),S.j.ja(e,Ha)):(n=o(t,i.get("optionsValue"),t),S.j.ja(e,S.a.c(n)),t=o(t,i.get("optionsText"),n),S.a.bb(e,t)),[e]},t,u),S.l.w(function(){c?S.j.ja(r,S.a.c(i.get("value")),!0):(s?f.length&&e().length<f.length:f.length&&0<=r.selectedIndex?S.j.u(r.options[r.selectedIndex])!==f[0]:f.length||0<=r.selectedIndex)&&S.a.Fa(r,"change")}),S.a.Sc(r),a&&20<Math.abs(a-r.scrollTop)&&(r.scrollTop=a)}},S.d.options.zb=S.a.e.J(),S.d.selectedOptions={after:["options","foreach"],init:function(n,r,i){S.a.q(n,"change",function(){var t=r(),e=[];S.a.r(n.getElementsByTagName("option"),function(t){t.selected&&e.push(S.j.u(t))}),S.h.Ga(t,i,"selectedOptions",e)})},update:function(t,e){if("select"!=S.a.A(t))throw Error("values binding applies only to SELECT elements");var n=S.a.c(e()),r=t.scrollTop;n&&"number"==typeof n.length&&S.a.r(t.getElementsByTagName("option"),function(t){var e=0<=S.a.o(n,S.j.u(t));t.selected!=e&&S.a.wc(t,e)}),t.scrollTop=r}},S.h.ga.selectedOptions=!0,S.d.style={update:function(n,t){var e=S.a.c(t()||{});S.a.D(e,function(t,e){null!==(e=S.a.c(e))&&e!==Ha&&!1!==e||(e=""),n.style[t]=e})}},S.d.submit={init:function(r,i,t,e,o){if("function"!=typeof i())throw Error("The value for a submit binding must be a function");S.a.q(r,"submit",function(t){var e,n=i();try{e=n.call(o.$data,r)}finally{!0!==e&&(t.preventDefault?t.preventDefault():t.returnValue=!1)}})}},S.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(t,e){S.a.bb(t,e())}},S.f.aa.text=!0,function(){if(Ia&&Ia.navigator)var t=function(t){if(t)return parseFloat(t[1])},l=Ia.opera&&Ia.opera.version&&parseInt(Ia.opera.version()),e=Ia.navigator.userAgent,h=t(e.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),f=t(e.match(/Firefox\/([^ ]*)/));if(S.a.C<10)var r=S.a.e.J(),i=S.a.e.J(),o=function(t){var e=this.activeElement;(e=e&&S.a.e.get(e,i))&&e(t)},p=function(t,e){var n=t.ownerDocument;S.a.e.get(n,r)||(S.a.e.set(n,r,!0),S.a.q(n,"selectionchange",o)),S.a.e.set(t,i,e)};S.d.textInput={init:function(n,r,e){function t(t,e){S.a.q(n,t,e)}function i(){s||(a=n.value,s=S.a.setTimeout(o,4))}function o(){clearTimeout(s),a=s=Ha;var t=n.value;u!==t&&(u=t,S.h.Ga(r(),e,"textInput",t))}var s,a,u=n.value,c=9==S.a.C?i:o;S.a.C<10?(t("propertychange",function(t){"value"===t.propertyName&&c(t)}),8==S.a.C&&(t("keyup",o),t("keydown",o)),8<=S.a.C&&(p(n,c),t("dragend",i))):(t("input",o),h<5&&"textarea"===S.a.A(n)?(t("keydown",i),t("paste",i),t("cut",i)):l<11?t("keydown",i):f<4&&(t("DOMAutoComplete",o),t("dragdrop",o),t("drop",o))),t("change",o),S.m(function t(){var e=S.a.c(r());null!==e&&e!==Ha||(e=""),a!==Ha&&e===a?S.a.setTimeout(t,4):n.value!==e&&(u=e,n.value=e)},null,{i:n})}},S.h.ga.textInput=!0,S.d.textinput={preprocess:function(t,e,n){n("textInput",t)}}}(),S.d.uniqueName={init:function(t,e){if(e()){var n="ko_unique_"+ ++S.d.uniqueName.Nc;S.a.vc(t,n)}}},S.d.uniqueName.Nc=0,S.d.value={after:["options","foreach"],init:function(r,i,o){if("input"!=r.tagName.toLowerCase()||"checkbox"!=r.type&&"radio"!=r.type){var t=["change"],e=o.get("valueUpdate"),n=!1,s=null;e&&("string"==typeof e&&(e=[e]),S.a.ta(t,e),t=S.a.Wb(t));var a=function(){s=null,n=!1;var t=i(),e=S.j.u(r);S.h.Ga(t,o,"value",e)};!S.a.C||"input"!=r.tagName.toLowerCase()||"text"!=r.type||"off"==r.autocomplete||r.form&&"off"==r.form.autocomplete||-1!=S.a.o(t,"propertychange")||(S.a.q(r,"propertychange",function(){n=!0}),S.a.q(r,"focus",function(){n=!1}),S.a.q(r,"blur",function(){n&&a()})),S.a.r(t,function(t){var e=a;S.a.sd(t,"after")&&(e=function(){s=S.j.u(r),S.a.setTimeout(a,0)},t=t.substring(5)),S.a.q(r,t,e)});var u=function(){var t=S.a.c(i()),e=S.j.u(r);if(null!==s&&t===s)S.a.setTimeout(u,0);else if(t!==e)if("select"===S.a.A(r)){var n=o.get("valueAllowUnset");(e=function(){S.j.ja(r,t,n)})(),n||t===S.j.u(r)?S.a.setTimeout(e,0):S.l.w(S.a.Fa,null,[r,"change"])}else S.j.ja(r,t)};S.m(u,null,{i:r})}else S.La(r,{checkedValue:i})},update:function(){}},S.h.ga.value=!0,S.d.visible={update:function(t,e){var n=S.a.c(e()),r="none"!=t.style.display;n&&!r?t.style.display="":!n&&r&&(t.style.display="none")}},S.d.click={init:function(t,e,n,r,i){return S.d.event.init.call(this,t,function(){var t={};return t.click=e(),t},n,r,i)}},S.P=function(){},S.P.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},S.P.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},S.P.prototype.makeTemplateSource=function(t,e){if("string"==typeof t){var n=(e=e||Ja).getElementById(t);if(!n)throw Error("Cannot find template with ID "+t);return new S.v.n(n)}if(1==t.nodeType||8==t.nodeType)return new S.v.sa(t);throw Error("Unknown template type: "+t)},S.P.prototype.renderTemplate=function(t,e,n,r){return t=this.makeTemplateSource(t,r),this.renderTemplateSource(t,e,n,r)},S.P.prototype.isTemplateRewritten=function(t,e){return!1===this.allowTemplateRewriting||this.makeTemplateSource(t,e).data("isRewritten")},S.P.prototype.rewriteTemplate=function(t,e,n){e=e((t=this.makeTemplateSource(t,n)).text()),t.text(e),t.data("isRewritten",!0)},S.b("templateEngine",S.P),S.Ib=function(){function s(t,e,n,r){t=S.h.Ab(t);for(var i=S.h.va,o=0;o<t.length;o++){var s=t[o].key;if(i.hasOwnProperty(s)){var a=i[s];if("function"==typeof a){if(s=a(t[o].value))throw Error(s)}else if(!a)throw Error("This template engine does not support the '"+s+"' binding within its templates")}}return n="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+S.h.Xa(t,{valueAccessors:!0})+" } })()},'"+n.toLowerCase()+"')",r.createJavaScriptEvaluatorBlock(n)+e}var e=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,n=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{Tc:function(t,e,n){e.isTemplateRewritten(t,n)||e.rewriteTemplate(t,function(t){return S.Ib.jd(t,e)},n)},jd:function(t,o){return t.replace(e,function(t,e,n,r,i){return s(i,e,n,o)}).replace(n,function(t,e){return s(e,"\x3c!-- ko --\x3e","#comment",o)})},Jc:function(r,i){return S.N.yb(function(t,e){var n=t.nextSibling;n&&n.nodeName.toLowerCase()===i&&S.La(n,r,e)})}}}(),S.b("__tr_ambtns",S.Ib.Jc),function(){S.v={},S.v.n=function(t){if(this.n=t){var e=S.a.A(t);this.eb="script"===e?1:"textarea"===e?2:"template"==e&&t.content&&11===t.content.nodeType?3:4}},S.v.n.prototype.text=function(){var t=1===this.eb?"text":2===this.eb?"value":"innerHTML";if(0==arguments.length)return this.n[t];var e=arguments[0];"innerHTML"===t?S.a.Eb(this.n,e):this.n[t]=e};var e=S.a.e.J()+"_";S.v.n.prototype.data=function(t){if(1===arguments.length)return S.a.e.get(this.n,e+t);S.a.e.set(this.n,e+t,arguments[1])};var n=S.a.e.J();S.v.n.prototype.nodes=function(){var t=this.n;if(0==arguments.length)return(S.a.e.get(t,n)||{}).mb||(3===this.eb?t.content:4===this.eb?t:Ha);S.a.e.set(t,n,{mb:arguments[0]})},S.v.sa=function(t){this.n=t},S.v.sa.prototype=new S.v.n,S.v.sa.prototype.text=function(){if(0==arguments.length){var t=S.a.e.get(this.n,n)||{};return t.Jb===Ha&&t.mb&&(t.Jb=t.mb.innerHTML),t.Jb}S.a.e.set(this.n,n,{Jb:arguments[0]})},S.b("templateSources",S.v),S.b("templateSources.domElement",S.v.n),S.b("templateSources.anonymousTemplate",S.v.sa)}(),function(){function r(t,e,n){var r;for(e=S.f.nextSibling(e);t&&(r=t)!==e;)n(r,t=S.f.nextSibling(r))}function c(t,e){if(t.length){var i=t[0],o=t[t.length-1],n=i.parentNode,s=S.S.instance,a=s.preprocessNode;if(a){if(r(i,o,function(t,e){var n=t.previousSibling,r=a.call(s,t);r&&(t===i&&(i=r[0]||e),t===o&&(o=r[r.length-1]||n))}),t.length=0,!i)return;i===o?t.push(i):(t.push(i,o),S.a.Ba(t,n))}r(i,o,function(t){1!==t.nodeType&&8!==t.nodeType||S.Ub(e,t)}),r(i,o,function(t){1!==t.nodeType&&8!==t.nodeType||S.N.Cc(t,[e])}),S.a.Ba(t,n)}}function u(t){return t.nodeType?t:0<t.length?t[0]:null}function l(t,e,n,r,i){i=i||{};var o=(t&&u(t)||n||{}).ownerDocument,s=i.templateEngine||f;if(S.Ib.Tc(n,s,o),"number"!=typeof(n=s.renderTemplate(n,r,i,o)).length||0<n.length&&"number"!=typeof n[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(o=!1,e){case"replaceChildren":S.f.fa(t,n),o=!0;break;case"replaceNode":S.a.uc(t,n),o=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+e)}return o&&(c(n,r),i.afterRender&&S.l.w(i.afterRender,null,[n,r.$data])),n}function h(t,e,n){return S.I(t)?t():"function"==typeof t?t(e,n):t}var f;S.Fb=function(t){if(t!=Ha&&!(t instanceof S.P))throw Error("templateEngine must inherit from ko.templateEngine");f=t},S.Cb=function(n,r,i,o,s){if(((i=i||{}).templateEngine||f)==Ha)throw Error("Set a template engine before calling renderTemplate");if(s=s||"replaceChildren",o){var a=u(o);return S.B(function(){var t=r&&r instanceof S.R?r:new S.R(r,null,null,null,{exportDependencies:!0}),e=h(n,t.$data,t);t=l(o,s,e,t,i),"replaceNode"==s&&(a=u(o=t))},null,{ya:function(){return!a||!S.a.qb(a)},i:a&&"replaceNode"==s?a.parentNode:a})}return S.N.yb(function(t){S.Cb(n,r,i,t,"replaceNode")})},S.pd=function(n,e,r,i,o){function s(t,e){c(e,u),r.afterRender&&r.afterRender(e,t),u=null}function a(t,e){return u=o.createChildContext(t,r.as,function(t){t.$index=e}),l(null,"ignoreTargetNode",h(n,t,u),u,r)}var u;return S.B(function(){var t=S.a.c(e)||[];void 0===t.length&&(t=[t]),t=S.a.Ma(t,function(t){return r.includeDestroyed||t===Ha||null===t||!S.a.c(t._destroy)}),S.l.w(S.a.Db,null,[i,t,a,r,s])},null,{i:i})};var s=S.a.e.J();S.d.template={init:function(t,e){var n=S.a.c(e());if("string"==typeof n||n.name)S.f.za(t);else{if("nodes"in n){if(n=n.nodes||[],S.I(n))throw Error('The "nodes" option must be a plain, non-observable array.')}else n=S.f.childNodes(t);n=S.a.nc(n),new S.v.sa(t).nodes(n)}return{controlsDescendantBindings:!0}},update:function(t,e,n,r,i){var o=e();n=!0,r=null,"string"==typeof(e=S.a.c(o))?e={}:(o=e.name,"if"in e&&(n=S.a.c(e.if)),n&&"ifnot"in e&&(n=!S.a.c(e.ifnot))),"foreach"in e?r=S.pd(o||t,n&&e.foreach||[],e,t,i):n?(i="data"in e?i.ac(e.data,e.as):i,r=S.Cb(o||t,i,e,t)):S.f.za(t),i=r,(e=S.a.e.get(t,s))&&"function"==typeof e.k&&e.k(),S.a.e.set(t,s,i&&i.ca()?i:Ha)}},S.h.va.template=function(t){return 1==(t=S.h.Ab(t)).length&&t[0].unknown||S.h.fd(t,"name")?null:"This template engine does not support anonymous templates nested within its templates"},S.f.aa.template=!0}(),S.b("setTemplateEngine",S.Fb),S.b("renderTemplate",S.Cb),S.a.hc=function(t,e,n){var r,i,o,s,a;if(t.length&&e.length)for(r=i=0;(!n||r<n)&&(s=t[i]);++i){for(o=0;a=e[o];++o)if(s.value===a.value){s.moved=a.index,a.moved=s.index,e.splice(o,1),r=o=0;break}r+=o}},S.a.lb=function(){function r(t,e,n,r,i){var o,s,a,u,c,l=Math.min,h=Math.max,f=[],p=t.length,d=e.length,y=d-p||1,m=p+d+1;for(o=0;o<=p;o++)for(u=a,f.push(a=[]),c=l(d,o+y),s=h(0,o-1);s<=c;s++)a[s]=s?o?t[o-1]===e[s-1]?u[s-1]:l(u[s]||m,a[s-1]||m)+1:s+1:o+1;for(l=[],h=[],y=[],o=p,s=d;o||s;)d=f[o][s]-1,s&&d===f[o][s-1]?h.push(l[l.length]={status:n,value:e[--s],index:s}):o&&d===f[o-1][s]?y.push(l[l.length]={status:r,value:t[--o],index:o}):(--s,--o,i.sparse||l.push({status:"retained",value:e[s]}));return S.a.hc(y,h,!i.dontLimitMoves&&10*p),l.reverse()}return function(t,e,n){return n="boolean"==typeof n?{dontLimitMoves:n}:n||{},e=e||[],(t=t||[]).length<e.length?r(t,e,"added","deleted",n):r(e,t,"deleted","added",n)}}(),S.b("utils.compareArrays",S.a.lb),function(){function T(e,n,r,i,o){var s=[],t=S.B(function(){var t=n(r,o,S.a.Ba(s,e))||[];0<s.length&&(S.a.uc(s,t),i&&S.l.w(i,null,[r,t,o])),s.length=0,S.a.ta(s,t)},null,{i:e,ya:function(){return!S.a.Tb(s)}});return{ea:s,B:t.ca()?t:Ha}}var E=S.a.e.J(),x=S.a.e.J();S.a.Db=function(n,t,e,r,i){function o(t,e){g=c[e],d!==e&&(_[t]=g),g.tb(d++),S.a.Ba(g.ea,n),f.push(g),m.push(g)}function s(e,n){if(e)for(var r=0,t=n.length;r<t;r++)n[r]&&S.a.r(n[r].ea,function(t){e(t,r,n[r].ka)})}t=t||[],r=r||{};var a,u=S.a.e.get(n,E)===Ha,c=S.a.e.get(n,E)||[],l=S.a.ib(c,function(t){return t.ka}),h=S.a.lb(l,t,r.dontLimitMoves),f=[],p=0,d=0,y=[],m=[];t=[];for(var g,v,b,_=[],w=(l=[],0);v=h[w];w++)switch(b=v.moved,v.status){case"deleted":b===Ha&&((g=c[p]).B&&(g.B.k(),g.B=Ha),S.a.Ba(g.ea,n).length&&(r.beforeRemove&&(f.push(g),m.push(g),g.ka===x?g=null:t[w]=g),g&&y.push.apply(y,g.ea))),p++;break;case"retained":o(w,p++);break;case"added":b!==Ha?o(w,b):(g={ka:v.value,tb:S.O(d++)},f.push(g),m.push(g),u||(l[w]=g))}for(S.a.e.set(n,E,f),s(r.beforeMove,_),S.a.r(y,r.beforeRemove?S.ba:S.removeNode),w=0,u=S.f.firstChild(n);g=m[w];w++){for(g.ea||S.a.extend(g,T(n,e,g.ka,i,g.tb)),p=0;h=g.ea[p];u=h.nextSibling,a=h,p++)h!==u&&S.f.kc(n,h,a);!g.ad&&i&&(i(g.ka,g.ea,g.tb),g.ad=!0)}for(s(r.beforeRemove,t),w=0;w<t.length;++w)t[w]&&(t[w].ka=x);s(r.afterMove,_),s(r.afterAdd,l)}}(),S.b("utils.setDomNodeChildrenFromArrayMapping",S.a.Db),S.X=function(){this.allowTemplateRewriting=!1},S.X.prototype=new S.P,S.X.prototype.renderTemplateSource=function(t,e,n,r){return(e=S.a.C<9||!t.nodes?null:t.nodes())?S.a.W(e.cloneNode(!0).childNodes):(t=t.text(),S.a.na(t,r))},S.X.vb=new S.X,S.Fb(S.X.vb),S.b("nativeTemplateEngine",S.X),function(){S.xb=function(){var o=this.ed=function(){if(!La||!La.tmpl)return 0;try{if(0<=La.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(t){}return 1}();this.renderTemplateSource=function(t,e,n,r){if(r=r||Ja,n=n||{},o<2)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var i=t.data("precompiled");return i||(i=t.text()||"",i=La.template(null,"{{ko_with $item.koBindingContext}}"+i+"{{/ko_with}}"),t.data("precompiled",i)),t=[e.$data],e=La.extend({koBindingContext:e},n.templateOptions),(e=La.tmpl(i,t,e)).appendTo(r.createElement("div")),La.fragments={},e},this.createJavaScriptEvaluatorBlock=function(t){return"{{ko_code ((function() { return "+t+" })()) }}"},this.addTemplate=function(t,e){Ja.write("<script type='text/html' id='"+t+"'>"+e+"<\/script>")},0<o&&(La.tmpl.tag.ko_code={open:"__.push($1 || '');"},La.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},S.xb.prototype=new S.P;var t=new S.xb;0<t.ed&&S.Fb(t),S.b("jqueryTmplTemplateEngine",S.xb)}()},"function"==typeof define&&define.amd?define("knockout",["exports","require"],Na):"object"==typeof exports&&"object"==typeof module?Na(module.exports||exports):Na(Ia.ko={})}(),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define("jsforce",[],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).jsforce=t()}}(function(){return function o(s,a,u){function c(e,t){if(!a[e]){if(!s[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(l)return l(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var i=a[e]={exports:{}};s[e][0].call(i.exports,function(t){return c(s[e][1][t]||t)},i,i.exports,o,s,a,u)}return a[e].exports}for(var l="function"==typeof require&&require,t=0;t<u.length;t++)c(u[t]);return c}({1:[function(t,e,n){"use strict";var r=t("../core");r.browser=t("./client"),t("../api"),e.exports=r},{"../api":8,"../core":20,"./client":15}],2:[function(t,e,n){"use strict";e.exports="1.9.1"},{}],3:[function(t,e,n){e.exports={inherits:t("inherits"),util:t("util"),events:t("events"),"lodash/core":t("lodash/core"),"readable-stream":t("readable-stream"),multistream:t("multistream"),"./VERSION":t("./VERSION"),"./cache":t("./cache"),"./connection":t("./connection"),"./core":t("./core"),"./csv":t("./csv"),"./date":t("./date"),"./http-api":t("./http-api"),"./logger":t("./logger"),"./oauth2":t("./oauth2"),"./process":t("./process"),"./promise":t("./promise"),"./query":t("./query"),"./quick-action":t("./quick-action"),"./record-stream":t("./record-stream"),"./record":t("./record"),"./soap":t("./soap"),"./sobject":t("./sobject"),"./soql-builder":t("./soql-builder"),"./transport":t("./transport")}},{"./VERSION":2,"./cache":18,"./connection":19,"./core":20,"./csv":21,"./date":22,"./http-api":23,"./logger":24,"./oauth2":25,"./process":26,"./promise":27,"./query":28,"./quick-action":29,"./record":31,"./record-stream":30,"./soap":33,"./sobject":34,"./soql-builder":35,"./transport":36,events:47,inherits:84,"lodash/core":88,multistream:89,"readable-stream":107,util:117}],4:[function(t,e,n){var s=t("lodash/core"),r=t("../core"),i=(t("../promise"),function(t,e){this._report=t,this._conn=t._conn,this.id=e});i.prototype.retrieve=function(t){var e=this._conn,n=this._report,r=[e._baseUrl(),"analytics","reports",n.id,"instances",this.id].join("/");return e.request(r).thenCall(t)};var o=function(t,e){this._conn=t,this.id=e};o.prototype.describe=function(t){var e=[this._conn._baseUrl(),"analytics","reports",this.id,"describe"].join("/");return this._conn.request(e).thenCall(t)},o.prototype.delete=o.prototype.del=o.prototype.destroy=function(t){var e=[this._conn._baseUrl(),"analytics","reports",this.id].join("/");return this._conn.request({method:"DELETE",url:e}).thenCall(t)},o.prototype.clone=function(t,e){var n=[this._conn._baseUrl(),"analytics","reports"].join("/"),r={reportMetadata:{name:t}},i={method:"POST",url:n+="?cloneId="+this.id,headers:{"Content-Type":"application/json"},body:JSON.stringify(r)};return this._conn.request(i).thenCall(e)},o.prototype.explain=function(t){var e="/query/?explain="+this.id;return this._conn.request(e).thenCall(t)},o.prototype.run=o.prototype.exec=o.prototype.execute=function(t,e){t=t||{},s.isFunction(t)&&(e=t,t={});var n=[this._conn._baseUrl(),"analytics","reports",this.id].join("/");n+="?includeDetails="+(t.details?"true":"false");var r={method:t.metadata?"POST":"GET",url:n};return t.metadata&&(r.headers={"Content-Type":"application/json"},r.body=JSON.stringify(t.metadata)),this._conn.request(r).thenCall(e)},o.prototype.executeAsync=function(t,e){t=t||{},s.isFunction(t)&&(e=t,t={});var n=[this._conn._baseUrl(),"analytics","reports",this.id,"instances"].join("/");t.details&&(n+="?includeDetails=true");var r={method:"POST",url:n,body:""};return t.metadata&&(r.headers={"Content-Type":"application/json"},r.body=JSON.stringify(t.metadata)),this._conn.request(r).thenCall(e)},o.prototype.instance=function(t){return new i(this,t)},o.prototype.instances=function(t){var e=[this._conn._baseUrl(),"analytics","reports",this.id,"instances"].join("/");return this._conn.request(e).thenCall(t)};var a=function(t,e){this._conn=t,this.id=e};a.prototype.describe=function(t){var e=[this._conn._baseUrl(),"analytics","dashboards",this.id,"describe"].join("/");return this._conn.request(e).thenCall(t)},a.prototype.components=function(t,e){var n=[this._conn._baseUrl(),"analytics","dashboards",this.id].join("/"),r={};s.isFunction(t)?e=t:s.isArray(t)?r.componentIds=t:s.isString(t)&&(r.componentIds=[t]);var i={method:"POST",url:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(r)};return this._conn.request(i).thenCall(e)},a.prototype.status=function(t){var e=[this._conn._baseUrl(),"analytics","dashboards",this.id,"status"].join("/");return this._conn.request(e).thenCall(t)},a.prototype.refresh=function(t){var e={method:"PUT",url:[this._conn._baseUrl(),"analytics","dashboards",this.id].join("/"),body:""};return this._conn.request(e).thenCall(t)},a.prototype.clone=function(t,e,n){var r=[this._conn._baseUrl(),"analytics","dashboards"].join("/");r+="?cloneId="+this.id;var i={};s.isObject(t)?(i=t,n=e):(i.name=t,i.folderId=e);var o={method:"POST",url:r,headers:{"Content-Type":"application/json"},body:JSON.stringify(i)};return this._conn.request(o).thenCall(n)},a.prototype.delete=a.prototype.del=a.prototype.destroy=function(t){var e=[this._conn._baseUrl(),"analytics","dashboards",this.id].join("/");return this._conn.request({method:"DELETE",url:e}).thenCall(t)};var u=function(t){this._conn=t};u.prototype.report=function(t){return new o(this._conn,t)},u.prototype.reports=function(t){var e=[this._conn._baseUrl(),"analytics","reports"].join("/");return this._conn.request(e).thenCall(t)},u.prototype.dashboard=function(t){return new a(this._conn,t)},u.prototype.dashboards=function(t){var e=[this._conn._baseUrl(),"analytics","dashboards"].join("/");return this._conn.request(e).thenCall(t)},r.on("connection:new",function(t){t.analytics=new u(t)}),e.exports=u},{"../core":20,"../promise":27,"lodash/core":88}],5:[function(t,e,n){var r=t("../core"),i=function(t){this._conn=t};i.prototype._baseUrl=function(){return this._conn.instanceUrl+"/services/apexrest"},i.prototype._createRequestParams=function(t,e,n,r){var i={method:t,url:this._baseUrl()+e},o={};return r&&"object"==typeof r.headers&&(o=r.headers),/^(GET|DELETE)$/i.test(t)||(o["Content-Type"]="application/json"),i.headers=o,n&&(i.body=JSON.stringify(n)),i},i.prototype.get=function(t,e,n){return"function"==typeof e&&(n=e,e=void 0),this._conn.request(this._createRequestParams("GET",t,void 0,e)).thenCall(n)},i.prototype.post=function(t,e,n,r){"function"==typeof e&&(r=e,n=e=void 0),"function"==typeof n&&(r=n,n=void 0);var i=this._createRequestParams("POST",t,e,n);return this._conn.request(i).thenCall(r)},i.prototype.put=function(t,e,n,r){"function"==typeof e&&(r=e,n=e=void 0),"function"==typeof n&&(r=n,n=void 0);var i=this._createRequestParams("PUT",t,e,n);return this._conn.request(i).thenCall(r)},i.prototype.patch=function(t,e,n,r){"function"==typeof e&&(r=e,n=e=void 0),"function"==typeof n&&(r=n,n=void 0);var i=this._createRequestParams("PATCH",t,e,n);return this._conn.request(i).thenCall(r)},i.prototype.del=i.prototype.delete=function(t,e,n){return"function"==typeof e&&(n=e,e=void 0),this._conn.request(this._createRequestParams("DELETE",t,void 0,e)).thenCall(n)},r.on("connection:new",function(t){t.apex=new i(t)}),e.exports=i},{"../core":20}],6:[function(y,m,t){(function(n){var t=y("inherits"),e=y("readable-stream"),i=e.Duplex,r=y("events"),c=y("lodash/core"),s=y("multistream"),o=y("../core"),a=y("../record-stream"),u=y("../promise"),l=y("../http-api"),h=function(t,e,n,r,i){this._bulk=t,this.type=e,this.operation=n,this.options=r||{},this.id=i,this.state=this.id?"Open":"Unknown",this._batches={}};t(h,r.EventEmitter),h.prototype.info=function(t){return this._jobInfo||(this._jobInfo=this.check()),this._jobInfo.thenCall(t)},h.prototype.open=function(t){var e=this,n=this._bulk;n._logger;if(!this._jobInfo){var r=this.operation.toLowerCase();"harddelete"===r&&(r="hardDelete");var i=['<?xml version="1.0" encoding="UTF-8"?>','<jobInfo  xmlns="http://www.force.com/2009/06/asyncapi/dataload">',"<operation>"+r+"</operation>","<object>"+this.type+"</object>",this.options.extIdField?"<externalIdFieldName>"+this.options.extIdField+"</externalIdFieldName>":"",this.options.concurrencyMode?"<concurrencyMode>"+this.options.concurrencyMode+"</concurrencyMode>":"",this.options.assignmentRuleId?"<assignmentRuleId>"+this.options.assignmentRuleId+"</assignmentRuleId>":"","<contentType>CSV</contentType>","</jobInfo>"].join("");this._jobInfo=n._request({method:"POST",path:"/job",body:i,headers:{"Content-Type":"application/xml; charset=utf-8"},responseType:"application/xml"}).then(function(t){return e.emit("open",t.jobInfo),e.id=t.jobInfo.id,e.state=t.jobInfo.state,t.jobInfo},function(t){throw e.emit("error",t),t})}return this._jobInfo.thenCall(t)},h.prototype.createBatch=function(){var t=new f(this),e=this;return t.on("queue",function(){e._batches[t.id]=t}),t},h.prototype.batch=function(t){var e=this._batches[t];return e||(e=new f(this,t),this._batches[t]=e),e},h.prototype.check=function(t){var e=this,n=this._bulk,r=n._logger;return this._jobInfo=this._waitAssign().then(function(){return n._request({method:"GET",path:"/job/"+e.id,responseType:"application/xml"})}).then(function(t){return r.debug(t.jobInfo),e.id=t.jobInfo.id,e.type=t.jobInfo.object,e.operation=t.jobInfo.operation,e.state=t.jobInfo.state,t.jobInfo}),this._jobInfo.thenCall(t)},h.prototype._waitAssign=function(t){return(this.id?u.resolve({id:this.id}):this.open()).thenCall(t)},h.prototype.list=function(t){var e=this,n=this._bulk,r=n._logger;return this._waitAssign().then(function(){return n._request({method:"GET",path:"/job/"+e.id+"/batch",responseType:"application/xml"})}).then(function(t){r.debug(t.batchInfoList.batchInfo);var e=t.batchInfoList;return e=c.isArray(e.batchInfo)?e.batchInfo:[e.batchInfo]}).thenCall(t)},h.prototype.close=function(){var e=this;return this._changeState("Closed").then(function(t){return e.id=null,e.emit("close",t),t},function(t){throw e.emit("error",t),t})},h.prototype.abort=function(){var e=this;return this._changeState("Aborted").then(function(t){return e.id=null,e.emit("abort",t),t},function(t){throw e.emit("error",t),t})},h.prototype._changeState=function(e,t){var n=this,r=this._bulk,i=r._logger;return this._jobInfo=this._waitAssign().then(function(){var t=['<?xml version="1.0" encoding="UTF-8"?>','<jobInfo xmlns="http://www.force.com/2009/06/asyncapi/dataload">',"<state>"+e+"</state>","</jobInfo>"].join("");return r._request({method:"POST",path:"/job/"+n.id,body:t,headers:{"Content-Type":"application/xml; charset=utf-8"},responseType:"application/xml"})}).then(function(t){return i.debug(t.jobInfo),n.state=t.jobInfo.state,t.jobInfo}),this._jobInfo.thenCall(t)};var f=function(t,e){f.super_.call(this,{objectMode:!0}),this.job=t,this.id=e,this._bulk=t._bulk,this._deferred=u.defer(),this._setupDataStreams()};t(f,e.Writable),f.prototype._setupDataStreams=function(){var r=this,t={nullValue:"#N/A"};this._uploadStream=new a.Serializable,this._uploadDataStream=this._uploadStream.stream("csv",t),this._downloadStream=new a.Parsable,this._downloadDataStream=this._downloadStream.stream("csv",t),this.on("finish",function(){r._uploadStream.end()}),this._uploadDataStream.once("readable",function(){r.job.open().then(function(){r._uploadDataStream.pipe(r._createRequestStream())})});var n=this._dataStream=new i;n._write=function(t,e,n){r._uploadDataStream.write(t,e,n)},n.on("finish",function(){r._uploadDataStream.end()}),this._downloadDataStream.on("readable",function(){n.read(0)}),this._downloadDataStream.on("end",function(){n.push(null)}),n._read=function(t){for(var e;null!==(e=r._downloadDataStream.read());)n.push(e)}},f.prototype._createRequestStream=function(){var n=this,t=n._bulk,r=t._logger;return t._request({method:"POST",path:"/job/"+n.job.id+"/batch",headers:{"Content-Type":"text/csv"},responseType:"application/xml"},function(t,e){t?n.emit("error",t):(r.debug(e.batchInfo),n.id=e.batchInfo.id,n.emit("queue",e.batchInfo))}).stream()},f.prototype._write=function(t,e,n){t=c.clone(t),"insert"===this.job.operation?delete t.Id:"delete"===this.job.operation&&(t={Id:t.Id}),delete t.type,delete t.attributes,this._uploadStream.write(t,e,n)},f.prototype.stream=function(){return this._dataStream},f.prototype.run=f.prototype.exec=f.prototype.execute=function(t,e){var n=this;if("function"==typeof t&&(e=t,t=null),this._result)throw new Error("Batch already executed.");var r,i=u.defer();(this._result=i.promise,this._result.then(function(t){n._deferred.resolve(t)},function(t){n._deferred.reject(t)}),this.once("response",function(t){i.resolve(t)}),this.once("error",function(t){i.reject(t)}),c.isObject(t)&&c.isFunction(t.pipe))?t.pipe(this._dataStream):c.isArray(t)?(c.forEach(t,function(e){Object.keys(e).forEach(function(t){"boolean"==typeof e[t]&&(e[t]=String(e[t]))}),n.write(e)}),n.end()):c.isString(t)&&(r=t,this._dataStream.write(r,"utf8"),this._dataStream.end());return this.thenCall(e)},f.prototype.then=function(t,e,n){return this._deferred.promise.then(t,e,n)},f.prototype.thenCall=function(e){return c.isFunction(e)&&this.then(function(t){n.nextTick(function(){e(null,t)})},function(t){n.nextTick(function(){e(t)})}),this},f.prototype.check=function(t){var e=this._bulk,n=e._logger,r=this.job.id,i=this.id;if(!r||!i)throw new Error("Batch not started.");return e._request({method:"GET",path:"/job/"+r+"/batch/"+i,responseType:"application/xml"}).then(function(t){return n.debug(t.batchInfo),t.batchInfo}).thenCall(t)},f.prototype.poll=function(n,r){var i=this,o=this.job.id,s=this.id;if(!o||!s)throw new Error("Batch not started.");var a=(new Date).getTime(),u=function(){var t=(new Date).getTime();if(a+r<t){var e=new Error("Polling time out. Job Id = "+o+" , batch Id = "+s);return e.name="PollingTimeout",e.jobId=o,e.batchId=s,void i.emit("error",e)}i.check(function(t,e){t?i.emit("error",t):"Failed"===e.state?0<parseInt(e.numberRecordsProcessed,10)?i.retrieve():i.emit("error",new Error(e.stateMessage)):"Completed"===e.state?i.retrieve():(i.emit("progress",e),setTimeout(u,n))})};setTimeout(u,n)},f.prototype.retrieve=function(t){var n=this,r=this._bulk,i=this.job.id,o=this.job,s=this.id;if(!i||!s)throw new Error("Batch not started.");return o.info().then(function(t){return r._request({method:"GET",path:"/job/"+i+"/batch/"+s+"/result"})}).then(function(t){var e;if("query"===o.operation){r._conn,t["result-list"].result;e=t["result-list"].result,e=c.map(c.isArray(e)?e:[e],function(t){return{id:t,batchId:s,jobId:i}})}else e=c.map(t,function(t){return{id:t.Id||null,success:"true"===t.Success,errors:t.Error?[t.Error]:[]}});return n.emit("response",e),e}).fail(function(t){throw n.emit("error",t),t}).thenCall(t)},f.prototype.result=function(t){var e=this.job.id,n=this.id;if(!e||!n)throw new Error("Batch not started.");var r=new a.Parsable,i=r.stream("csv");this._bulk._request({method:"GET",path:"/job/"+e+"/batch/"+n+"/result/"+t,responseType:"application/octet-stream"}).stream().pipe(i);return r};var p=function(){p.super_.apply(this,arguments)};t(p,l),p.prototype.beforeSend=function(t){t.headers=t.headers||{},t.headers["X-SFDC-SESSION"]=this._conn.accessToken},p.prototype.isSessionExpired=function(t){return 400===t.statusCode&&/<exceptionCode>InvalidSessionId<\/exceptionCode>/.test(t.body)},p.prototype.hasErrorInResponseBody=function(t){return!!t.error},p.prototype.parseError=function(t){return{errorCode:t.error.exceptionCode,message:t.error.exceptionMessage}};var d=function(t){this._conn=t,this._logger=t._logger};d.prototype.pollInterval=1e3,d.prototype.pollTimeout=1e4,d.prototype._request=function(t,e){var n=this._conn;t=c.clone(t);var r=[n.instanceUrl,"services/async",n.version].join("/");t.url=r+t.path;var i={responseType:t.responseType};return delete t.path,delete t.responseType,new p(this._conn,i).request(t).thenCall(e)},d.prototype.load=function(t,e,n,r,i){var o=this;if(!t||!e)throw new Error("Insufficient arguments. At least, 'type' and 'operation' are required.");c.isObject(n)&&n.constructor===Object||(i=r,r=n,n=null);var s=this.createJob(t,e,n);s.once("error",function(t){a&&a.emit("error",t)});var a=s.createBatch(),u=function(){a=null,s.close()};return a.on("response",u),a.on("error",function(t){"PollingTimeout"!==t.name&&u()}),a.on("queue",function(){a.poll(o.pollInterval,o.pollTimeout)}),a.execute(r,i)},d.prototype.query=function(t){var e=t.replace(/\([\s\S]+\)/g,"").match(/FROM\s+(\w+)/i);if(!e)throw new Error("No sobject type found in query, maybe caused by invalid SOQL.");var n=e[1],r=this,i=new a.Parsable,o=i.stream("csv");return this.load(n,"query",t).then(function(t){var e=t.map(function(t){return r.job(t.jobId).batch(t.batchId).result(t.id).stream()});s(e).pipe(o)}).fail(function(t){i.emit("error",t)}),i},d.prototype.createJob=function(t,e,n){return new h(this,t,e,n)},d.prototype.job=function(t){return new h(this,null,null,null,t)},o.on("connection:new",function(t){t.bulk=new d(t)}),m.exports=d}).call(this,y("_process"))},{"../core":20,"../http-api":23,"../promise":27,"../record-stream":30,_process:91,events:47,inherits:84,"lodash/core":88,multistream:89,"readable-stream":107}],7:[function(t,e,n){var r=t("inherits"),o=t("lodash/core"),i=t("../core"),s=t("../promise"),a=e.exports=function(t){this._conn=t};a.prototype._request=function(t,e){return/^(put|post|patch)$/i.test(t.method)&&o.isObject(t.body)&&(t.headers={"Content-Type":"application/json"},t.body=JSON.stringify(t.body)),t.url=this._normalizeUrl(t.url),this._conn.request(t,e)},a.prototype._normalizeUrl=function(t){return 0===t.indexOf("/chatter/")||0===t.indexOf("/connect/")?"/services/data/v"+this._conn.version+t:/^\/v[\d]+\.[\d]+\//.test(t)?"/services/data"+t:0!==t.indexOf("/services/")&&"/"===t[0]?"/services/data/v"+this._conn.version+"/chatter"+t:t},a.prototype.request=function(t,e){return new u(this,t).thenCall(e)},a.prototype.resource=function(t,e){return new c(this,t,e)},a.prototype.batch=function(t,e){var n=[],r=[];o.forEach(t,function(t){var e=s.defer();t._promise=e.promise,n.push(t.batchParams()),r.push(e)});var i={method:"POST",url:this._normalizeUrl("/connect/batch"),body:{batchRequests:n}};return this.request(i).then(function(t){return o.forEach(t.results,function(t,e){var n=r[e];400<=t.statusCode?n.reject(t.result):n.resolve(t.result)}),t}).thenCall(e)};var u=function(t,e){this._chatter=t,this._params=e,this._promise=null};u.prototype.batchParams=function(){var t=this._params,e={method:t.method,url:this._chatter._normalizeUrl(t.url)};return this._params.body&&(e.richInput=this._params.body),e},u.prototype.promise=function(){return this._promise||this._chatter._request(this._params)},u.prototype.stream=function(){return this._chatter._request(this._params).stream()},u.prototype.then=function(t,e){return this.promise().then(t,e)},u.prototype.thenCall=function(t){return o.isFunction(t)?this.promise().thenCall(t):this};var c=function(t,e,n){if(n){var r=o.map(o.keys(n),function(t){return t+"="+encodeURIComponent(n[t])}).join("&");e+=(0<e.indexOf("?")?"&":"?")+r}c.super_.call(this,t,{method:"GET",url:e}),this._url=e};r(c,u),c.prototype.create=function(t,e){return this._chatter.request({method:"POST",url:this._url,body:t}).thenCall(e)},c.prototype.retrieve=function(t){return this.thenCall(t)},c.prototype.update=function(t,e){return this._chatter.request({method:"POST",url:this._url,body:t}).thenCall(e)},c.prototype.del=c.prototype.delete=function(t){return this._chatter.request({method:"DELETE",url:this._url}).thenCall(t)},i.on("connection:new",function(t){t.chatter=new a(t)})},{"../core":20,"../promise":27,inherits:84,"lodash/core":88}],8:[function(t,e,n){t("./analytics"),t("./apex"),t("./bulk"),t("./chatter"),t("./metadata"),t("./soap"),t("./streaming"),t("./tooling")},{"./analytics":4,"./apex":5,"./bulk":6,"./chatter":7,"./metadata":9,"./soap":10,"./streaming":12,"./tooling":13}],9:[function(m,g,t){(function(n,a){var t=m("inherits"),e=m("events"),r=m("readable-stream"),c=m("lodash/core"),i=m("../core"),u=m("../promise"),o=m("../soap"),s=g.exports=function(t){this._conn=t};function l(t){var e=c.clone(t);return e.success="true"===e.success,e}function h(t){var e=l(t);return e.created="true"===e.created,e}function f(t){var e=c.clone(t);return delete e.$,e}s.prototype.pollInterval=1e3,s.prototype.pollTimeout=1e4,s.prototype._invoke=function(t,e,n){return new o(this._conn,{xmlns:"http://soap.sforce.com/2006/04/metadata",endpointUrl:this._conn.instanceUrl+"/services/Soap/m/"+this._conn.version}).invoke(t,e).then(function(t){return t.result}).thenCall(n)},s.prototype.createAsync=function(e,t,n){if(30<Number(this._conn.version))throw new Error("Async metadata CRUD calls are not supported on ver 31.0 or later.");var r=function(t){return t["@xsi:type"]=e,t},i=c.isArray(t);t=i?c.map(t,r):r(t);var o=this._invoke("create",{metadata:t});return new p(this,o,i).thenCall(n)},s.prototype.createSync=s.prototype.create=function(e,t,n){var r=function(t){return t["@xsi:type"]=e,t};return t=c.isArray(t)?c.map(t,r):r(t),this._invoke("createMetadata",{metadata:t}).then(function(t){return c.isArray(t)?c.map(t,l):l(t)}).thenCall(n)},s.prototype.readSync=s.prototype.read=function(t,e,n){return this._invoke("readMetadata",{type:t,fullNames:e}).then(function(t){return c.isArray(t.records)?c.map(t.records,f):f(t.records)}).thenCall(n)},s.prototype.updateAsync=function(e,t,n){if(30<Number(this._conn.version))throw new Error("Async metadata CRUD calls are not supported on ver 31.0 or later.");var r=function(t){return t.metadata["@xsi:type"]=e,t},i=c.isArray(t);t=i?c.map(t,r):r(t);var o=this._invoke("update",{updateMetadata:t});return new p(this,o,i).thenCall(n)},s.prototype.updateSync=s.prototype.update=function(e,t,n){var r=function(t){return t["@xsi:type"]=e,t};return t=c.isArray(t)?c.map(t,r):r(t),this._invoke("updateMetadata",{metadata:t}).then(function(t){return c.isArray(t)?c.map(t,l):l(t)}).thenCall(n)},s.prototype.upsertSync=s.prototype.upsert=function(e,t,n){var r=function(t){return t["@xsi:type"]=e,t};return t=c.isArray(t)?c.map(t,r):r(t),this._invoke("upsertMetadata",{metadata:t}).then(function(t){return c.isArray(t)?c.map(t,h):h(t)}).thenCall(n)},s.prototype.deleteAsync=function(e,t,n){if(30<Number(this._conn.version))throw new Error("Async metadata CRUD calls are not supported on ver 31.0 or later.");var r=function(t){return c.isString(t)&&(t={fullName:t}),t["@xsi:type"]=e,t},i=c.isArray(t);t=i?c.map(t,r):r(t);var o=this._invoke("delete",{metadata:t});return new p(this,o,i).thenCall(n)},s.prototype.del=s.prototype.deleteSync=s.prototype.delete=function(t,e,n){return this._invoke("deleteMetadata",{type:t,fullNames:e}).then(function(t){return c.isArray(t)?c.map(t,l):l(t)}).thenCall(n)},s.prototype.rename=function(t,e,n,r){return this._invoke("renameMetadata",{type:t,oldFullName:e,newFullName:n}).then(function(t){return l(t)}).thenCall(r)},s.prototype.checkStatus=function(t,e){var n=c.isArray(t),r=this._invoke("checkStatus",{asyncProcessId:t});return new p(this,r,n).thenCall(e)},s.prototype.describe=function(t,e){return c.isString(t)||(e=t,t=this._conn.version),this._invoke("describeMetadata",{asOfVersion:t}).then(function(t){return t.metadataObjects=c.isArray(t.metadataObjects)?t.metadataObjects:[t.metadataObjects],t.metadataObjects=c.map(t.metadataObjects,function(t){return t.childXmlNames&&(t.childXmlNames=c.isArray(t.childXmlNames)?t.childXmlNames:[t.childXmlNames]),t.inFolder="true"===t.inFolder,t.metaFile="true"===t.metaFile,t}),t.partialSaveAllowed="true"===t.partialSaveAllowed,t.testRequired="true"===t.testRequired,t}).thenCall(e)},s.prototype.list=function(t,e,n){return c.isString(e)||(n=e,e=this._conn.version),c.isArray(t)||(t=[t]),this._invoke("listMetadata",{queries:t,asOfVersion:e},n)},s.prototype.retrieve=function(t,e){var n=this._invoke("retrieve",{request:t});return new d(this,n).thenCall(e)},s.prototype.checkRetrieveStatus=function(t,e){return this._invoke("checkRetrieveStatus",{asyncProcessId:t},e)},s.prototype.deploy=function(t,e,n){e&&!c.isFunction(e)||(n=e,e={});var r=u.defer();if(c.isObject(t)&&c.isFunction(t.pipe)){var i=[];t.on("data",function(t){i.push(t)}),t.on("end",function(){r.resolve(a.concat(i).toString("base64"))})}else if(t instanceof a)r.resolve(t.toString("base64"));else{if(!(t instanceof String||"string"==typeof t))throw"Unexpected zipInput type";r.resolve(t)}var o=this,s=r.promise.then(function(t){return o._invoke("deploy",{ZipFile:t,DeployOptions:e},n)});return new y(this,s).thenCall(n)},s.prototype.checkDeployStatus=function(t,e,n){return e=c.isObject(e)||c.isBoolean(e)?!!e:(n=e,!1),this._invoke("checkDeployStatus",{asyncProcessId:t,includeDetails:e}).then(function(t){return t.done="true"===t.done,t.success="true"===t.success,t.checkOnly="true"===t.checkOnly,t.ignoreWarnings&&(t.ignoreWarnings="true"===t.ignoreWarnings),t.rollbackOnError&&(t.rollbackOnError="true"===t.rollbackOnError),t.numberComponentErrors=Number(t.numberComponentErrors),t.numberComponentsDeployed=Number(t.numberComponentsDeployed),t.numberComponentsTotal=Number(t.numberComponentsTotal),t.numberTestErrors=Number(t.numberTestErrors),t.numberTestsCompleted=Number(t.numberTestsCompleted),t.numberTestsTotal=Number(t.numberTestsTotal),t}).thenCall(n)};var p=function(t,e,n){this._meta=t,this._results=e,this._isArray=n};t(p,e.EventEmitter),p.prototype.then=function(n,t){var r=this;return this._results.then(function(t){var e=function(t){return t.$&&"true"===t.$["xsi:nil"]?null:(t.done="true"===t.done,t)};return t=c.isArray(t)?c.map(t,e):e(t),r._isArray&&!c.isArray(t)&&(t=[t]),n(t)},t)},p.prototype.thenCall=function(e){return c.isFunction(e)?this.then(function(t){n.nextTick(function(){e(null,t)})},function(t){n.nextTick(function(){e(t)})}):this},p.prototype.check=function(t){var n=this,r=this._meta;return this.then(function(t){var e=c.isArray(t)?c.map(t,function(t){return t.id}):t.id;return n._ids=e,r.checkStatus(e)}).thenCall(t)},p.prototype.poll=function(s,n){var a=this,r=(new Date).getTime(),u=function(){var t=(new Date).getTime();if(r+n<t){var e="Polling time out.";return a._ids&&(e+=" Process Id = "+a._ids),void a.emit("error",new Error(e))}a.check().then(function(t){for(var e=!0,n=c.isArray(t)?t:[t],r=0,i=n.length;r<i;r++){var o=n[r];o&&!o.done&&(a.emit("progress",o),e=!1)}e?a.emit("complete",t):setTimeout(u,s)},function(t){a.emit("error",t)})};setTimeout(u,s)},p.prototype.complete=function(t){var e=u.defer();this.on("complete",function(t){e.resolve(t)}),this.on("error",function(t){e.reject(t)});var n=this._meta;return this.poll(n.pollInterval,n.pollTimeout),e.promise.thenCall(t)};var d=function(t,e){d.super_.call(this,t,e)};t(d,p),d.prototype.complete=function(t){var e=this._meta;return d.super_.prototype.complete.call(this).then(function(t){return e.checkRetrieveStatus(t.id)}).thenCall(t)},d.prototype.stream=function(){var t=this,n=new r.Readable,e=!1;return n._read=function(){e||(e=!0,t.complete(function(t,e){t?n.emit("error",t):(n.push(new a(e.zipFile,"base64")),n.push(null))}))},n};var y=function(t,e){y.super_.call(this,t,e)};t(y,p),y.prototype.complete=function(e,t){c.isFunction(e)&&(t=e,e=!1);var n=this._meta;return y.super_.prototype.complete.call(this).then(function(t){return n.checkDeployStatus(t.id,e)}).thenCall(t)},i.on("connection:new",function(t){t.metadata=new s(t)})}).call(this,m("_process"),m("buffer").Buffer)},{"../core":20,"../promise":27,"../soap":33,_process:91,buffer:41,events:47,inherits:84,"lodash/core":88,"readable-stream":107}],10:[function(t,e,n){var o=t("lodash/core"),r=t("../core"),i=t("../soap"),s=e.exports=function(t){this._conn=t};s.prototype._invoke=function(t,e,n,r){return new i(this._conn,{xmlns:"urn:partner.soap.sforce.com",endpointUrl:this._conn.instanceUrl+"/services/Soap/u/"+this._conn.version}).invoke(t,e,{result:n}).then(function(t){return t.result}).thenCall(r)};var a={};s.prototype.convertLead=function(t,e){var n=o.isArray(t)?[a.LeadConvertResult]:a.LeadConvertResult;return this._invoke("convertLead",{leadConverts:t},n,e)},a.LeadConvertResult={success:"boolean",errors:[],leadId:"string",accountId:"string",contactId:"string",opportunityId:"string"},s.prototype.merge=function(t,e){var n=o.isArray(t)?[a.MergeResult]:a.MergeResult;return this._invoke("merge",{mergeRequests:t},n,e)},a.MergeResult={success:"boolean",errors:[],id:"string",mergedRecordIds:["string"],updatedRelatedIds:["string"]},s.prototype.emptyRecycleBin=function(t,e){return this._invoke("emptyRecycleBin",{ids:t},[a.EmptyRecycleBinResult],e)},a.EmptyRecycleBinResult={id:"string",success:"boolean",errors:[]},s.prototype.describeTabs=function(t){return this._invoke("describeTabs",{},[a.DescribeTabSetResult],t)},a.DescribeTabSetResult={label:"string",logoUrl:"string",namespace:"string",selected:"boolean",tabs:[{colors:[{theme:"string",color:"string",context:"string"}],iconUrl:"string",icons:[{theme:"string",height:"number",width:"number",url:"string",contentType:"string"}],label:"string",custom:"boolean",miniIconUrl:"string",name:"string",sobjectName:"string",url:"string"}]},s.prototype.getServerTimestamp=function(t){return this._invoke("getServerTimestamp",{},a.GetServerTimestampResult,t)},a.GetServerTimestampResult={timestamp:"string"},s.prototype.getUserInfo=function(t){return this._invoke("getUserInfo",{},a.GetUserInfoResult,t)},a.GetUserInfoResult={accessibilityMode:"boolean",currencySymbol:"string",orgAttachmentFileSizeLimit:"number",orgDefaultCurrencyIsoCode:"string",orgDisallowHtmlAttachments:"boolean",orgHasPersonAccounts:"boolean",organizationId:"string",organizationMultiCurrency:"boolean",organizationName:"string",profileId:"string",roleId:"string",sessionSecondsValid:"number",userDefaultCurrencyIsoCode:"string",userEmail:"string",userFullName:"string",userId:"string",userLanguage:"string",userLocale:"string",userName:"string",userTimeZone:"string",userType:"string",userUiSkin:"string"},s.prototype.setPassword=function(t,e,n){return this._invoke("setPassword",{userId:t,password:e},n)},s.prototype.resetPassword=function(t,e){return this._invoke("resetPassword",{userId:t},e)},s.prototype.create=function(t,e){var n=o.isArray(t)?[a.SaveResult]:a.SaveResult,r={"@xmlns":"urn:partner.soap.sforce.com","@xmlns:ns1":"sobject.partner.soap.sforce.com","ns1:sObjects":t};return this._invoke("create",r,n,e)},s.prototype.update=function(t,e){var n=o.isArray(t)?[a.SaveResult]:a.SaveResult,r={"@xmlns":"urn:partner.soap.sforce.com","@xmlns:ns1":"sobject.partner.soap.sforce.com","ns1:sObjects":t};return this._invoke("update",r,n,e)},a.SaveResult={success:"boolean",errors:[],id:"string"},s.prototype.upsert=function(t,e,n){var r=o.isArray(e)?[a.UpsertResult]:a.UpsertResult,i={"@xmlns":"urn:partner.soap.sforce.com","@xmlns:ns1":"sobject.partner.soap.sforce.com","ns1:externalIDFieldName":t,"ns1:sObjects":e};return this._invoke("upsert",i,r,n)},a.UpsertResult={created:"boolean",success:"boolean",errors:[],id:"string"},s.prototype.delete=function(t,e){var n=o.isArray(t)?[a.DeleteResult]:a.DeleteResult,r={"@xmlns":"urn:partner.soap.sforce.com","@xmlns:ns1":"sobject.partner.soap.sforce.com","ns1:ids":t};return this._invoke("delete",r,n,e)},a.DeleteResult={success:"boolean",errors:[],id:"string"},r.on("connection:new",function(t){t.soap=new s(t)}),e.exports=s},{"../core":20,"../soap":33,"lodash/core":88}],11:[function(t,e,n){var r={AuthFailure:function(n){this.incoming=function(t,e){"/meta/connect"!==t.channel&&"/meta/handshake"!==t.channel||!t.advice||"none"!=t.advice.reconnect?e(t):n(t)}},Replay:function(t,e){var r=null!=e,i=e,o=t;this.setExtensionEnabled=function(t){r=t},this.setReplay=function(t){i=parseInt(t,10)},this.setChannel=function(t){o=t},this.incoming=function(t,e){"/meta/handshake"===t.channel?t.ext&&1==t.ext.replay&&(r=!0):t.channel===o&&t.data&&t.data.event&&t.data.event.replayId&&(i=t.data.event.replayId),e(t)},this.outgoing=function(t,e){if("/meta/subscribe"===t.channel&&r){t.ext||(t.ext={});var n={};n[o]=i,t.ext.replay=n}e(t)}}};e.exports=r},{}],12:[function(t,e,n){var r=t("events"),i=t("inherits"),o=t("lodash/core"),s=t("faye"),a=t("./streaming-extension"),u=t("../core"),c=function(t,e){this._streaming=t,this.name=e};c.prototype.subscribe=function(t){return this._streaming.subscribe(this.name,t)},c.prototype.unsubscribe=function(t){return this._streaming.unsubscribe(this.name,t),this};var l=function(t,e){this._streaming=t,this._name=e};l.prototype.subscribe=function(t){return this._streaming.subscribe(this._name,t)},l.prototype.unsubscribe=function(t){return this._streaming.unsubscribe(this._name,t),this},l.prototype.push=function(n,t){var e=o.isArray(n);n=e?n:[n];var r=this._streaming._conn;return this._id||(this._id=r.sobject("StreamingChannel").findOne({Name:this._name},"Id").then(function(t){return t.Id})),this._id.then(function(t){var e="/sobjects/StreamingChannel/"+t+"/push";return r.requestPost(e,{pushEvents:n})}).then(function(t){return e?t:t[0]}).thenCall(t)};var h=function(t){this._conn=t};i(h,r.EventEmitter),h.prototype._createClient=function(t,e){var n="string"==typeof t&&0===t.indexOf("/u/"),r=[this._conn.instanceUrl,"cometd"+(!0===n&&"36.0"===this._conn.version?"/replay":""),this._conn.version].join("/"),i=new s.Client(r,{});return i.setHeader("Authorization","OAuth "+this._conn.accessToken),e instanceof Array&&e.forEach(function(t){i.addExtension(t)}),-1===i._dispatcher.getConnectionTypes().indexOf("callback-polling")&&(i._dispatcher.selectTransport("long-polling"),i._dispatcher._transport.batching=!1),i},h.prototype._getFayeClient=function(t){var e=0===t.indexOf("/u/")?"generic":"pushTopic";return this._fayeClients&&this._fayeClients[e]||(this._fayeClients=this._fayeClients||{},this._fayeClients[e]=this._createClient(t)),this._fayeClients[e]},h.prototype.topic=function(t){return this._topics=this._topics||{},this._topics[t]=this._topics[t]||new c(this,t)},h.prototype.channel=function(t){return new l(this,t)},h.prototype.subscribe=function(t,e){var n=0===t.indexOf("/")?t:"/topic/"+t;return this._getFayeClient(n).subscribe(n,e)},h.prototype.unsubscribe=function(t,e){var n=0===t.indexOf("/")?t:"/topic/"+t;return this._getFayeClient(n).unsubscribe(n,e),this},h.prototype.createClient=function(t){return this._createClient(null,t)},u.on("connection:new",function(t){t.streaming=new h(t)}),u.StreamingExtension=a,e.exports=h},{"../core":20,"./streaming-extension":11,events:47,faye:48,inherits:84,"lodash/core":88}],13:[function(t,e,n){var r=t("../core"),i=t("lodash/core"),o=t("../cache"),s=function(e){this._conn=e,this._logger=e._logger;["query","queryMore","create","insert","retrieve","update","upsert","del","delete","destroy","describe","describeGlobal","sobject"].forEach(function(t){this[t]=e.constructor.prototype[t]},this),this.cache=new o;var t={key:function(t){return t?"describe."+t:"describe"}};this.describe$=this.cache.makeCacheable(this.describe,this,t),this.describe=this.cache.makeResponseCacheable(this.describe,this,t),this.describeSObject$=this.describe$,this.describeSObject=this.describe,t={key:"describeGlobal"},this.describeGlobal$=this.cache.makeCacheable(this.describeGlobal,this,t),this.describeGlobal=this.cache.makeResponseCacheable(this.describeGlobal,this,t),this.initialize()};s.prototype.initialize=function(){this.sobjects={},this.cache.clear(),this.cache.get("describeGlobal").removeAllListeners("value"),this.cache.get("describeGlobal").on("value",i.bind(function(t){t.result&&i.map(t.result.sobjects,function(t){return t.name}).forEach(this.sobject,this)},this))},s.prototype._baseUrl=function(){return this._conn._baseUrl()+"/tooling"},s.prototype.request=function(){return this._conn.request.apply(this._conn,arguments)},s.prototype.executeAnonymous=function(t,e){var n=this._baseUrl()+"/executeAnonymous?anonymousBody="+encodeURIComponent(t);return this.request(n).thenCall(e)},s.prototype.runTestsAsynchronous=function(t,e){var n=this._baseUrl()+"/runTestsAsynchronous/";return this._conn.requestPost(n,{classids:t.join(",")},void 0,e)},s.prototype.runTestsSynchronous=function(t,e){var n=this._baseUrl()+"/runTestsSynchronous/";return this._conn.requestPost(n,{classnames:t.join(",")},void 0,e)},s.prototype.completions=function(t,e){i.isString(t)||(e=t,t="apex");var n=this._baseUrl()+"/completions?type="+encodeURIComponent(t);return this.request(n).thenCall(e)},r.on("connection:new",function(t){t.tooling=new s(t)}),e.exports=s},{"../cache":18,"../core":20,"lodash/core":88}],14:[function(t,e,n){var c=t("readable-stream").Duplex,l=t("lodash/core");e.exports={supported:"object"==typeof Sfdc&&void 0!==Sfdc.canvas,createRequest:function(u){return function(r,o){var s,a=new c;a._read=function(t){s&&a.push(s.body)};var i=[],t=!1;function e(t){var e={client:u.client,method:r.method,data:t};if(r.headers)for(var n in e.headers={},r.headers)"content-type"===n.toLowerCase()?e.contentType=r.headers[n]:e.headers[n]=r.headers[n];e.success=function(t){var e,i,n=(e=t.responseHeaders,i={},e.split(/\n/).forEach(function(t){var e=t.split(/\s*:\s*/),n=e[0].toLowerCase(),r=e[1];i[n]=r}),i),r=t.payload;l.isString(r)||(r=JSON.stringify(r)),s={statusCode:t.status,headers:n,body:r},o&&o(null,s,s.body),a.end()},e.failure=function(t){o&&o(t)},Sfdc.canvas.client.ajax(r.url,e)}return a._write=function(t,e,n){i.push(t.toString(e)),n()},a.on("finish",function(){t||(e(i.join("")),t=!0)}),!r.body&&""!==r.body&&/^(put|post|patch)$/i.test(r.method)||(e(r.body),t=!0),a}}}},{"lodash/core":88,"readable-stream":107}],15:[function(t,e,n){var r=t("events"),i=t("inherits"),s=t("querystring"),o=t("lodash/core"),a=t("../connection"),y=t("../oauth2");function u(){var t=function(){var t;if(window.location.hash){if((t=s.parse(window.location.hash.substring(1))).access_token)return{success:!0,body:t}}else if(window.location.search&&(t=s.parse(window.location.search.substring(1))).error)return{success:!1,body:t}}(),e=localStorage.getItem("jsforce_state");if(t&&e&&t.body.state===e){localStorage.removeItem("jsforce_state");var n=e.split("."),r=n[0],i=n[1],o=new l(r);return t.success?(o._storeTokens(t.body),location.hash=""):o._storeError(t.body),"popup"===i&&window.close(),!0}}var c=0,l=function(t){this._prefix=t||"jsforce"+c++,this.connection=null};i(l,r.EventEmitter),l.prototype.init=function(t){if(!u()){this.config=t,this.connection=new a(t);var e=this._getTokens();if(e){this.connection.initialize(e);var n=this;setTimeout(function(){n.emit("connect",n.connection)},10)}}},l.prototype.login=function(t,e){o.isFunction(t)&&(e=t,t={}),t=t||{},e=e||function(){},o.extend(t,this.config);this._prompt(t,e)},l.prototype._prompt=function(t,n){var r=this,e=new y(t),i=Math.random().toString(36).substring(2),o=[this._prefix,"popup",i].join(".");localStorage.setItem("jsforce_state",o);var s,a,u,c,l,h=e.getAuthorizationUrl({response_type:"token",scope:t.scope,state:o}),f=t.size||{},p=(s=h,a=f.width||912,u=f.height||513,c=screen.width/2-a/2,l=screen.height/2-u/2,window.open(s,null,"location=yes,toolbar=no,status=no,menubar=no,width="+a+",height="+u+",top="+l+",left="+c));if(!p)return o=[this._prefix,"redirect",i].join("."),localStorage.setItem("jsforce_state",o),h=e.getAuthorizationUrl({response_type:"token",scope:t.scope,state:o}),void(location.href=h);r._removeTokens();var d=setInterval(function(){try{if(!p||p.closed){clearInterval(d);var t=r._getTokens();if(t)r.connection.initialize(t),r.emit("connect",r.connection),n(null,{status:"connect"});else{var e=r._getError();e?n(new Error(e.error+": "+e.error_description)):n(null,{status:"cancel"})}}}catch(t){}},1e3)},l.prototype.isLoggedIn=function(){return!(!this.connection||!this.connection.accessToken)},l.prototype.logout=function(){this.connection.logout(),this._removeTokens(),this.emit("disconnect")},l.prototype._getTokens=function(){var t=new RegExp("(^|;\\s*)"+this._prefix+"_loggedin=true(;|$)");if(document.cookie.match(t)){var e=Number(localStorage.getItem(this._prefix+"_issued_at"));if(Date.now()<e+72e5){var n,r=localStorage.getItem(this._prefix+"_id");if(r){var i=r.split("/");n={id:i.pop(),organizationId:i.pop(),url:r}}return{accessToken:localStorage.getItem(this._prefix+"_access_token"),instanceUrl:localStorage.getItem(this._prefix+"_instance_url"),userInfo:n}}}return null},l.prototype._storeTokens=function(t){localStorage.setItem(this._prefix+"_access_token",t.access_token),localStorage.setItem(this._prefix+"_instance_url",t.instance_url),localStorage.setItem(this._prefix+"_issued_at",t.issued_at),localStorage.setItem(this._prefix+"_id",t.id),document.cookie=this._prefix+"_loggedin=true;"},l.prototype._removeTokens=function(){localStorage.removeItem(this._prefix+"_access_token"),localStorage.removeItem(this._prefix+"_instance_url"),localStorage.removeItem(this._prefix+"_issued_at"),localStorage.removeItem(this._prefix+"_id"),document.cookie=this._prefix+"_loggedin="},l.prototype._getError=function(){try{var t=JSON.parse(localStorage.getItem(this._prefix+"_error"));return localStorage.removeItem(this._prefix+"_error"),t}catch(t){}},l.prototype._storeError=function(t){localStorage.setItem(this._prefix+"_error",JSON.stringify(t))},e.exports=new l,e.exports.Client=l},{"../connection":19,"../oauth2":25,events:47,inherits:84,"lodash/core":88,querystring:96}],16:[function(t,e,n){var l=0;e.exports={supported:"undefined"!=typeof window&&"undefined"!=typeof document,createRequest:function(u,c){return u=u||"callback",c=c||1e4,function(t,e){if("GET"!==t.method.toUpperCase())return e(new Error("JSONP only supports GET request."));var n="_jsforce_jsonpCallback_"+ ++l,r=window,i=t.url;i+=0<i.indexOf("?")?"&":"?",i+=u+"="+n;var o=document.createElement("script");o.type="text/javascript",o.src=i,document.documentElement.appendChild(o);var s=setTimeout(function(){a(),e(new Error("JSONP call time out."))},c);r[n]=function(t){a(),e(null,{statusCode:200,headers:{"content-type":"application/json"},body:JSON.stringify(t)})};var a=function(){clearTimeout(s),document.documentElement.removeChild(o),delete r[n]}}}}},{}],17:[function(t,e,n){"use strict";var u=t("readable-stream").Duplex,c=t("lodash/core");e.exports=function(t,r){var i,o=new XMLHttpRequest;if(o.open(t.method,t.url),t.headers)for(var e in t.headers)o.setRequestHeader(e,t.headers[e]);o.setRequestHeader("Accept","*/*");var s=new u;s._read=function(t){i&&s.push(i.body)};var a=[],n=!1;return s._write=function(t,e,n){a.push(t.toString("buffer"===e?"binary":e)),n()},s.on("finish",function(){n||(o.send(a.join("")),n=!0)}),!t.body&&""!==t.body&&/^(put|post|patch)$/i.test(t.method)||(o.send(t.body),n=!0),o.onreadystatechange=function(){if(4===o.readyState){var t=(n=(o.getAllResponseHeaders()||"").split(/[\r\n]+/),c.map(n,function(t){return t.split(/\s*:/)[0].toLowerCase()})),e={};c.forEach(t,function(t){t&&(e[t]=o.getResponseHeader(t))}),(i={statusCode:o.status,headers:e,body:o.response}).statusCode||(i.statusCode=400,i.body="Access Declined"),r&&r(null,i,i.body),s.end()}var n},s}},{"lodash/core":88,"readable-stream":107}],18:[function(t,e,n){var r=t("events"),i=t("inherits"),l=t("lodash/core"),o=function(){this.fetching=!1};i(o,r.EventEmitter),o.prototype.get=function(t){if(!t)return this._value;this.once("value",t),l.isUndefined(this._value)||this.emit("value",this._value)},o.prototype.set=function(t){this._value=t,this.emit("value",this._value)},o.prototype.clear=function(){this.fetching=!1,delete this._value};var s=function(){this._entries={}};function h(t,e){return e=Array.prototype.slice.apply(e),t+"("+l.map(e,function(t){return JSON.stringify(t)}).join(",")+")"}s.prototype.get=function(t){if(t&&this._entries[t])return this._entries[t];var e=new o;return this._entries[t]=e},s.prototype.clear=function(t){for(var e in this._entries)t&&0!==e.indexOf(t)||this._entries[e].clear()},s.prototype.makeResponseCacheable=function(s,a,u){var c=this;return u=u||{},function(){var t=Array.prototype.slice.apply(arguments),n=t.pop();l.isFunction(n)||(t.push(n),n=null);var e,r,i=l.isString(u.key)?u.key:l.isFunction(u.key)?u.key.apply(a,t):h(u.namespace,t),o=c.get(i);o.fetching=!0,n&&t.push(function(t,e){o.set({error:t,result:e}),n(t,e)});try{e=s.apply(a||this,t)}catch(t){r=t}if(e&&l.isFunction(e.then))return n?e:e.then(function(t){return o.set({error:void 0,result:t}),t},function(t){throw o.set({error:t,result:void 0}),t});if(o.set({error:r,result:e}),r)throw r;return e}},s.prototype.makeCacheable=function(o,s,a){var u=this;a=a||{};var t=function(){var t=Array.prototype.slice.apply(arguments),e=t.pop();l.isFunction(e)||t.push(e);var n=l.isString(a.key)?a.key:l.isFunction(a.key)?a.key.apply(s,t):h(a.namespace,t),r=u.get(n);if(!l.isFunction(e)){var i=r.get();if(!i)throw new Error("Function call result is not cached yet.");if(i.error)throw i.error;return i.result}r.get(function(t){e(t.error,t.result)}),r.fetching||(r.fetching=!0,t.push(function(t,e){r.set({error:t,result:e})}),o.apply(s||this,t))};return t.clear=function(){var t=l.isString(a.key)?a.key:l.isFunction(a.key)?a.key.apply(s,arguments):h(a.namespace,arguments);u.clear(t)},t},e.exports=s},{events:47,inherits:84,"lodash/core":88}],19:[function(E,x,t){(function(r){var t=E("events"),e=E("inherits"),c=E("lodash/core"),l=E("./promise"),i=E("./logger"),o=E("./oauth2"),s=E("./query"),n=E("./sobject"),a=E("./quick-action"),u=E("./http-api"),h=E("./transport"),f=E("./process"),p=E("./cache"),d="https://login.salesforce.com",y="",m="42.0",g=200,v=x.exports=function(t){t=t||{},this._logger=new i(t.logLevel);var e=t.oauth2||{loginUrl:t.loginUrl,clientId:t.clientId,clientSecret:t.clientSecret,redirectUri:t.redirectUri,proxyUrl:t.proxyUrl,httpProxy:t.httpProxy};this.oauth2=e=e instanceof o?e:new o(e),this.loginUrl=t.loginUrl||e.loginUrl||d,this.version=t.version||m,this.maxRequest=t.maxRequest||this.maxRequest||10,t.proxyUrl?this._transport=new h.ProxyTransport(t.proxyUrl):t.httpProxy?this._transport=new h.HttpProxyTransport(t.httpProxy):this._transport=new h,this.callOptions=t.callOptions,E("./core").emit("connection:new",this),this.process=new f(this),this.cache=new p;var n=t.refreshFn;!n&&this.oauth2.clientId&&(n=b),n&&(this._refreshDelegate=new u.SessionRefreshDelegate(this,n));var r={key:function(t){return t?"describe."+t:"describe"}};this.describe$=this.cache.makeCacheable(this.describe,this,r),this.describe=this.cache.makeResponseCacheable(this.describe,this,r),this.describeSObject$=this.describe$,this.describeSObject=this.describe,r={key:"describeGlobal"},this.describeGlobal$=this.cache.makeCacheable(this.describeGlobal,this,r),this.describeGlobal=this.cache.makeResponseCacheable(this.describeGlobal,this,r),this.initialize(t)};function b(r,i){r.oauth2.refreshToken(r.refreshToken,function(t,e){if(t)return i(t);var n=w(e.id);r.initialize({instanceUrl:e.instance_url,accessToken:e.access_token,userInfo:n}),i(null,e.access_token,e)})}function _(t){function e(t){return t<10?"0"+t:t}return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"+00:00"}function w(t){var e=t.split("/");return{id:e.pop(),organizationId:e.pop(),url:t}}function T(t){return t&&String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}e(v,t.EventEmitter),v.prototype.initialize=function(t){if(!t.instanceUrl&&t.serverUrl&&(t.instanceUrl=t.serverUrl.split("/").slice(0,3).join("/")),this.instanceUrl=t.instanceUrl||t.serverUrl||this.instanceUrl||y,this.accessToken=t.sessionId||t.accessToken||this.accessToken,this.refreshToken=t.refreshToken||this.refreshToken,this.refreshToken&&!this._refreshDelegate)throw new Error("Refresh token is specified without oauth2 client information or refresh function");this.signedRequest=t.signedRequest&&function(t){if(c.isString(t)){if("{"===t[0])return JSON.parse(t);var e=t.split(".").pop(),n=r.from(e,"base64").toString("utf-8");return JSON.parse(n)}return t}(t.signedRequest),this.signedRequest&&(this.accessToken=this.signedRequest.client.oauthToken,h.CanvasTransport.supported&&(this._transport=new h.CanvasTransport(this.signedRequest))),t.userInfo&&(this.userInfo=t.userInfo),this.limitInfo={},this.sobjects={},this.cache.clear(),this.cache.get("describeGlobal").removeAllListeners("value"),this.cache.get("describeGlobal").on("value",c.bind(function(t){t.result&&c.map(t.result.sobjects,function(t){return t.name}).forEach(this.sobject,this)},this)),this.tooling&&this.tooling.initialize(),this._sessionType=t.sessionId?"soap":"oauth2"},v.prototype._baseUrl=function(){return[this.instanceUrl,"services/data","v"+this.version].join("/")},v.prototype._normalizeUrl=function(t){return"/"===t[0]?0===t.indexOf("/services/")?this.instanceUrl+t:this._baseUrl()+t:t},v.prototype.request=function(t,e,n){"function"==typeof e&&(n=e,e=null),e=e||{};var r=this;c.isString(t)&&(t={method:"GET",url:t}),t.url=this._normalizeUrl(t.url);var i=new u(this,e);return i.on("response",function(t){if(t.headers&&t.headers["sforce-limit-info"]){var e=t.headers["sforce-limit-info"].match(/api\-usage=(\d+)\/(\d+)/);e&&(r.limitInfo={apiUsage:{used:parseInt(e[1],10),limit:parseInt(e[2],10)}})}}),i.request(t).thenCall(n)},v.prototype.requestGet=function(t,e,n){var r={method:"GET",url:t};return this.request(r,e,n)},v.prototype.requestPost=function(t,e,n,r){var i={method:"POST",url:t,body:JSON.stringify(e),headers:{"content-type":"application/json"}};return this.request(i,n,r)},v.prototype.requestPut=function(t,e,n,r){var i={method:"PUT",url:t,body:JSON.stringify(e),headers:{"content-type":"application/json"}};return this.request(i,n,r)},v.prototype.requestPatch=function(t,e,n,r){var i={method:"PATCH",url:t,body:JSON.stringify(e),headers:{"content-type":"application/json"}};return this.request(i,n,r)},v.prototype.requestDelete=function(t,e,n){var r={method:"DELETE",url:t};return this.request(r,e,n)},v.prototype.query=function(t,e,n){"function"==typeof e&&(n=e,e=void 0);var r=new s(this,t,e);return n&&r.run(n),r},v.prototype.queryAll=function(t,e,n){"function"==typeof e&&(n=e,e=void 0);var r=new s(this,t,e);return r.scanAll(!0),n&&r.run(n),r},v.prototype.queryMore=function(t,e,n){"function"==typeof e&&(n=e,e=void 0);var r=new s(this,{locator:t},e);return n&&r.run(n),r},v.prototype._ensureVersion=function(t){var e=this.version.split(".");return parseInt(e[0],10)>=t},v.prototype.retrieve=function(t,e,n,r){return"function"==typeof n&&(r=n,n={}),n=n||{},(c.isArray(e)?this._ensureVersion(42)?this._retrieveMany(t,e,n):this._retrieveParallel(t,e,n):this._retrieveSingle(t,e,n)).thenCall(r)},v.prototype._retrieveSingle=function(t,e,n){if(!e)return l.reject(new Error("Invalid record ID. Specify valid record ID value"));var r=[this._baseUrl(),"sobjects",t,e].join("/");return n.fields&&(r+="?fields="+n.fields.join(",")),this.request({method:"GET",url:r,headers:n.headers})},v.prototype._retrieveParallel=function(e,t,n){if(t.length>this.maxRequest)return l.reject(new Error("Exceeded max limit of concurrent call"));var r=this;return l.all(t.map(function(t){return r._retrieveSingle(e,t,n).catch(function(t){if(n.allOrNone||"NOT_FOUND"!==t.errorCode)throw t;return null})}))},v.prototype._retrieveMany=function(t,e,n){if(0===e.length)return l.resolve([]);var r=[this._baseUrl(),"composite","sobjects",t].join("/"),o=this;return(n.fields?l.resolve(n.fields):new l(function(r,i){o.describe$(t,function(t,e){if(t)i(t);else{var n=e.fields.map(function(t){return t.name});r(n)}})})).then(function(t){return o.request({method:"POST",url:r,body:JSON.stringify({ids:e,fields:t}),headers:c.defaults(n.headers||{},{"Content-Type":"application/json"})})})},v.prototype._toRecordResult=function(t,e){var n={statusCode:e.errorCode,message:e.message};e.content&&(n.content=e.content),e.fields&&(n.fields=e.fields);var r={success:!1,errors:[n]};return t&&(r.id=t),r},v.prototype.insert=v.prototype.create=function(t,e,n,r){return c.isString(t)||(r=n,n=e,e=t,t=null),"function"==typeof n&&(r=n,n={}),n=n||{},(c.isArray(e)?this._ensureVersion(42)?this._createMany(t,e,n):this._createParallel(t,e,n):this._createSingle(t,e,n)).thenCall(r)},v.prototype._createSingle=function(t,e,n){var r=t||e.attributes&&e.attributes.type||e.type;if(!r)return l.reject(new Error("No SObject Type defined in record"));delete(e=c.clone(e)).Id,delete e.type,delete e.attributes;var i=[this._baseUrl(),"sobjects",r].join("/");return this.request({method:"POST",url:i,body:JSON.stringify(e),headers:c.defaults(n.headers||{},{"Content-Type":"application/json"})})},v.prototype._createParallel=function(e,t,n){if(t.length>this.maxRequest)return l.reject(new Error("Exceeded max limit of concurrent call"));var r=this;return l.all(t.map(function(t){return r._createSingle(e,t,n).catch(function(t){if(n.allOrNone||!t.errorCode)throw t;return this._toRecordResult(null,t)})}))},v.prototype._createMany=function(n,t,r){if(0===t.length)return l.resolve([]);if(t.length>g&&r.allowRecursive){var i=this;return i._createMany(n,t.slice(0,g),r).then(function(e){return i._createMany(n,t.slice(g),r).then(function(t){return e.concat(t)})})}t=c.map(t,function(t){var e=n||t.attributes&&t.attributes.type||t.type;return e?(delete(t=c.clone(t)).Id,delete t.type,t.attributes={type:e},t):l.reject(new Error("No SObject Type defined in record"))});var e=[this._baseUrl(),"composite","sobjects"].join("/");return this.request({method:"POST",url:e,body:JSON.stringify({allOrNone:r.allOrNone||!1,records:t}),headers:c.defaults(r.headers||{},{"Content-Type":"application/json"})})},v.prototype.update=function(t,e,n,r){return c.isString(t)||(r=n,n=e,e=t,t=null),"function"==typeof n&&(r=n,n={}),n=n||{},(c.isArray(e)?this._ensureVersion(42)?this._updateMany(t,e,n):this._updateParallel(t,e,n):this._updateSingle(t,e,n)).thenCall(r)},v.prototype._updateSingle=function(t,e,n){var r=e.Id;if(!r)return l.reject(new Error("Record id is not found in record."));var i=t||e.attributes&&e.attributes.type||e.type;if(!i)return l.reject(new Error("No SObject Type defined in record"));delete(e=c.clone(e)).Id,delete e.type,delete e.attributes;var o=[this._baseUrl(),"sobjects",i,r].join("/");return this.request({method:"PATCH",url:o,body:JSON.stringify(e),headers:c.defaults(n.headers||{},{"Content-Type":"application/json"})},{noContentResponse:{id:r,success:!0,errors:[]}})},v.prototype._updateParallel=function(t,e,n){if(e.length>this.maxRequest)return l.reject(new Error("Exceeded max limit of concurrent call"));var r=this;return l.all(e.map(function(e){return r._updateSingle(t,e,n).catch(function(t){if(n.allOrNone||!t.errorCode)throw t;return this._toRecordResult(e.Id,t)})}))},v.prototype._updateMany=function(r,t,n){if(0===t.length)return l.resolve([]);if(t.length>g&&n.allowRecursive){var i=this;return i._updateMany(r,t.slice(0,g),n).then(function(e){return i._updateMany(r,t.slice(g),n).then(function(t){return e.concat(t)})})}t=c.map(t,function(t){var e=t.Id;if(!e)throw new Error("Record id is not found in record.");var n=r||t.attributes&&t.attributes.type||t.type;if(!n)throw new Error("No SObject Type defined in record");return delete(t=c.clone(t)).Id,t.id=e,delete t.type,t.attributes={type:n},t});var e=[this._baseUrl(),"composite","sobjects"].join("/");return this.request({method:"PATCH",url:e,body:JSON.stringify({allOrNone:n.allOrNone||!1,records:t}),headers:c.defaults(n.headers||{},{"Content-Type":"application/json"})})},v.prototype.upsert=function(i,t,o,s,e){c.isString(i)||(e=s,s=o,o=t,t=i,i=null),"function"==typeof s&&(e=s,s={}),s=s||{};var a=this,u=c.isArray(t);return(t=u?t:[t]).length>this.maxRequest?l.reject(new Error("Exceeded max limit of concurrent call")).thenCall(e):l.all(c.map(t,function(t){var e=i||t.attributes&&t.attributes.type||t.type,n=t[o];delete(t=c.clone(t))[o],delete t.type,delete t.attributes;var r=[a._baseUrl(),"sobjects",e,o,n].join("/");return a.request({method:"PATCH",url:r,body:JSON.stringify(t),headers:c.defaults(s.headers||{},{"Content-Type":"application/json"})},{noContentResponse:{success:!0,errors:[]}}).catch(function(t){if(!u||s.allOrNone||!t.errorCode)throw t;return this._toRecordResult(null,t)})})).then(function(t){return!u&&c.isArray(t)?t[0]:t}).thenCall(e)},v.prototype.delete=v.prototype.del=v.prototype.destroy=function(t,e,n,r){return"function"==typeof n&&(r=n,n={}),n=n||{},(c.isArray(e)?this._ensureVersion(42)?this._destroyMany(t,e,n):this._destroyParallel(t,e,n):this._destroySingle(t,e,n)).thenCall(r)},v.prototype._destroySingle=function(t,e,n){var r=[this._baseUrl(),"sobjects",t,e].join("/");return this.request({method:"DELETE",url:r,headers:n.headers||null},{noContentResponse:{id:e,success:!0,errors:[]}})},v.prototype._destroyParallel=function(t,e,n){if(e.length>this.maxRequest)return l.reject(new Error("Exceeded max limit of concurrent call"));var r=this;return l.all(e.map(function(e){return r._destroySingle(t,e,n).catch(function(t){if(n.allOrNone||!t.errorCode)throw t;return this._toRecordResult(e,t)})}))},v.prototype._destroyMany=function(t,n,r){if(0===n.length)return l.resolve([]);if(n.length>g&&r.allowRecursive){var i=this;return i._destroyMany(t,n.slice(0,g),r).then(function(e){return i._destroyMany(t,n.slice(g),r).then(function(t){return e.concat(t)})})}var e=[this._baseUrl(),"composite","sobjects?ids="].join("/")+n.join(",");return r.allOrNone&&(e+="&allOrNone=true"),this.request({method:"DELETE",url:e,headers:r.headers||null})},v.prototype.search=function(t,e){var n=this._baseUrl()+"/search?q="+encodeURIComponent(t);return this.request(n).thenCall(e)},v.prototype.describe=v.prototype.describeSObject=function(t,e){var n=[this._baseUrl(),"sobjects",t,"describe"].join("/");return this.request(n).thenCall(e)},v.prototype.describeGlobal=function(t){var e=this._baseUrl()+"/sobjects";return this.request(e).thenCall(t)},v.prototype.sobject=function(t){return this.sobjects=this.sobjects||{},this.sobjects[t]=this.sobjects[t]||new n(this,t)},v.prototype.identity=function(t,e){"function"==typeof t&&(e=t,t={}),t=t||{};var n=this,r=this.userInfo&&this.userInfo.url;return l.resolve(r?{identity:r}:this.request({method:"GET",url:this._baseUrl(),headers:t.headers})).then(function(t){var e=t.identity;return n.request({method:"GET",url:e})}).then(function(t){return n.userInfo={id:t.user_id,organizationId:t.organization_id,url:t.id},t}).thenCall(e)},v.prototype.authorize=function(t,e,n){"function"==typeof e&&(n=e,e={});var r=this,i=this._logger;return this.oauth2.requestToken(t,e).then(function(t){var e=w(t.id);return r.initialize({instanceUrl:t.instance_url,accessToken:t.access_token,refreshToken:t.refresh_token,userInfo:e}),i.debug("<login> completed. user id = "+e.id+", org id = "+e.organizationId),e}).thenCall(n)},v.prototype.login=function(t,e,n){var r,i;return this._refreshDelegate=new u.SessionRefreshDelegate(this,(r=t,i=e,function(e,n){e.login(r,i,function(t){if(t)return n(t);n(null,e.accessToken)})})),this.oauth2&&this.oauth2.clientId&&this.oauth2.clientSecret?this.loginByOAuth2(t,e,n):this.loginBySoap(t,e,n)},v.prototype.loginByOAuth2=function(t,e,n){var r=this,i=this._logger;return this.oauth2.authenticate(t,e).then(function(t){var e=w(t.id);return r.initialize({instanceUrl:t.instance_url,accessToken:t.access_token,userInfo:e}),i.debug("<login> completed. user id = "+e.id+", org id = "+e.organizationId),e}).thenCall(n)},v.prototype.loginBySoap=function(t,e,n){var c=this,l=this._logger,r=['<se:Envelope xmlns:se="http://schemas.xmlsoap.org/soap/envelope/">',"<se:Header/>","<se:Body>",'<login xmlns="urn:partner.soap.sforce.com">',"<username>"+T(t)+"</username>","<password>"+T(e)+"</password>","</login>","</se:Body>","</se:Envelope>"].join(""),h=[this.loginUrl,"services/Soap/u",this.version].join("/");return this._transport.httpRequest({method:"POST",url:h,body:r,headers:{"Content-Type":"text/xml",SOAPAction:'""'}}).then(function(t){var e;if(400<=t.statusCode){var n=(e=t.body.match(/<faultstring>([^<]+)<\/faultstring>/))&&e[1];throw new Error(n||t.body)}l.debug("SOAP response = "+t.body);var r=(e=t.body.match(/<serverUrl>([^<]+)<\/serverUrl>/))&&e[1],i=(e=t.body.match(/<sessionId>([^<]+)<\/sessionId>/))&&e[1],o=(e=t.body.match(/<userId>([^<]+)<\/userId>/))&&e[1],s=(e=t.body.match(/<organizationId>([^<]+)<\/organizationId>/))&&e[1],a=h.split("/").slice(0,3).join("/"),u={id:o,organizationId:s,url:a+="/id/"+s+"/"+o};return c.initialize({serverUrl:r.split("/").slice(0,3).join("/"),sessionId:i,userInfo:u}),l.debug("<login> completed. user id = "+o+", org id = "+s),u}).thenCall(n)},v.prototype.logout=function(t,e){return"function"==typeof t&&(e=t,t=!1),"oauth2"===this._sessionType?this.logoutByOAuth2(t,e):this.logoutBySoap(t,e)},v.prototype.logoutByOAuth2=function(t,e){"function"==typeof t&&(e=t,t=!1);var n=this;this._logger;return this.oauth2.revokeToken(t?this.refreshToken:this.accessToken).then(function(){n.accessToken=null,n.userInfo=null,n.refreshToken=null,n.instanceUrl=null,n.cache.clear()}).thenCall(e)},v.prototype.logoutBySoap=function(t,e){"function"==typeof t&&(e=t,t=!1);var r=this,i=this._logger,n=['<se:Envelope xmlns:se="http://schemas.xmlsoap.org/soap/envelope/">',"<se:Header>",'<SessionHeader xmlns="urn:partner.soap.sforce.com">',"<sessionId>"+T(t?this.refreshToken:this.accessToken)+"</sessionId>","</SessionHeader>","</se:Header>","<se:Body>",'<logout xmlns="urn:partner.soap.sforce.com"/>',"</se:Body>","</se:Envelope>"].join("");return this._transport.httpRequest({method:"POST",url:[this.instanceUrl,"services/Soap/u",this.version].join("/"),body:n,headers:{"Content-Type":"text/xml",SOAPAction:'""'}}).then(function(t){if(i.debug("SOAP statusCode = "+t.statusCode+", response = "+t.body),400<=t.statusCode){var e=t.body.match(/<faultstring>([^<]+)<\/faultstring>/),n=e&&e[1];throw new Error(n||t.body)}r.accessToken=null,r.userInfo=null,r.refreshToken=null,r.instanceUrl=null,r.cache.clear()}).thenCall(e)},v.prototype.recent=function(t,e,n){var r;return c.isString(t)||(n=e,e=t,t=void 0),c.isNumber(e)||(n=e,e=void 0),t?(r=[this._baseUrl(),"sobjects",t].join("/"),this.request(r).then(function(t){return e?t.recentItems.slice(0,e):t.recentItems}).thenCall(n)):(r=this._baseUrl()+"/recent",e&&(r+="?limit="+e),this.request(r).thenCall(n))},v.prototype.updated=function(t,e,n,r){var i=[this._baseUrl(),"sobjects",t,"updated"].join("/");return"string"==typeof e&&(e=new Date(e)),e instanceof Date&&(e=_(e)),e&&(i+="?start="+encodeURIComponent(e)),"string"==typeof n&&(n=new Date(n)),n instanceof Date&&(n=_(n)),n&&(i+="&end="+encodeURIComponent(n)),this.request(i).thenCall(r)},v.prototype.deleted=function(t,e,n,r){var i=[this._baseUrl(),"sobjects",t,"deleted"].join("/");return"string"==typeof e&&(e=new Date(e)),e instanceof Date&&(e=_(e)),e&&(i+="?start="+encodeURIComponent(e)),"string"==typeof n&&(n=new Date(n)),n instanceof Date&&(n=_(n)),n&&(i+="&end="+encodeURIComponent(n)),this.request(i).thenCall(r)},v.prototype.tabs=function(t){var e=[this._baseUrl(),"tabs"].join("/");return this.request(e).thenCall(t)},v.prototype.limits=function(t){var e=[this._baseUrl(),"limits"].join("/");return this.request(e).thenCall(t)},v.prototype.theme=function(t){var e=[this._baseUrl(),"theme"].join("/");return this.request(e).thenCall(t)},v.prototype.quickActions=function(t){return this.request("/quickActions").thenCall(t)},v.prototype.quickAction=function(t){return new a(this,"/quickActions/"+t)}}).call(this,E("buffer").Buffer)},{"./cache":18,"./core":20,"./http-api":23,"./logger":24,"./oauth2":25,"./process":26,"./promise":27,"./query":28,"./quick-action":29,"./sobject":34,"./transport":36,buffer:41,events:47,inherits:84,"lodash/core":88}],20:[function(t,e,n){var r=t("events").EventEmitter,i=e.exports=new r;i.VERSION=t("./VERSION"),i.Connection=t("./connection"),i.OAuth2=t("./oauth2"),i.Date=i.SfDate=t("./date"),i.RecordStream=t("./record-stream"),i.Promise=t("./promise"),i.require=t("./require")},{"./VERSION":2,"./connection":19,"./date":22,"./oauth2":25,"./promise":27,"./record-stream":30,"./require":32,events:47}],21:[function(t,e,n){"use strict";var r=t("lodash/core"),i=t("csv-parse"),o=t("csv-parse/lib/sync"),s=t("csv-stringify"),a=t("csv-stringify/lib/sync");e.exports={parseCSV:function(t,e){return e=r.extend({},e,{columns:!0}),o(t,e)},toCSV:function(t,e){return e=r.extend({},e,{header:!0}),a(t,e)},parseCSVStream:function(t){return t=r.extend({},t,{columns:!0}),i(t)},serializeCSVStream:function(t){return t=r.extend({},t,{header:!0}),s(t)}}},{"csv-parse":43,"csv-parse/lib/sync":44,"csv-stringify":45,"csv-stringify/lib/sync":46,"lodash/core":88}],22:[function(t,e,n){"use strict";var u=t("lodash/core"),c=e.exports=function(t){this._literal=t};function l(t){return(t<10?"0":"")+t}c.prototype.toString=c.prototype.toJSON=function(){return this._literal},c.toDateLiteral=function(t){u.isNumber(t)?t=new Date(t):u.isString(t)&&(t=c.parseDate(t));var e=t.getFullYear(),n=t.getMonth()+1,r=t.getDate(),i=[e,l(n),l(r)].join("-");return new c(i)},c.toDateTimeLiteral=function(t){u.isNumber(t)?t=new Date(t):u.isString(t)&&(t=c.parseDate(t));var e=t.getUTCFullYear(),n=t.getUTCMonth()+1,r=t.getUTCDate(),i=t.getUTCHours(),o=t.getUTCMinutes(),s=t.getUTCSeconds(),a=[e,l(n),l(r)].join("-")+"T"+[l(i),l(o),l(s)].join(":")+"Z";return new c(a)},c.parseDate=function(t){var e=new Date,n=t.match(/^([\d]{4})-?([\d]{2})-?([\d]{2})(T([\d]{2}):?([\d]{2}):?([\d]{2})(.([\d]{3}))?(Z|([\+\-])([\d]{2}):?([\d]{2})))?$/);if(n){if(e=new Date(0),n[4]){if(e.setUTCFullYear(parseInt(n[1],10)),e.setUTCDate(parseInt(n[3],10)),e.setUTCMonth(parseInt(n[2],10)-1),e.setUTCHours(parseInt(n[5],10)),e.setUTCMinutes(parseInt(n[6],10)),e.setUTCSeconds(parseInt(n[7],10)),e.setUTCMilliseconds(parseInt(n[9]||"0",10)),n[10]&&"Z"!==n[10]){var r=60*parseInt(n[12],10)+parseInt(n[13],10);e.setTime(("+"===n[11]?-1:1)*r*60*1e3+e.getTime())}}else e.setFullYear(parseInt(n[1],10)),e.setDate(parseInt(n[3],10)),e.setMonth(parseInt(n[2],10)-1),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0);return e}throw new Error("Invalid date format is specified : "+t)};var r={YESTERDAY:1,TODAY:1,TOMORROW:1,LAST_WEEK:1,THIS_WEEK:1,NEXT_WEEK:1,LAST_MONTH:1,THIS_MONTH:1,NEXT_MONTH:1,LAST_90_DAYS:1,NEXT_90_DAYS:1,LAST_N_DAYS:2,NEXT_N_DAYS:2,NEXT_N_WEEKS:2,LAST_N_WEEKS:2,NEXT_N_MONTHS:2,LAST_N_MONTHS:2,THIS_QUARTER:1,LAST_QUARTER:1,NEXT_QUARTER:1,NEXT_N_QUARTERS:2,LAST_N_QUARTERS:2,THIS_YEAR:1,LAST_YEAR:1,NEXT_YEAR:1,NEXT_N_YEARS:2,LAST_N_YEARS:2,THIS_FISCAL_QUARTER:1,LAST_FISCAL_QUARTER:1,NEXT_FISCAL_QUARTER:1,NEXT_N_FISCAL_QUARTERS:2,LAST_N_FISCAL_QUARTERS:2,THIS_FISCAL_YEAR:1,LAST_FISCAL_YEAR:1,NEXT_FISCAL_YEAR:1,NEXT_N_FISCAL_YEARS:2,LAST_N_FISCAL_YEARS:2};for(var i in r){var o=r[i];c[i]=1===o?new c(i):s(i)}function s(e){return function(t){return new c(e+":"+t)}}},{"lodash/core":88}],23:[function(e,t,n){"use strict";var r=e("inherits"),i=e("events"),o=e("lodash/core"),l=e("./promise"),s=function(e,t){t=t||{},this._conn=e,this.on("resume",function(t){e.emit("resume",t)}),this._responseType=t.responseType,this._transport=t.transport||e._transport,this._noContentResponse=t.noContentResponse};function a(t){return JSON.parse(t)}function u(t){var n={};if(e("xml2js").parseString(t,{explicitArray:!1},function(t,e){n={error:t,result:e}}),n.error)throw n.error;return n.result}function c(t){return e("./csv").parseCSV(t)}function h(t){return t}r(s,i.EventEmitter),s.prototype.request=function(n,t){var r=this,e=this._conn,i=e._logger,o=this.getRefreshDelegate(),s=e.instanceUrl,a=l.defer(),u=function(t){t?a.reject(t):(s!==e.instanceUrl&&(n.url=n.url.replace(s,e.instanceUrl)),r.request(n).then(function(t){a.resolve(t)},function(t){a.reject(t)}))};if(o&&o._refreshing)return o.once("resume",u),a.promise.thenCall(t);r.beforeSend(n),r.emit("request",n),i.debug("<request> method="+n.method+", url="+n.url);var c=Date.now();return this._transport.httpRequest(n).then(function(t){var e=Date.now();if(i.debug("elappsed time : "+(e-c)+"msec"),i.debug("<response> status="+t.statusCode+", url="+n.url),r.emit("response",t),r.isSessionExpired(t)&&o)return o.refresh(c,u),a.promise;if(r.isErrorResponse(t))throw r.getError(t);return r.getResponseBody(t)},function(t){var e=Date.now();throw i.debug("elappsed time : "+(e-c)+"msec"),i.error(t),t}).thenCall(t)},s.prototype.getRefreshDelegate=function(){return this._conn._refreshDelegate},s.prototype.beforeSend=function(t){if(t.headers=t.headers||{},this._conn.accessToken&&(t.headers.Authorization="Bearer "+this._conn.accessToken),this._conn.callOptions){var e=[];for(var n in this._conn.callOptions)e.push(n+"="+this._conn.callOptions[n]);t.headers["Sforce-Call-Options"]=e.join(", ")}},s.prototype.getResponseContentType=function(t){return this._responseType||t.headers&&t.headers["content-type"]},s.prototype.parseResponseBody=function(e){var t=this.getResponseContentType(e),n=/^(text|application)\/xml(;|$)/.test(t)?u:/^application\/json(;|$)/.test(t)?a:/^text\/csv(;|$)/.test(t)?c:h;try{return n(e.body)}catch(t){return e.body}},s.prototype.getResponseBody=function(t){if(204===t.statusCode)return this._noContentResponse;var e,n=this.parseResponseBody(t);if(this.hasErrorInResponseBody(n))throw e=this.getError(t,n);if(300===t.statusCode)throw(e=new Error("Multiple records found")).name="MULTIPLE_CHOICES",e.content=n,e;return n},s.prototype.isSessionExpired=function(t){return 401===t.statusCode},s.prototype.isErrorResponse=function(t){return 400<=t.statusCode},s.prototype.hasErrorInResponseBody=function(t){return!1},s.prototype.parseError=function(t){var e=t;return o.isArray(e)?e[0]:e},s.prototype.getError=function(t,e){var n;try{n=this.parseError(e||this.parseResponseBody(t))}catch(t){}n=o.isObject(n)&&o.isString(n.message)?n:{errorCode:"ERROR_HTTP_"+t.statusCode,message:t.body};var r=new Error(n.message);for(var i in r.name=n.errorCode,n)r[i]=n[i];return r};var f=function(t,e){this._conn=t,this._refreshFn=e,this._refreshing=!1};r(f,i.EventEmitter),f.prototype.refresh=function(t,e){if(this._lastRefreshedAt>t)return e();var r=this,i=this._conn,o=i._logger;return r.once("resume",e),r._refreshing?void 0:(o.debug("<refresh token>"),r._refreshing=!0,r._refreshFn(i,function(t,e,n){t||(o.debug("Connection refresh completed."),i.accessToken=e,i.emit("refresh",e,n)),r._lastRefreshedAt=Date.now(),r._refreshing=!1,r.emit("resume",t)}))},s.SessionRefreshDelegate=f,t.exports=s},{"./csv":21,"./promise":27,events:47,inherits:84,"lodash/core":88,xml2js:123}],24:[function(t,e,n){"use strict";var r=e.exports=function(t){"string"==typeof t&&(t=i[t]),t||(t=i.INFO),this._logLevel=t},i=r.LogLevels={DEBUG:1,INFO:2,WARN:3,ERROR:4,FATAL:5};for(var o in r.prototype.log=function(t,e){this._logLevel<=t&&(t<i.ERROR?console.log(e):console.error(e))},i)r.prototype[o.toLowerCase()]=s(i[o]);function s(e){return function(t){this.log(e,t)}}},{}],25:[function(t,e,n){var r=t("querystring"),i=t("lodash/core"),o=t("./transport"),s="https://login.salesforce.com",a=e.exports=function(t){t.authzServiceUrl&&t.tokenServiceUrl?(this.loginUrl=t.authzServiceUrl.split("/").slice(0,3).join("/"),this.authzServiceUrl=t.authzServiceUrl,this.tokenServiceUrl=t.tokenServiceUrl,this.revokeServiceUrl=t.revokeServiceUrl):(this.loginUrl=t.loginUrl||s,this.authzServiceUrl=this.loginUrl+"/services/oauth2/authorize",this.tokenServiceUrl=this.loginUrl+"/services/oauth2/token",this.revokeServiceUrl=this.loginUrl+"/services/oauth2/revoke"),this.clientId=t.clientId,this.clientSecret=t.clientSecret,this.redirectUri=t.redirectUri,t.proxyUrl?this._transport=new o.ProxyTransport(t.proxyUrl):t.httpProxy?this._transport=new o.HttpProxyTransport(t.httpProxy):this._transport=new o};i.extend(a.prototype,{getAuthorizationUrl:function(t){return t=i.extend({response_type:"code",client_id:this.clientId,redirect_uri:this.redirectUri},t||{}),this.authzServiceUrl+(0<=this.authzServiceUrl.indexOf("?")?"&":"?")+r.stringify(t)},refreshToken:function(t,e){var n={grant_type:"refresh_token",refresh_token:t,client_id:this.clientId};return this.clientSecret&&(n.client_secret=this.clientSecret),this._postParams(n,e)},requestToken:function(t,e,n){return"function"==typeof e&&(n=e,e={}),e=i.extend({grant_type:"authorization_code",code:t,client_id:this.clientId,redirect_uri:this.redirectUri},e||{}),this.clientSecret&&(e.client_secret=this.clientSecret),this._postParams(e,n)},authenticate:function(t,e,n){return this._postParams({grant_type:"password",username:t,password:e,client_id:this.clientId,client_secret:this.clientSecret,redirect_uri:this.redirectUri},n)},revokeToken:function(t,e){return this._transport.httpRequest({method:"POST",url:this.revokeServiceUrl,body:r.stringify({token:t}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){if(400<=t.statusCode){var e=r.parse(t.body);e&&e.error||(e={error:"ERROR_HTTP_"+t.statusCode,error_description:t.body});var n=new Error(e.error_description);throw n.name=e.error,n}}).thenCall(e)},_postParams:function(t,e){return this._transport.httpRequest({method:"POST",url:this.tokenServiceUrl,body:r.stringify(t),headers:{"content-type":"application/x-www-form-urlencoded"}}).then(function(t){var e;try{e=JSON.parse(t.body)}catch(t){}if(400<=t.statusCode){e=e||{error:"ERROR_HTTP_"+t.statusCode,error_description:t.body};var n=new Error(e.error_description);throw n.name=e.error,n}return e}).thenCall(e)}})},{"./transport":36,"lodash/core":88,querystring:96}],26:[function(t,e,n){var s=t("lodash/core"),r=(t("./promise"),t("./connection"),e.exports=function(t){this.rule=new r(t),this.approval=new i(t)},function(t){this._conn=t});r.prototype.list=function(t){return this._conn.request("/process/rules").then(function(t){return t.rules}).thenCall(t)},r.prototype.trigger=function(t,e){return t=s.isArray(t)?t:[t],this._conn.request({method:"POST",url:"/process/rules/",body:JSON.stringify({contextIds:t}),headers:{"content-type":"application/json"}}).thenCall(e)};var i=function(t){this._conn=t};i.prototype.list=function(t){return this._conn.request("/process/approvals").then(function(t){return t.approvals}).thenCall(t)},i.prototype.request=function(t,e){return t=t.map(function(t){return t._request?t._request:t}),this._conn.request({method:"POST",url:"/process/approvals",headers:{"content-type":"application/json"},body:JSON.stringify({requests:t})}).thenCall(e)},i.prototype._createRequest=function(t,e,n,r,i){"function"==typeof n&&(i=n,n=r=null),"function"==typeof r&&(i=r,r=null),r=r||{};var o={actionType:t,contextId:e,comments:n};return s.extend(o,r),new a(this,o).thenCall(i)},i.prototype.submit=function(t,e,n,r){return this._createRequest("Submit",t,e,n,r)},i.prototype.approve=function(t,e,n,r){return this._createRequest("Approve",t,e,n,r)},i.prototype.reject=function(t,e,n,r){return this._createRequest("Reject",t,e,n,r)};var a=function(t,e){this._process=t,this._request=e};a.prototype.then=function(t,e){this._promise||(this._promise=this._process.request([this]).then(function(t){return t[0]})),this._promise.then(t,e)},a.prototype.thenCall=function(e){return e?this.then(function(t){e(null,t)},function(t){e(t)}):this}},{"./connection":19,"./promise":27,"lodash/core":88}],27:[function(i,o,t){(function(n){var t=i("lodash/core"),e=i("promise/lib/es6-extensions");e.prototype.thenCall=function(e){return t.isFunction(e)&&this.then(function(t){n.nextTick(function(){e(null,t)})},function(t){n.nextTick(function(){e(t)})}),this},e.prototype.fail=e.prototype.catch,e.defer=function(){return new r};var r=function(){var n=this;this.promise=new e(function(t,e){n.resolve=t,n.reject=e})};o.exports=e}).call(this,i("_process"))},{_process:91,"lodash/core":88,"promise/lib/es6-extensions":93}],28:[function(s,a,t){(function(n){var t=s("inherits"),e=(s("events"),s("readable-stream")),c=s("lodash/core"),l=s("./promise"),r=(s("./date"),s("./soql-builder")),i=s("./record-stream"),o=a.exports=function(t,e,n){o.super_.call(this,{objectMode:!0}),this._conn=t,c.isString(e)?this._soql=e:e.locator&&0<=e.locator.indexOf("/")?this._locator=e.locator.split("/").pop():(this._config=e,this.select(e.fields),e.includes&&this.include(e.includes),e.sort&&this.sort(e.sort)),this._options=c.defaults(n||{},{maxFetch:1e4,autoFetch:!1,scanAll:!1,responseTarget:h.QueryResult}),this._executed=!1,this._finished=!1,this._chaining=!1,this._deferred=l.defer()};t(o,e.Readable),o.prototype.select=function(t){if(this._soql)throw Error("Cannot set select fields for the query which has already built SOQL.");if(t=t||"*",c.isString(t))t=t.split(/\s*,\s*/);else if(c.isObject(t)&&!c.isArray(t)){var e=[];for(var n in t)t[n]&&e.push(n);t=e}return this._config.fields=t,this},o.prototype.where=function(t){if(this._soql)throw Error("Cannot set where conditions for the query which has already built SOQL.");return this._config.conditions=t,this},o.prototype.limit=function(t){if(this._soql)throw Error("Cannot set limit for the query which has already built SOQL.");return this._config.limit=t,this},o.prototype.skip=o.prototype.offset=function(t){if(this._soql)throw Error("Cannot set skip/offset for the query which has already built SOQL.");return this._config.offset=t,this},o.prototype.sort=o.prototype.orderby=function(t,e){if(this._soql)throw Error("Cannot set sort for the query which has already built SOQL.");return c.isString(t)&&c.isString(e)&&(t=[[t,e]]),this._config.sort=t,this},o.prototype.include=function(t,e,n,r){if(this._soql)throw Error("Cannot include child relationship into the query which has already built SOQL.");if(!c.isObject(t)){var i={table:t,conditions:e,fields:n,limit:r&&r.limit,offset:r&&(r.offset||r.skip),sort:r&&r.sort};c.isArray(this._config.includes)||(this._config.includes=[]),this._config.includes.push(i);var o=new f(this._conn,this,i);return this._children=this._children||[],this._children.push(o),o}var s=t;for(var a in s){var u=s[a];this.include(a,u.conditions,u.fields,u)}},o.prototype.maxFetch=function(t){return this._options.maxFetch=t,this},o.prototype.autoFetch=function(t){return this._options.autoFetch=t,this},o.prototype.scanAll=function(t){return this._options.scanAll=t,this};var h=o.ResponseTargets={};["QueryResult","Records","SingleRecord","Count"].forEach(function(t){h[t]=t}),o.prototype.setResponseTarget=function(t){return t in h&&(this._options.responseTarget=t),this},o.prototype.run=o.prototype.exec=o.prototype.execute=function(n,r){var i=this,o=this._conn._logger,s=this._deferred;if(this._executed)return s.reject(new Error("re-executing already executed query")),this;if(this._finished)return s.reject(new Error("executing already closed query")),this;"function"==typeof n&&(r=n,n={}),n={headers:(n=n||{}).headers||i._options.headers,responseTarget:n.responseTarget||i._options.responseTarget,autoFetch:n.autoFetch||i._options.autoFetch,maxFetch:n.maxFetch||i._options.maxFetch,scanAll:n.scanAll||i._options.scanAll};var e=function(e,t){if(c.isFunction(r))try{t=r(e,t),e=null}catch(t){e=t}e?s.reject(e):s.resolve(t)};return this.once("response",function(t){e(null,t)}),this.once("error",function(t){e(t)}),this.once("fetch",function(){if(n.responseTarget===h.Records&&(i._chaining||r)){o.debug("--- collecting all fetched records ---");var e=[],t=function(t){e.push(t)};i.on("record",t),i.once("end",function(){i.removeListener("record",t),i.emit("response",e,i)})}}),this._executed=!0,o.debug(">>> Query start >>>"),this._execute(n).then(function(){o.debug("*** Query finished ***")}).fail(function(t){o.debug("--- Query error ---"),i.emit("error",t)}),this},o.prototype._execute=function(o){var s=this,e=this._conn._logger,a=o.responseTarget,u=o.autoFetch,c=o.maxFetch,n=o.scanAll;return l.resolve(s._locator?s._conn._baseUrl()+"/query/"+s._locator:s.toSOQL().then(function(t){return s.totalFetched=0,e.debug("SOQL = "+t),s._conn._baseUrl()+"/"+(n?"queryAll":"query")+"?q="+encodeURIComponent(t)})).then(function(t){return s._conn.request({method:"GET",url:t,headers:o.headers})}).then(function(t){var e;switch(s.emit("fetch"),s.totalSize=t.totalSize,a){case h.SingleRecord:e=t.records&&0<t.records.length?t.records[0]:null;break;case h.Records:e=t.records;break;case h.Count:e=t.totalSize;break;default:e=t}a!==h.Records&&s.emit("response",e,s);for(var n=t.records&&t.records.length||0,r=0;r<n;r++){if(s.totalFetched>=c){s._finished=!0;break}var i=t.records[r];s.push(i),s.emit("record",i,s.totalFetched++,s)}return t.nextRecordsUrl&&(s._locator=t.nextRecordsUrl.split("/").pop()),s._finished=s._finished||t.done||!u,s._finished?s.push(null):s._execute(o),e})},o.prototype._read=function(t){this._finished||this._executed||this.execute({autoFetch:!0})},o.prototype.on=function(t,e){if("record"===t){var n=this;this.on("readable",function(){for(;null!==n.read(););})}return o.super_.prototype.on.call(this,t,e)},o.prototype.addListener=o.prototype.on,o.prototype._expandFields=function(){if(this._soql)return l.reject(new Error("Cannot expand fields for the query which has already built SOQL."));var r,t,n=this,a=n._conn._logger,e=this._conn,i=this._config.table,o=this._config.fields||[];return a.debug("_expandFields: table = "+i+", fields = "+o.join(", ")),l.all([l.resolve(n._parent?(r=i,t=n._parent._config.table,a.debug('finding table for relation "'+r+'" in "'+t+'"...'),u(t).then(function(t){var e=r.toUpperCase(),n=c.find(t.childRelationships,function(t){return(t.relationshipName||"").toUpperCase()===e});return n?n.childSObject:l.reject(new Error("No child relationship found: "+r))})):i).then(function(e){return l.all(c.map(o,function(t){return function i(o,t){a.debug('expanding field "'+t+'" in "'+o+'"...');var s=t.split(".");return"*"===s[s.length-1]?u(o).then(function(t){if(a.debug("table "+o+"has been described"),1<s.length){var e=s.shift(),n=c.find(t.fields,function(t){return t.relationshipName&&t.relationshipName.toUpperCase()===e.toUpperCase()});if(n){var r=1===n.referenceTo.length?n.referenceTo[0]:"Name";return i(r,s.join(".")).then(function(t){return c.map(t,function(t){return e+"."+t})})}return[]}return c.map(t.fields,function(t){return t.name})}):l.resolve([t])}(e,t)})).then(function(t){n._config.fields=c.flatten(t)})}),l.all(c.map(n._children||[],function(t){return t._expandFields()}))]);function u(t){a.debug("describe cache: "+t);var n=l.defer();return e.describe$(t,function(t,e){a.debug("... done."),t?n.reject(t):n.resolve(e)}),n.promise}},o.prototype.explain=function(t){var n=this,r=this._conn._logger;return n.toSOQL().then(function(t){r.debug("SOQL = "+t);var e="/query/?explain="+encodeURIComponent(t);return n._conn.request(e)}).thenCall(t)},o.prototype.toSOQL=function(t){var e=this;return l.resolve(e._soql||e._expandFields().then(function(){return r.createSOQL(e._config)})).thenCall(t)},o.prototype.stream=i.Serializable.prototype.stream,o.prototype.map=i.prototype.map,o.prototype.filter=i.prototype.map;o.prototype.delete=o.prototype.del=o.prototype.destroy=function(s,t,e){if("function"==typeof s?(e=s,t={},s=null):"object"==typeof s&&null!==s&&(e=t,t=s,s=null),t=t||{},!(s=s||this._config&&this._config.table))throw new Error("SOQL based query needs SObject type information to bulk delete.");var a=!1===t.allowBulk?-1:"number"==typeof t.bulkThreshold?t.bulkThreshold:this._conn._ensureVersion(42)?200:this._conn.maxRequest/2,u=this;return new l(function(n,r){var i=[],o=null;u.on("data",function(t){if(t.Id){var e={Id:t.Id};o?o.write(e):(i.push(e),(a<0||i.length>a)&&(o=u._conn.sobject(s).deleteBulk().on("response",n).on("error",r),i.forEach(function(t){o.write(t)}),i=[]))}else u.emit("error",new Error("Queried record does not include Salesforce record ID."))}).on("end",function(){if(o)o.end();else{var t=i.map(function(t){return t.Id});u._conn.sobject(s).destroy(t,{allowRecursive:!0}).then(n,r)}}).on("error",r)}).thenCall(e)},o.prototype.update=function(t,o,e,n){if("function"==typeof o?(n=o,e={},o=null):"object"==typeof o&&null!==o&&(n=e,e=o,o=null),e=e||{},!(o=o||this._config&&this._config.table))throw new Error("SOQL based query needs SObject type information to bulk update.");var s=c.isFunction(t)?i.map(t):i.recordMapStream(t),a=!1===e.allowBulk?-1:"number"==typeof e.bulkThreshold?e.bulkThreshold:this._conn._ensureVersion(42)?200:this._conn.maxRequest/2,u=this;return new l(function(e,n){var r=[],i=null;u.on("error",n).pipe(s).on("data",function(t){i?i.write(t):(r.push(t),(a<0||r.length>a)&&(i=u._conn.sobject(o).updateBulk().on("response",e).on("error",n),r.forEach(function(t){i.write(t)}),r=[]))}).on("end",function(){i?i.end():u._conn.sobject(o).update(r,{allowRecursive:!0}).then(e,n)}).on("error",n)}).thenCall(n)},o.prototype.then=function(t,e){return this._chaining=!0,this._finished||this._executed||this.execute(),this._deferred.promise.then.apply(this._deferred.promise,arguments)},o.prototype.thenCall=function(e){return c.isFunction(e)&&this.then(function(t){n.nextTick(function(){e(null,t)})},function(t){n.nextTick(function(){e(t)})}),this};var f=function(t,e,n){f.super_.call(this,t,n),this._parent=e};t(f,o),f.prototype.include=function(){throw new Error("Not allowed to include another subquery in subquery.")},f.prototype.end=function(){return this._parent},f.prototype.run=f.prototype.exec=f.prototype.execute=function(){return this._parent.execute.apply(this._parent,arguments)}}).call(this,s("_process"))},{"./date":22,"./promise":27,"./record-stream":30,"./soql-builder":35,_process:91,events:47,inherits:84,"lodash/core":88,"readable-stream":107}],29:[function(t,e,n){var r=e.exports=function(t,e){this._conn=t,this._path=e};r.prototype.describe=function(t){var e=this._path+"/describe";return this._conn.request(e).thenCall(t)},r.prototype.defaultValues=function(t,e){"function"==typeof t&&(e=t,t=null);var n=this._path+"/defaultValues";return t&&(n+="/"+t),this._conn.request(n).thenCall(e)},r.prototype.execute=function(t,e,n){var r={contextId:t,record:e};return this._conn.requestPost(this._path,r).thenCall(n)}},{}],30:[function(t,e,n){t("events");var r=t("readable-stream"),i=(r.Duplex,r.Transform),o=r.PassThrough,s=t("inherits"),a=t("lodash/core"),u=t("./csv"),c=e.exports=function(){c.super_.call(this,{objectMode:!0})};s(c,i),c.prototype._transform=function(t,e,n){this.emit("record",t),this.push(t),n()},c.prototype.map=function(t){return this.pipe(c.map(t))},c.prototype.filter=function(t){return this.pipe(c.filter(t))};var l=c.Serializable=function(){l.super_.call(this),this._dataStream=null};s(l,c),l.prototype.stream=function(t,e){var n=p[t=t||"csv"];if(!n)throw new Error("Converting ["+t+"] data stream is not supported.");return this._dataStream||(this._dataStream=new o,this.pipe(n.serialize(e)).pipe(this._dataStream)),this._dataStream};var h=c.Parsable=function(){h.super_.call(this),this._dataStream=null};s(h,c),h.prototype.stream=function(t,e){var n=p[t=t||"csv"];if(!n)throw new Error("Converting ["+t+"] data stream is not supported.");return this._dataStream||(this._dataStream=new o,this._parserStream=n.parse(e).on("error",function(t){this.emit("error",t)}),this._parserStream.pipe(this).pipe(new o({objectMode:!0,highWaterMark:5e5}))),this._dataStream},h.prototype.on=function(t,e){return"readable"!==t&&"record"!==t||this._dataStream.pipe(this._parserStream),h.super_.prototype.on.call(this,t,e)},h.prototype.addListener=h.prototype.on,c.map=function(i){var t=new c.Serializable;return t._transform=function(t,e,n){var r=i(t)||t;this.push(r),n()},t},c.recordMapStream=function(r,i){return c.map(function(t){var e={Id:t.Id};for(var n in r)e[n]=i?r[n]:o(r[n],t);return e});function o(t,r){if(a.isString(t)){var e=/^\$\{(\w+)\}$/.exec(t);return e?r[e[1]]:t.replace(/\$\{(\w+)\}/g,function(t,e){var n=r[e];return a.isNull(n)||a.isUndefined(n)?"":String(n)})}return t}},c.filter=function(r){var t=new c.Serializable;return t._transform=function(t,e,n){r(t)&&this.push(t),n()},t};var f={serialize:function(e){return e=e||{},n=c.map(function(t){return function o(t,s){return Object.keys(t).reduce(function(t,n){var e=t[n],r={};if("attributes"===n)delete(t=a.extend({},t))[n];else if(s.nullValue&&null===e)r[n]=s.nullValue,t=a.extend({},t,r);else if(null!==e&&"object"==typeof e){var i=o(e,s);t=Object.keys(i).reduce(function(t,e){return t[n+"."+e]=i[e],t},a.extend({},t))}return t},t)}(t,e)}),r=u.serializeCSVStream(e),(i=new o).on("pipe",function(t){t.unpipe(i),t.pipe(n).pipe(r)}),i.pipe=function(t,e){return r.pipe(t,e)},i;var n,r,i},parse:function(t){return u.parseCSVStream(t)}},p=c.DataStreamConverters={csv:f}},{"./csv":21,events:47,inherits:84,"lodash/core":88,"readable-stream":107}],31:[function(t,e,n){var r=t("lodash/core"),i=e.exports=function(t,e,n){this._conn=t,this.type=e,this.id=n};i.prototype.retrieve=function(t,e){return"function"==typeof t&&(e=t,t={}),this._conn.retrieve(this.type,this.id,t,e)},i.prototype.update=function(t,e,n){return"function"==typeof e&&(n=e,e={}),(t=r.clone(t)).Id=this.id,this._conn.update(this.type,t,e,n)},i.prototype.delete=i.prototype.del=i.prototype.destroy=function(t,e){return"function"==typeof t&&(e=t,t={}),this._conn.destroy(this.type,this.id,t,e)},i.prototype.blob=function(t){var e=[this._conn._baseUrl(),"sobjects",this.type,this.id,t].join("/");return this._conn.request(e).stream()}},{"lodash/core":88}],32:[function(t,e,n){"use strict";var r=t("./_required");e.exports=function(t){"./jsforce"!==t&&"jsforce"!==t||(t="./core");var e=r[t];if(void 0===e)throw new Error("Cannot find module '"+t+"'");return e}},{"./_required":3}],33:[function(t,e,n){var r=t("inherits"),s=t("lodash/core"),i=(t("xml2js"),t("./http-api")),o=e.exports=function(t,e){o.super_.apply(this,arguments),this._endpointUrl=e.endpointUrl,this._xmlns=e.xmlns||"urn:partner.soap.sforce.com"};function a(t,e){var n=e.shift();if(n){for(var r in t)if(n.test(r))return a(t[r],e);return null}return t}function u(e,t){if(s.isObject(e)&&(t=e,e=null),s.isArray(t))return s.map(t,function(t){return u(e,t)}).join("");var n=[],r=[];if(s.isObject(t)){for(var i in t){var o=t[i];"@"===i[0]?(i=i.substring(1),n.push(i+'="'+o+'"')):r.push(u(i,o))}t=r.join("")}else t=String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;");return(e?"<"+e+(0<n.length?" "+n.join(" "):"")+">":"")+t+(e?"</"+e+">":"")}r(o,i),o.prototype.invoke=function(t,e,n,r){"function"==typeof n&&(r=n,n=null);var i={};return i[t]=e,this.request({method:"POST",url:this._endpointUrl,headers:{"Content-Type":"text/xml",SOAPAction:'""'},message:i}).then(function(t){return n?function e(t,n){{if(s.isArray(t))return t.map(function(t){return e(t,n&&n[0])});if(s.isObject(t)){if(t.$&&"true"===t.$["xsi:nil"])return null;if(s.isArray(n))return[e(t,n[0])];var r={};for(var i in t)r[i]=e(t[i],n&&n[i]);return r}if(s.isArray(n))return[e(t,n[0])];if(s.isObject(n))return{};switch(n){case"string":return String(t);case"number":return Number(t);case"boolean":return"true"===t;default:return t}}}(t,n):t}).thenCall(r)},o.prototype.beforeSend=function(t){t.body=this._createEnvelope(t.message)},o.prototype.isSessionExpired=function(t){return 500===t.statusCode&&/<faultcode>[a-zA-Z]+:INVALID_SESSION_ID<\/faultcode>/.test(t.body)},o.prototype.parseError=function(t){var e=a(t,[/:Envelope$/,/:Body$/,/:Fault$/]);return{errorCode:e.faultcode,message:e.faultstring}},o.prototype.getResponseBody=function(t){return a(o.super_.prototype.getResponseBody.call(this,t),[/:Envelope$/,/:Body$/,/.+/])},o.prototype._createEnvelope=function(t){var e={},n=this._conn;return n.accessToken&&(e.SessionHeader={sessionId:this._conn.accessToken}),n.callOptions&&(e.CallOptions=n.callOptions),['<?xml version="1.0" encoding="UTF-8"?>','<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"',' xmlns:xsd="http://www.w3.org/2001/XMLSchema"',' xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">','<soapenv:Header xmlns="'+this._xmlns+'">',u(e),"</soapenv:Header>",'<soapenv:Body xmlns="'+this._xmlns+'">',u(t),"</soapenv:Body>","</soapenv:Envelope>"].join("")}},{"./http-api":23,inherits:84,"lodash/core":88,xml2js:123}],34:[function(t,e,n){var o=t("lodash/core"),r=t("./record"),s=t("./query"),i=(t("./cache"),t("./quick-action")),a=e.exports=function(t,e){this._conn=t,this.type=e;var n={key:"describe."+this.type};this.describe$=t.cache.makeCacheable(this.describe,this,n),this.describe=t.cache.makeResponseCacheable(this.describe,this,n),n={key:"layouts."+this.type},this.layouts$=t.cache.makeCacheable(this.layouts,this,n),this.layouts=t.cache.makeResponseCacheable(this.layouts,this,n),n={key:"compactLayouts."+this.type},this.compactLayouts$=t.cache.makeCacheable(this.compactLayouts,this,n),this.compactLayouts=t.cache.makeResponseCacheable(this.compactLayouts,this,n),n={key:"approvalLayouts."+this.type},this.approvalLayouts$=t.cache.makeCacheable(this.approvalLayouts,this,n),this.approvalLayouts=t.cache.makeResponseCacheable(this.approvalLayouts,this,n)};a.prototype.insert=a.prototype.create=function(t,e,n){return"function"==typeof e&&(n=e,e={}),this._conn.create(this.type,t,e,n)},a.prototype.retrieve=function(t,e,n){return"function"==typeof e&&(n=e,e={}),this._conn.retrieve(this.type,t,e,n)},a.prototype.update=function(t,e,n){return"function"==typeof e&&(n=e,e={}),this._conn.update(this.type,t,e,n)},a.prototype.upsert=function(t,e,n,r){return"function"==typeof n&&(r=n,n={}),this._conn.upsert(this.type,t,e,n,r)},a.prototype.delete=a.prototype.del=a.prototype.destroy=function(t,e,n){return"function"==typeof e&&(n=e,e={}),this._conn.destroy(this.type,t,e,n)},a.prototype.describe=function(t){return this._conn.describe(this.type,t)},a.prototype.record=function(t){return new r(this._conn,this.type,t)},a.prototype.find=function(t,e,n,r){"function"==typeof t?(r=t,t={},n=e=null):"function"==typeof e?(r=e,n=e=null):"function"==typeof n&&(r=n,n=null);var i={fields:e,includes:(n=n||{}).includes,table:this.type,conditions:t,limit:n.limit,sort:n.sort,offset:n.offset||n.skip},o=new s(this._conn,i,n);return o.setResponseTarget(s.ResponseTargets.Records),r&&o.run(r),o},a.prototype.findOne=function(t,e,n,r){"function"==typeof t?(r=t,t={},n=e=null):"function"==typeof e?(r=e,n=e=null):"function"==typeof n&&(r=n,n=null),n=o.extend(n||{},{limit:1});var i=this.find(t,e,n);return i.setResponseTarget(s.ResponseTargets.SingleRecord),r&&i.run(r),i},a.prototype.select=function(t,e){return this.find(null,t,null,e)},a.prototype.count=function(t,e){"function"==typeof t&&(e=t,t={});var n=this.find(t,{"count()":!0});return n.setResponseTarget("Count"),e&&n.run(e),n},a.prototype.bulkload=function(t,e,n,r){return this._conn.bulk.load(this.type,t,e,n,r)},a.prototype.insertBulk=a.prototype.createBulk=function(t,e){return this.bulkload("insert",t,e)},a.prototype.updateBulk=function(t,e){return this.bulkload("update",t,e)},a.prototype.upsertBulk=function(t,e,n){return this.bulkload("upsert",{extIdField:e},t,n)},a.prototype.deleteBulk=a.prototype.destroyBulk=function(t,e){return this.bulkload("delete",t,e)},a.prototype.deleteHardBulk=a.prototype.destroyHardBulk=function(t,e){return this.bulkload("hardDelete",t,e)},a.prototype.recent=function(t){return this._conn.recent(this.type,t)},a.prototype.updated=function(t,e,n){return this._conn.updated(this.type,t,e,n)},a.prototype.deleted=function(t,e,n){return this._conn.deleted(this.type,t,e,n)},a.prototype.layouts=function(t,e){"function"==typeof t&&(e=t,t=null);var n="/sobjects/"+this.type+"/describe/"+(t?"namedLayouts/"+t:"layouts");return this._conn.request(n,e)},a.prototype.compactLayouts=function(t){var e="/sobjects/"+this.type+"/describe/compactLayouts";return this._conn.request(e,t)},a.prototype.approvalLayouts=function(t){var e="/sobjects/"+this.type+"/describe/approvalLayouts";return this._conn.request(e,t)},a.prototype.listviews=function(t){var e=this._conn._baseUrl()+"/sobjects/"+this.type+"/listviews";return this._conn.request(e,t)},a.prototype.listview=function(t){return new u(this._conn,this.type,t)},a.prototype.quickActions=function(t){return this._conn.request("/sobjects/"+this.type+"/quickActions").thenCall(t)},a.prototype.quickAction=function(t){return new i(this._conn,"/sobjects/"+this.type+"/quickActions/"+t)};var u=function(t,e,n){this._conn=t,this.type=e,this.id=n};u.prototype.results=function(t){var e=this._conn._baseUrl()+"/sobjects/"+this.type+"/listviews/"+this.id+"/results";return this._conn.request(e,t)},u.prototype.describe=function(t,e){"function"==typeof t&&(e=t,t={}),t=t||{};var n=this._conn._baseUrl()+"/sobjects/"+this.type+"/listviews/"+this.id+"/describe";return this._conn.request({method:"GET",url:n,headers:t.headers},e)},u.prototype.explain=function(t){var e="/query/?explain="+this.id;return this._conn.request(e,t)}},{"./cache":18,"./query":28,"./quick-action":29,"./record":31,"lodash/core":88}],35:[function(t,e,n){var a=t("lodash/core"),r=t("./date");function s(t){var e,n,r=["SELECT ",(e=t.fields,n=t.includes,n=a.map(a.values(n||{}),function(t){return"("+s(t)+")"}),(e||["Id"]).concat(n).join(", "))," FROM ",t.table].join(""),i=function r(i,o,s){if(a.isString(i))return i;i=i||[];o=o||"AND";s=s||0;i=h(i)?i.map(function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return 1<e.length?e:e[0]}):a.keys(i).map(function(t){return{key:t,value:i[t]}});i=i.map(function(t){var e,n=s+1;switch(t.key){case"$or":case"$and":case"$not":return"NOT"!==o&&1===i.length&&(n=s),e="$or"===t.key?"OR":"$and"===t.key?"AND":"NOT",r(t.value,e,n);default:return c(t.key,t.value)}}).filter(function(t){return t});var t;return"NOT"===o?((t=0<s)?"(":"")+"NOT "+i[0]+(t?")":""):((t=0<s&&1<i.length)?"(":"")+i.join(" "+o+" ")+(t?")":"")}(t.conditions);i&&(r+=" WHERE "+i);var o=function(n){if(n=n||[],a.isString(n)){if(/,|\s+(asc|desc)\s*$/.test(n))return n;n=n.split(/\s+/).map(function(t){var e="ASC",n=t[0];return"-"===n?(e="DESC",t=t.substring(1)):"+"===n&&(t=t.substring(1)),[t,e]})}else h(n)||(n=a.keys(n).map(function(t){var e=n[t];return[t,e]}));return n.map(function(t){var e=t[0],n=t[1];switch(String(n)){case"DESC":case"desc":case"descending":case"-":case"-1":n="DESC";break;default:n="ASC"}return e+" "+n}).join(", ")}(t.sort);return o&&(r+=" ORDER BY "+o),t.limit&&(r+=" LIMIT "+t.limit),t.offset&&(r+=" OFFSET "+t.offset),r}var u={"=":"=",$eq:"=","!=":"!=",$ne:"!=",">":">",$gt:">","<":"<",$lt:"<",">=":">=",$gte:">=","<=":"<=",$lte:"<=",$like:"LIKE",$nlike:"NOT LIKE",$in:"IN",$nin:"NOT IN",$includes:"INCLUDES",$excludes:"EXCLUDES",$exists:"EXISTS"};function c(t,e){var n="$eq";if(a.isArray(e))n="$in";else if(a.isObject(e)){for(var r in e)if("$"===r[0]){e=e[n=r];break}}var i=u[n];if(!i||a.isUndefined(e))return null;var o=l(e);if(a.isUndefined(o))return null;switch(i){case"NOT LIKE":return"("+["NOT",t,"LIKE",o].join(" ")+")";case"EXISTS":return[t,e?"!=":"=","null"].join(" ");default:return[t,i,o].join(" ")}}function l(t){return h(t)?0<t.length?"("+t.map(l).join(", ")+")":void 0:t instanceof r?t.toString():a.isString(t)?"'"+String(t||"").replace(/'/g,"\\'")+"'":a.isNumber(t)?t.toString():a.isNull(t)?"null":t}function h(t){return a.isObject(t)&&a.isFunction(t.pop)}n.createSOQL=s},{"./date":22,"lodash/core":88}],36:[function(d,y,t){(function(t){var o,e=d("inherits"),s=d("./promise"),n=d("request"),r=d("./browser/canvas"),i=d("./browser/jsonp");if(n.defaults){var a={followAllRedirects:!0};t.env.HTTP_PROXY&&(a.proxy=t.env.HTTP_PROXY),parseInt(t.env.HTTP_TIMEOUT)&&(a.timeout=parseInt(t.env.HTTP_TIMEOUT)),n=n.defaults(a)}if("undefined"==typeof window)o=t.env.LOCATION_BASE_URL||"";else{var u=function(t){var e=/(\w+)\.(visual\.force|salesforce)\.com$/.exec(t);e&&(t=e[1]+".salesforce.com");return t}(window.location.host);o=u?"https://"+u:""}var c=y.exports=function(){};c.prototype.httpRequest=function(t,e){var n,r=s.defer(),i=this._getHttpRequestModule();return function t(e,n){var r=e.then;return e.then=function(){return n(),t(r.apply(e,arguments),n)},e.stream=n,e}(r.promise,function(){return n||(n=i(t,function(t,e){t?r.reject(t):r.resolve(e)})),n}).thenCall(e)},c.prototype._getHttpRequestModule=function(){return n};var l=c.JsonpTransport=function(t){this._jsonpParam=t};e(l,c),l.prototype._getHttpRequestModule=function(){return i.createRequest(this._jsonpParam)},l.supported=i.supported;var h=c.CanvasTransport=function(t){this._signedRequest=t};e(h,c),h.prototype._getHttpRequestModule=function(){return r.createRequest(this._signedRequest)},h.supported=r.supported;var f=c.ProxyTransport=function(t){this._proxyUrl=t};e(f,c),f.prototype.httpRequest=function(t,e){var n=t.url;0===n.indexOf("/")&&(n=o+n);var r={method:t.method,url:this._proxyUrl+"?"+Date.now()+"."+(""+Math.random()).substring(2),headers:{"salesforceproxy-endpoint":n}};if((t.body||""===t.body)&&(r.body=t.body),t.headers)for(var i in t.headers)r.headers[i]=t.headers[i];return f.super_.prototype.httpRequest.call(this,r,e)};var p=c.HttpProxyTransport=function(t){this._httpProxy=t};e(p,c),p.prototype.httpRequest=function(t,e){var n=t.url;0===n.indexOf("/")&&(n=o+n);var r={method:t.method,url:t.url,proxy:this._httpProxy,headers:{}};if((t.body||""===t.body)&&(r.body=t.body),t.headers)for(var i in t.headers)r.headers[i]=t.headers[i];return p.super_.prototype.httpRequest.call(this,r,e)}}).call(this,d("_process"))},{"./browser/canvas":14,"./browser/jsonp":16,"./promise":27,_process:91,inherits:84,request:17}],37:[function(t,e,n){"use strict";var r=t("./raw"),i=[],o=[],s=r.makeRequestCallFromTimer(function(){if(o.length)throw o.shift()});function a(t){var e;(e=i.length?i.pop():new u).task=t,r(e)}function u(){this.task=null}e.exports=a,u.prototype.call=function(){try{this.task.call()}catch(t){a.onerror?a.onerror(t):(o.push(t),s())}finally{this.task=null,i[i.length]=this}}},{"./raw":38}],38:[function(t,f,e){(function(t){"use strict";function e(t){r.length||(n(),!0),r[r.length]=t}f.exports=e;var n,r=[],i=0;function o(){for(;i<r.length;){var t=i;if(i+=1,r[t].call(),1024<i){for(var e=0,n=r.length-i;e<n;e++)r[e]=r[e+i];r.length-=i,i=0}}r.length=0,i=0,!1}var s,a,u,c=void 0!==t?t:self,l=c.MutationObserver||c.WebKitMutationObserver;function h(r){return function(){var t=setTimeout(n,0),e=setInterval(n,50);function n(){clearTimeout(t),clearInterval(e),r()}}}n="function"==typeof l?(s=1,a=new l(o),u=document.createTextNode(""),a.observe(u,{characterData:!0}),function(){s=-s,u.data=s}):h(o),e.requestFlush=n,e.makeRequestCallFromTimer=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],39:[function(t,e,n){"use strict";n.byteLength=function(t){var e=p(t),n=e[0],r=e[1];return 3*(n+r)/4-r},n.toByteArray=function(t){for(var e,n=p(t),r=n[0],i=n[1],o=new f((c=r,l=i,3*(c+l)/4-l)),s=0,a=0<i?r-4:r,u=0;u<a;u+=4)e=h[t.charCodeAt(u)]<<18|h[t.charCodeAt(u+1)]<<12|h[t.charCodeAt(u+2)]<<6|h[t.charCodeAt(u+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=255&e;var c,l;2===i&&(e=h[t.charCodeAt(u)]<<2|h[t.charCodeAt(u+1)]>>4,o[s++]=255&e);1===i&&(e=h[t.charCodeAt(u)]<<10|h[t.charCodeAt(u+1)]<<4|h[t.charCodeAt(u+2)]>>2,o[s++]=e>>8&255,o[s++]=255&e);return o},n.fromByteArray=function(t){for(var e,n=t.length,r=n%3,i=[],o=0,s=n-r;o<s;o+=16383)i.push(u(t,o,s<o+16383?s:o+16383));1===r?(e=t[n-1],i.push(a[e>>2]+a[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],i.push(a[e>>10]+a[e>>4&63]+a[e<<2&63]+"="));return i.join("")};for(var a=[],h=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=r.length;i<o;++i)a[i]=r[i],h[r.charCodeAt(i)]=i;function p(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function u(t,e,n){for(var r,i,o=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(a[(i=r)>>18&63]+a[i>>12&63]+a[i>>6&63]+a[63&i]);return o.join("")}h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63},{}],40:[function(t,e,n){},{}],41:[function(t,e,n){"use strict";var r=t("base64-js"),o=t("ieee754");n.Buffer=h,n.SlowBuffer=function(t){+t!=t&&(t=0);return h.alloc(+t)},n.INSPECT_MAX_BYTES=50;var i=2147483647;function s(t){if(i<t)throw new RangeError("Invalid typed array length");var e=new Uint8Array(t);return e.__proto__=h.prototype,e}function h(t,e,n){if("number"!=typeof t)return a(t,e,n);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(t)}function a(t,e,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return M(t)||t&&M(t.buffer)?function(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n);return r.__proto__=h.prototype,r}(t,e,n):"string"==typeof t?function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!h.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|p(t,e),r=s(n),i=r.write(t,e);i!==n&&(r=r.slice(0,i));return r}(t,e):function(t){if(h.isBuffer(t)){var e=0|f(t.length),n=s(e);return 0===n.length||t.copy(n,0,0,e),n}if(t){if(ArrayBuffer.isView(t)||"length"in t)return"number"!=typeof t.length||U(t.length)?s(0):l(t);if("Buffer"===t.type&&Array.isArray(t.data))return l(t.data)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object.")}(t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t){return u(t),s(t<0?0:0|f(t))}function l(t){for(var e=t.length<0?0:0|f(t.length),n=s(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function f(t){if(i<=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|t}function p(t,e){if(h.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||M(t))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return L(t).length;default:if(r)return j(t).length;e=(""+e).toLowerCase(),r=!0}}function d(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),U(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=h.from(e,r)),h.isBuffer(e))return 0===e.length?-1:m(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,r,i){var o,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a/=s=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var l=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(a<n+u&&(n=a-u),o=n;0<=o;o--){for(var h=!0,f=0;f<u;f++)if(c(t,o+f)!==c(e,f)){h=!1;break}if(h)return o}return-1}function g(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?i<(r=Number(r))&&(r=i):r=i;var o=e.length;o/2<r&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(U(a))return s;t[n+s]=a}return s}function v(t,e,n,r){return R(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function b(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function _(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,c=t[i],l=null,h=239<c?4:223<c?3:191<c?2:1;if(i+h<=n)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&127<(u=(31&c)<<6|63&o)&&(l=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&2047<(u=(15&c)<<12|(63&o)<<6|63&s)&&(u<55296||57343<u)&&(l=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)&&u<1114112&&(l=u)}null===l?(l=65533,h=1):65535<l&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return function(t){var e=t.length;if(e<=w)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=w));return n}(r)}n.kMaxLength=i,(h.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{get:function(){if(this instanceof h)return this.buffer}}),Object.defineProperty(h.prototype,"offset",{get:function(){if(this instanceof h)return this.byteOffset}}),"undefined"!=typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=function(t,e,n){return a(t,e,n)},h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,h.alloc=function(t,e,n){return i=e,o=n,u(r=t),r<=0?s(r):void 0!==i?"string"==typeof o?s(r).fill(i,o):s(r).fill(i):s(r);var r,i,o},h.allocUnsafe=function(t){return c(t)},h.allocUnsafeSlow=function(t){return c(t)},h.isBuffer=function(t){return null!=t&&!0===t._isBuffer},h.compare=function(t,e){if(!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);var n;if(void 0===e)for(n=e=0;n<t.length;++n)e+=t[n].length;var r=h.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(ArrayBuffer.isView(o)&&(o=h.from(o)),!h.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},h.byteLength=p,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},h.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},h.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},h.prototype.toLocaleString=h.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?_(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,e,n);case"utf8":case"utf-8":return _(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return E(this,e,n);case"base64":return b(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},h.prototype.compare=function(t,e,n,r,i){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=e)return 0;if(i<=r)return-1;if(n<=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),u=this.slice(r,i),c=t.slice(e,n),l=0;l<a;++l)if(u[l]!==c[l]){o=u[l],s=c[l];break}return o<s?-1:s<o?1:0},h.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},h.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},h.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},h.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||i<n)&&(n=i),0<t.length&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o,s,a,u,c,l,h,f,p,d=!1;;)switch(r){case"hex":return g(this,t,e,n);case"utf8":case"utf-8":return f=e,p=n,R(j(t,(h=this).length-f),h,f,p);case"ascii":return v(this,t,e,n);case"latin1":case"binary":return v(this,t,e,n);case"base64":return u=this,c=e,l=n,R(L(t),u,c,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s=e,a=n,R(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,(o=this).length-s),o,s,a);default:if(d)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),d=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var w=4096;function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function E(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function x(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||r<n)&&(n=r);for(var i="",o=e;o<n;++o)i+=O(t[o]);return i}function S(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function C(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+e)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,n,r,i,o){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<e||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function k(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function I(t,e,n,r,i){return e=+e,n>>>=0,i||k(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function D(t,e,n,r,i){return e=+e,n>>>=0,i||k(t,0,n,8),o.write(t,e,n,r,52,8),n+8}h.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return r.__proto__=h.prototype,r},h.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},h.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);for(var r=this[t+--e],i=1;0<e&&(i*=256);)r+=this[t+--e]*i;return r},h.prototype.readUInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),this[t]},h.prototype.readUInt16LE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUInt16BE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*e)),r},h.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);for(var r=e,i=1,o=this[t+--r];0<r&&(i*=256);)o+=this[t+--r]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*e)),o},h.prototype.readInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){t>>>=0,e||C(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},h.prototype.readInt16BE=function(t,e){t>>>=0,e||C(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},h.prototype.readInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readFloatLE=function(t,e){return t>>>=0,e||C(t,4,this.length),o.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return t>>>=0,e||C(t,4,this.length),o.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return t>>>=0,e||C(t,8,this.length),o.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return t>>>=0,e||C(t,8,this.length),o.read(this,t,!1,52,8)},h.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e>>>=0,n>>>=0,r)||N(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},h.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e>>>=0,n>>>=0,r)||N(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;0<=--i&&(o*=256);)this[e+i]=t/o&255;return e+n},h.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,1,255,0),this[e]=255&t,e+1},h.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},h.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);N(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},h.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);N(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;0<=--o&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},h.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},h.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeFloatLE=function(t,e,n){return I(this,t,e,!0,n)},h.prototype.writeFloatBE=function(t,e,n){return I(this,t,e,!1,n)},h.prototype.writeDoubleLE=function(t,e,n){return D(this,t,e,!0,n)},h.prototype.writeDoubleBE=function(t,e,n){return D(this,t,e,!1,n)},h.prototype.copy=function(t,e,n,r){if(!h.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i=r-n;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,n,r);else if(this===t&&n<e&&e<r)for(var o=i-1;0<=o;--o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,r),e);return i},h.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!h.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){var i=t.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(t=i)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=h.isBuffer(t)?t:new h(t,r),a=s.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var A=/[^+/0-9A-Za-z-_]/g;function O(t){return t<16?"0"+t.toString(16):t.toString(16)}function j(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if(55295<(n=t.charCodeAt(s))&&n<57344){if(!i){if(56319<n){-1<(e-=3)&&o.push(239,191,189);continue}if(s+1===r){-1<(e-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(e-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function L(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(A,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function R(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function M(t){return t instanceof ArrayBuffer||null!=t&&null!=t.constructor&&"ArrayBuffer"===t.constructor.name&&"number"==typeof t.byteLength}function U(t){return t!=t}},{"base64-js":39,ieee754:83}],42:[function(t,e,n){(function(t){function e(t){return Object.prototype.toString.call(t)}n.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===e(t)},n.isBoolean=function(t){return"boolean"==typeof t},n.isNull=function(t){return null===t},n.isNullOrUndefined=function(t){return null==t},n.isNumber=function(t){return"number"==typeof t},n.isString=function(t){return"string"==typeof t},n.isSymbol=function(t){return"symbol"==typeof t},n.isUndefined=function(t){return void 0===t},n.isRegExp=function(t){return"[object RegExp]"===e(t)},n.isObject=function(t){return"object"==typeof t&&null!==t},n.isDate=function(t){return"[object Date]"===e(t)},n.isError=function(t){return"[object Error]"===e(t)||t instanceof Error},n.isFunction=function(t){return"function"==typeof t},n.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},n.isBuffer=t.isBuffer}).call(this,{isBuffer:t("../../is-buffer/index.js")})},{"../../is-buffer/index.js":85}],43:[function(e,n,t){(function(a,u){var c,_,l,w,t;w=e("stream"),t=e("util"),_=e("string_decoder").StringDecoder,n.exports=function(){var e,n,r,t,i,o,s;if(3===arguments.length){if(t=arguments[0],o=arguments[1],"function"!=typeof(e=arguments[2]))throw Error("Invalid callback argument: "+JSON.stringify(e));if("string"!=typeof t&&!u.isBuffer(arguments[0]))return e(Error("Invalid data argument: "+JSON.stringify(t)))}else if(2===arguments.length){if("string"==typeof arguments[0]||u.isBuffer(arguments[0])?t=arguments[0]:l(arguments[0])?o=arguments[0]:i="Invalid first argument: "+JSON.stringify(arguments[0]),"function"==typeof arguments[1]?e=arguments[1]:l(arguments[1])?o?i="Invalid arguments: got options twice as first and second arguments":o=arguments[1]:i="Invalid first argument: "+JSON.stringify(arguments[1]),i){if(e)return e(Error(i));throw Error(i)}}else 1===arguments.length&&("function"==typeof arguments[0]?e=arguments[0]:o=arguments[0]);return null==o&&(o={}),s=new c(o),null!=t&&a.nextTick(function(){return s.write(t),s.end()}),e&&(n=!1,r=o.objname?{}:[],s.on("readable",function(){var t,e;for(e=[];t=s.read();)o.objname?e.push(r[t[0]]=t[1]):e.push(r.push(t));return e}),s.on("error",function(t){return n=!0,e(t)}),s.on("end",function(){if(!n)return e(null,r)})),s},c=function(t){var e,n,r,i,o,s,a,u,c,l,h,f,p,d,y,m,g,v,b;for(v in null==t&&(t={}),this.options={},t)b=t[v],this.options[v]=b;return this.options.objectMode=!0,w.Transform.call(this,this.options),null==(e=this.options).rowDelimiter&&(e.rowDelimiter=null),"string"==typeof this.options.rowDelimiter&&(this.options.rowDelimiter=[this.options.rowDelimiter]),null==(n=this.options).delimiter&&(n.delimiter=","),void 0===this.options.quote||this.options.quote||(this.options.quote=""),null==(l=this.options).quote&&(l.quote='"'),null==(h=this.options).escape&&(h.escape='"'),null==(f=this.options).columns&&(f.columns=null),null==(p=this.options).comment&&(p.comment=""),null==(d=this.options).objname&&(d.objname=!1),null==(y=this.options).trim&&(y.trim=!1),null==(m=this.options).ltrim&&(m.ltrim=!1),null==(g=this.options).rtrim&&(g.rtrim=!1),null==(r=this.options).auto_parse&&(r.auto_parse=!1),null==(i=this.options).auto_parse_date&&(i.auto_parse_date=!1),!0===this.options.auto_parse_date&&(this.options.auto_parse_date=function(t){var e;return e=Date.parse(t),isNaN(e)||(t=new Date(e)),t}),null==(o=this.options).relax&&(o.relax=!1),null==(s=this.options).relax_column_count&&(s.relax_column_count=!1),null==(a=this.options).skip_empty_lines&&(a.skip_empty_lines=!1),null==(u=this.options).max_limit_on_data_read&&(u.max_limit_on_data_read=128e3),null==(c=this.options).skip_lines_with_empty_values&&(c.skip_lines_with_empty_values=!1),this.lines=0,this.count=0,this.skipped_line_count=0,this.empty_line_count=0,this.is_int=/^(\-|\+)?([1-9]+[0-9]*)$/,this.is_float=function(t){return 0<=t-parseFloat(t)+1},this._={decoder:new _,quoting:!1,commenting:!1,field:null,nextChar:null,closingQuote:0,line:[],chunks:[],rawBuf:"",buf:"",rowDelimiterLength:this.options.rowDelimiter?Math.max.apply(Math,this.options.rowDelimiter.map(function(t){return t.length})):void 0},this},t.inherits(c,w.Transform),(n.exports.Parser=c).prototype._transform=function(t,e,n){var r;return t instanceof u&&(t=this._.decoder.write(t)),(r=this.__write(t,!1))?this.emit("error",r):n()},c.prototype._flush=function(t){var e;return(e=this.__write(this._.decoder.end(),!0))?this.emit("error",e):this._.quoting?void this.emit("error",new Error("Quoted field not terminated at line "+(this.lines+1))):0<this._.line.length&&(e=this.__push(this._.line))?t(e):t()},c.prototype.__push=function(t){var e,n,r,i,o,s,a,u,c;if(!this.options.skip_lines_with_empty_values||""!==t.join("").trim()){if(!(c=null)===this.options.columns)return this.options.columns=t,void"";if("function"==typeof this.options.columns)return n=(u=function(t,e){try{return[null,t.call(null,e)]}catch(t){return[t]}}(this.options.columns,t))[0],e=u[1],n||(this.options.columns=e,void"");if(!this._.line_length&&0<t.length&&(this._.line_length=this.options.columns?this.options.columns.length:t.length),1===t.length&&""===t[0])this.empty_line_count++;else if(t.length!==this._.line_length){if(!this.options.relax_column_count)return null!=this.options.columns?Error("Number of columns on line "+this.lines+" does not match header"):Error("Number of columns is inconsistent on line "+this.lines);this.count++,this.skipped_line_count++}else this.count++;if(null!=this.options.columns){for(a={},i=o=0,s=t.length;o<s;i=++o)r=t[i],!1!==this.options.columns[i]&&(a[this.options.columns[i]]=r);c=this.options.objname?[a[this.options.objname],a]:a}else c=t;if(!(this.count<this.options.from||this.count>this.options.to))return this.options.raw?(this.push({raw:this._.rawBuf,row:c}),this._.rawBuf=""):this.push(c),null}},c.prototype.__write=function(e,t){var n,r,i,o,s,a,u,c,l,h,f,p,d,y,m,g,v,b,_,w,T,E,x,S,C,N,k,I,D,A,O;for(m=function(t){return"function"==typeof D.is_int?D.is_int(t):D.is_int.test(t)},y=function(t){return"function"==typeof A.is_float?A.is_float(t):A.is_float.test(t)},i=function(t){return O.options.auto_parse?"function"==typeof O.options.auto_parse?O.options.auto_parse(t):(m(t)?t=parseInt(t):y(t)?t=parseFloat(t):O.options.auto_parse_date&&(t=O.options.auto_parse_date(t)),t):t},v=(O=A=D=this).options.trim||this.options.ltrim,k=this.options.trim||this.options.rtrim,e=this._.buf+e,g=e.length,(u=0)===this.lines&&65279===e.charCodeAt(0)&&u++;u<g&&(t||(C=e.substr(u,g-u),!(!this.options.rowDelimiter&&g<u+3||!this._.commenting&&g-u<this.options.comment.length&&this.options.comment.substr(0,g-u)===C||this.options.rowDelimiter&&g-u<this._.rowDelimiterLength&&this.options.rowDelimiter.some(function(t){return t.substr(0,g-u)===C})||this.options.rowDelimiter&&this._.quoting&&g-u<this.options.quote.length+this._.rowDelimiterLength&&this.options.rowDelimiter.some(function(e){return function(t){return(e.options.quote+t).substr(0,g-u)===C}}(this))||g-u<=this.options.delimiter.length&&this.options.delimiter.substr(0,g-u)===C||g-u<=this.options.escape.length&&this.options.escape.substr(0,g-u)===C)));)if(o=this._.nextChar?this._.nextChar:e.charAt(u),this._.nextChar=u+1<g?e.charAt(u+1):"",this.options.raw&&(this._.rawBuf+=o),null==this.options.rowDelimiter&&(b=u,N=null,this._.quoting||"\n"!==o&&"\r"!==o?!this._.quoting||o!==this.options.quote||"\n"!==(_=this._.nextChar)&&"\r"!==_||(N=this._.nextChar,b+=2,this.raw&&(rawBuf+=this._.nextChar)):(N=o,b+=1),N&&("\r"===N&&"\n"===e.charAt(b)&&(N+="\n"),this.options.rowDelimiter=[N],this._.rowDelimiterLength=N.length)),this._.commenting||o!==this.options.escape||(a=this.options.escape===this.options.quote,l=this._.nextChar===this.options.escape,f=this._.nextChar===this.options.quote,a&&null==this._.field&&!this._.quoting||!l&&!f)){if(!this._.commenting&&o===this.options.quote)if(this._.quoting){if(r=this.options.rowDelimiter&&this.options.rowDelimiter.some(function(t){return e.substr(u+1,t.length)===t}),n=e.substr(u+1,this.options.delimiter.length)===this.options.delimiter,h=this._.nextChar===this.options.comment,!this._.nextChar||r||n||h){this._.quoting=!1,this._.closingQuote=this.options.quote.length,u++,t&&u===g&&(this._.line.push(i(this._.field||"")),this._.field=null);continue}if(!this.options.relax)return Error("Invalid closing quote at line "+(this.lines+1)+"; found "+JSON.stringify(this._.nextChar)+" instead of delimiter "+JSON.stringify(this.options.delimiter));this._.quoting=!1,this._.field&&(this._.field=""+this.options.quote+this._.field)}else{if(!this._.field){this._.quoting=!0,u++;continue}if(null!=this._.field&&!this.options.relax)return Error("Invalid opening quote at line "+(this.lines+1))}if(((p=this.options.rowDelimiter&&this.options.rowDelimiter.some(function(t){return e.substr(u,t.length)===t}))||t&&u===g-1)&&this.lines++,I=!1,this._.commenting||this._.quoting||!this.options.comment||e.substr(u,this.options.comment.length)!==this.options.comment?this._.commenting&&p&&(I=!0,this._.commenting=!1):this._.commenting=!0,c=e.substr(u,this.options.delimiter.length)===this.options.delimiter,this._.commenting||this._.quoting||!c&&!p)this._.commenting||this._.quoting||" "!==o&&"\t"!==o?this._.commenting||(null==this._.field&&(this._.field=""),this._.field+=o):(null==this._.field&&(this._.field=""),v&&!this._.field||(this._.field+=o)),u++;else{if(p&&(d=this.options.rowDelimiter.filter(function(t){return e.substr(u,t.length)===t})[0].length),p&&0===this._.line.length&&null==this._.field&&(I||this.options.skip_empty_lines)){u+=d,this._.nextChar=e.charAt(u);continue}if(k&&(this._.closingQuote||(this._.field=null!=(w=this._.field)?w.trimRight():void 0)),this._.line.push(i(this._.field||"")),this._.closingQuote=0,this._.field=null,c&&(u+=this.options.delimiter.length,this._.nextChar=e.charAt(u),t&&!this._.nextChar&&(p=!0,this._.line.push(""))),p){if(s=this.__push(this._.line))return s;this._.line=[],u+=d,this._.nextChar=e.charAt(u);continue}}if(!this._.commenting&&(null!=(T=this._.field)?T.length:void 0)>this.options.max_limit_on_data_read)return Error("Field exceeds max_limit_on_data_read setting ("+this.options.max_limit_on_data_read+") "+JSON.stringify(this.options.delimiter));if(!this._.commenting&&(null!=(E=this._.line)?E.length:void 0)>this.options.max_limit_on_data_read)return Error("Row delimiter not found in the file "+JSON.stringify(this.options.rowDelimiter))}else u++,o=this._.nextChar,this._.nextChar=e.charAt(u+1),null==this._.field&&(this._.field=""),this._.field+=o,this.options.raw&&(this._.rawBuf+=o),u++;if(t){if(null!=this._.field&&(k&&(this._.closingQuote||(this._.field=null!=(x=this._.field)?x.trimRight():void 0)),this._.line.push(i(this._.field||"")),this._.field=null),(null!=(S=this._.field)?S.length:void 0)>this.options.max_limit_on_data_read)return Error("Delimiter not found in the file "+JSON.stringify(this.options.delimiter));if(0===g&&this.lines++,this._.line.length>this.options.max_limit_on_data_read)return Error("Row delimiter not found in the file "+JSON.stringify(this.options.rowDelimiter))}return this._.buf=e.substr(u),null},l=function(t){var e;return"object"==typeof(e=t)&&null!==t&&!Array.isArray(t)&&function(){for(;null!==Object.getPrototypeOf(e=Object.getPrototypeOf(e)););return Object.getPrototypeOf(t===e)}()}}).call(this,e("_process"),e("buffer").Buffer)},{_process:91,buffer:41,stream:112,string_decoder:113,util:117}],44:[function(t,e,n){(function(o){var s,a;s=t("string_decoder").StringDecoder,a=t("./index"),e.exports=function(t,e){var n,r,i;if(null==e&&(e={}),i=e.objname?{}:[],t instanceof o&&(t=(new s).write(t)),(r=new a.Parser(e)).push=function(t){return e.objname?i[t[0]]=t[1]:i.push(t)},n=r.__write(t,!1))throw n;if(t instanceof o&&(n=r.__write(t.end(),!0)))throw n;return r._flush(function(){}),i}}).call(this,t("buffer").Buffer)},{"./index":43,buffer:41,string_decoder:113}],45:[function(e,n,t){(function(o){var s,w,v,t;v=e("stream"),t=e("util"),w=e("lodash.get"),n.exports=function(){var e,n,r,t,i;return 3===arguments.length?(r=arguments[0],t=arguments[1],e=arguments[2]):2===arguments.length?(Array.isArray(arguments[0])?r=arguments[0]:t=arguments[0],"function"==typeof arguments[1]?e=arguments[1]:t=arguments[1]):1===arguments.length&&("function"==typeof arguments[0]?e=arguments[0]:Array.isArray(arguments[0])?r=arguments[0]:t=arguments[0]),null==t&&(t={}),i=new s(t),r&&o.nextTick(function(){var t,e,n;for(e=0,n=r.length;e<n;e++)t=r[e],i.write(t);return i.end()}),e&&(n=[],i.on("readable",function(){var t,e;for(e=[];t=i.read();)e.push(n.push(t));return e}),i.on("error",function(t){return e(t)}),i.on("end",function(){return e(null,n.join(""))})),i},s=function(t){var e,n,r,i,o,s,a,u,c,l,h,f,p,d,y,m,g;for(y in null==t&&(t={}),m={},t)g=t[y],m[y]=g;switch(v.Transform.call(this,m),this.options=m,null==(e=this.options).delimiter&&(e.delimiter=","),null==(n=this.options).quote&&(n.quote='"'),null==(a=this.options).quoted&&(a.quoted=!1),null==(u=this.options).quotedEmpty&&(u.quotedEmpty=void 0),null==(c=this.options).quotedString&&(c.quotedString=!1),null==(l=this.options).eof&&(l.eof=!0),null==(h=this.options).escape&&(h.escape='"'),null==(f=this.options).columns&&(f.columns=null),null==(p=this.options).header&&(p.header=!1),null==(d=this.options).formatters&&(d.formatters={}),null==(r=this.options.formatters).date&&(r.date=function(t){return""+t.getTime()}),null==(i=this.options.formatters).bool&&(i.bool=function(t){return t?"1":""}),null==(o=this.options.formatters).object&&(o.object=function(t){return JSON.stringify(t)}),null==(s=this.options).rowDelimiter&&(s.rowDelimiter="\n"),null==this.countWriten&&(this.countWriten=0),this.options.rowDelimiter){case"auto":this.options.rowDelimiter=null;break;case"unix":this.options.rowDelimiter="\n";break;case"mac":this.options.rowDelimiter="\r";break;case"windows":this.options.rowDelimiter="\r\n";break;case"unicode":this.options.rowDelimiter="\u2028"}return this},t.inherits(s,v.Transform),(n.exports.Stringifier=s).prototype.headers=function(){var e,n,r;if(this.options.header&&this.options.columns)return"object"==typeof(r=this.options.columns)&&(r=function(){var t;for(e in t=[],r)n=r[e],t.push(n);return t}()),r=this.options.eof?this.stringify(r)+this.options.rowDelimiter:this.stringify(r),v.Transform.prototype.write.call(this,r)},s.prototype.end=function(t,e,n){return 0===this.countWriten&&this.headers(),v.Transform.prototype.end.apply(this,arguments)},s.prototype.write=function(t,e,n){var r,i,o;if(null!=t){if(!(o="object"!=typeof t)){0!==this.countWriten||Array.isArray(t)||null==(r=this.options).columns&&(r.columns=Object.keys(t));try{this.emit("record",t,this.countWriten)}catch(t){return i=t,this.emit("error",i)}this.options.eof?t=this.stringify(t)+this.options.rowDelimiter:(t=this.stringify(t),(this.options.header||this.countWriten)&&(t=this.options.rowDelimiter+t))}return"number"==typeof t&&(t=""+t),0===this.countWriten&&this.headers(),o||this.countWriten++,v.Transform.prototype.write.call(this,t,e,n)}},s.prototype._transform=function(t,e,n){return this.push(t),n()},s.prototype.stringify=function(t){var e,n,r,i,o,s,a,u,c,l,h,f,p,d,y,m,g,v,b,_;if("object"!=typeof t)return t;if("object"!=typeof(r=this.options.columns)||null===r||Array.isArray(r)||(r=Object.keys(r)),u=this.options.delimiter,y=this.options.quote,c=this.options.escape,Array.isArray(t))r&&t.splice(r.length);else{if(e=[],r)for(h=f=0,m=r.length;0<=m?f<m:m<f;h=0<=m?++f:--f)n=r[h],_=w(t,n),e[h]=null==_?"":_;else for(n in t)e.push(t[n]);t=e,e=null}if(Array.isArray(t)){for(d="",h=p=0,g=t.length;0<=g?p<g:g<p;h=0<=g?++p:--p)"string"==typeof(l=t[h])||("number"==typeof l?l=""+l:"boolean"==typeof l?l=this.options.formatters.bool(l):l instanceof Date?l=this.options.formatters.date(l):"object"==typeof l&&null!==l&&(l=this.options.formatters.object(l))),l?(a=0<=l.indexOf(u),s=0<=l.indexOf(y),i=0<=l.indexOf(c)&&c!==y,o=0<=l.indexOf("\r")||0<=l.indexOf("\n"),(b=s||a||o||this.options.quoted||this.options.quotedString&&"string"==typeof t[h])&&i&&(v="\\"===c?new RegExp(c+c,"g"):new RegExp(c,"g"),l=l.replace(v,c+c)),s&&(v=new RegExp(y,"g"),l=l.replace(v,c+y)),b&&(l=y+l+y),d+=l):(this.options.quotedEmpty||null==this.options.quotedEmpty&&""===t[h]&&this.options.quotedString)&&(d+=y+y),h!==t.length-1&&(d+=u);t=d}return t}}).call(this,e("_process"))},{_process:91,"lodash.get":87,stream:112,util:117}],46:[function(t,e,n){(function(a){var u,c;u=t("string_decoder").StringDecoder,c=t("./index"),e.exports=function(t,e){var n,r,i,o,s;for(null==e&&(e={}),n=[],t instanceof a&&(t=(new u).write(t)),(s=new c.Stringifier(e)).push=function(t){if(t)return n.push(t.toString())},r=0,i=t.length;r<i;r++)o=t[r],s.write(o);return s.end(),n.join("")}}).call(this,t("buffer").Buffer)},{"./index":45,buffer:41,string_decoder:113}],47:[function(t,e,n){var u=Object.create||function(t){var e=function(){};return e.prototype=t,new e},s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return n},o=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=u(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((e.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0;var i,a=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),i=0===c.x}catch(t){i=!1}function l(t){return void 0===t._maxListeners?r.defaultMaxListeners:t._maxListeners}function h(t,e,n,r){var i,o,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=t._events)?(o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]):(o=t._events=u(null),t._eventsCount=0),s){if("function"==typeof s?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),!s.warned&&(i=l(t))&&0<i&&s.length>i){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",a.name,a.message)}}else s=o[e]=n,++t._eventsCount;return t}function f(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function p(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=o.call(f,r);return i.listener=n,r.wrapFn=i}function d(t,e,n){var r=t._events;if(!r)return[];var i=r[e];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):m(i,i.length):[]}function y(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function m(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}i?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');a=t}}):r.defaultMaxListeners=a,r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},r.prototype.getMaxListeners=function(){return l(this)},r.prototype.emit=function(t){var e,n,r,i,o,s,a="error"===t;if(s=this._events)a=a&&null==s.error;else if(!a)return!1;if(a){if(1<arguments.length&&(e=arguments[1]),e instanceof Error)throw e;var u=new Error('Unhandled "error" event. ('+e+")");throw u.context=e,u}if(!(n=s[t]))return!1;var c="function"==typeof n;switch(r=arguments.length){case 1:!function(t,e,n){if(e)t.call(n);else for(var r=t.length,i=m(t,r),o=0;o<r;++o)i[o].call(n)}(n,c,this);break;case 2:!function(t,e,n,r){if(e)t.call(n,r);else for(var i=t.length,o=m(t,i),s=0;s<i;++s)o[s].call(n,r)}(n,c,this,arguments[1]);break;case 3:!function(t,e,n,r,i){if(e)t.call(n,r,i);else for(var o=t.length,s=m(t,o),a=0;a<o;++a)s[a].call(n,r,i)}(n,c,this,arguments[1],arguments[2]);break;case 4:!function(t,e,n,r,i,o){if(e)t.call(n,r,i,o);else for(var s=t.length,a=m(t,s),u=0;u<s;++u)a[u].call(n,r,i,o)}(n,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];!function(t,e,n,r){if(e)t.apply(n,r);else for(var i=t.length,o=m(t,i),s=0;s<i;++s)o[s].apply(n,r)}(n,c,this,i)}return!0},r.prototype.on=r.prototype.addListener=function(t,e){return h(this,t,e,!1)},r.prototype.prependListener=function(t,e){return h(this,t,e,!0)},r.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,p(this,t,e)),this},r.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,p(this,t,e)),this},r.prototype.removeListener=function(t,e){var n,r,i,o,s;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=u(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;0<=o;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),r.removeListener&&this.emit("removeListener",t,s||e)}return this},r.prototype.removeAllListeners=function(t){var e,n,r;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=u(null),this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=u(null):delete n[t]),this;if(0===arguments.length){var i,o=s(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=u(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)for(r=e.length-1;0<=r;r--)this.removeListener(t,e[r]);return this},r.prototype.listeners=function(t){return d(this,t,!0)},r.prototype.rawListeners=function(t){return d(this,t,!1)},r.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):y.call(t,e)},r.prototype.listenerCount=y,r.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],48:[function(t,e,n){"use strict";var r=t("./util/constants"),i=t("./mixins/logging"),o={VERSION:r.VERSION,Client:t("./protocol/client"),Scheduler:t("./protocol/scheduler")};i.wrapper=o,e.exports=o},{"./mixins/logging":50,"./protocol/client":54,"./protocol/scheduler":60,"./util/constants":72}],49:[function(t,e,n){(function(r){"use strict";var i=t("../util/promise");e.exports={then:function(t,e){var n=this;return this._promise||(this._promise=new i(function(t,e){n._resolve=t,n._reject=e})),0===arguments.length?this._promise:this._promise.then(t,e)},callback:function(e,n){return this.then(function(t){e.call(n,t)})},errback:function(e,n){return this.then(null,function(t){e.call(n,t)})},timeout:function(t,e){this.then();var n=this;this._timer=r.setTimeout(function(){n._reject(e)},1e3*t)},setDeferredStatus:function(t,e){this._timer&&r.clearTimeout(this._timer),this.then(),"succeeded"===t?this._resolve(e):"failed"===t?this._reject(e):delete this._promise}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util/promise":77}],50:[function(t,e,n){"use strict";var a=t("../util/to_json"),u={LOG_LEVELS:{fatal:4,error:3,warn:2,info:1,debug:0},writeLog:function(t,e){var n=u.logger||(u.wrapper||u).logger;if(n){var r=Array.prototype.slice.apply(t),i="[Faye",o=this.className,s=r.shift().replace(/\?/g,function(){try{return a(r.shift())}catch(t){return"[Object]"}});o&&(i+="."+o),i+="] ","function"==typeof n[e]?n[e](i+s):"function"==typeof n&&n(i+s)}}};for(var r in u.LOG_LEVELS)!function(t){u[t]=function(){this.writeLog(arguments,t)}}(r);e.exports=u},{"../util/to_json":79}],51:[function(t,e,n){"use strict";var r={countListeners:function(t){return this.listeners(t).length},bind:function(t,e,n){var r=Array.prototype.slice,i=function(){e.apply(n,r.call(arguments))};return this._listeners=this._listeners||[],this._listeners.push([t,e,n,i]),this.on(t,i)},unbind:function(t,e,n){this._listeners=this._listeners||[];for(var r,i=this._listeners.length;i--;)(r=this._listeners[i])[0]===t&&(!e||r[1]===e&&r[2]===n)&&(this._listeners.splice(i,1),this.removeListener(t,r[3]))}};t("../util/extend")(r,t("../util/event_emitter").prototype),r.trigger=r.emit,e.exports=r},{"../util/event_emitter":75,"../util/extend":76}],52:[function(t,e,n){(function(o){"use strict";e.exports={addTimeout:function(t,e,n,r){if(this._timeouts=this._timeouts||{},!this._timeouts.hasOwnProperty(t)){var i=this;this._timeouts[t]=o.setTimeout(function(){delete i._timeouts[t],n.call(r)},1e3*e)}},removeTimeout:function(t){this._timeouts=this._timeouts||{};var e=this._timeouts[t];e&&(o.clearTimeout(e),delete this._timeouts[t])},removeAllTimeouts:function(){for(var t in this._timeouts=this._timeouts||{},this._timeouts)this.removeTimeout(t)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],53:[function(t,e,n){"use strict";var r=t("../util/class"),i=t("../util/extend"),o=t("../mixins/publisher"),s=t("./grammar"),a=r({initialize:function(t){this.id=this.name=t},push:function(t){this.trigger("message",t)},isUnused:function(){return 0===this.countListeners("message")}});i(a.prototype,o),i(a,{HANDSHAKE:"/meta/handshake",CONNECT:"/meta/connect",SUBSCRIBE:"/meta/subscribe",UNSUBSCRIBE:"/meta/unsubscribe",DISCONNECT:"/meta/disconnect",META:"meta",SERVICE:"service",expand:function(t){var e=this.parse(t),n=["/**",t],r=e.slice();r[r.length-1]="*",n.push(this.unparse(r));for(var i=1,o=e.length;i<o;i++)(r=e.slice(0,i)).push("**"),n.push(this.unparse(r));return n},isValid:function(t){return s.CHANNEL_NAME.test(t)||s.CHANNEL_PATTERN.test(t)},parse:function(t){return this.isValid(t)?t.split("/").slice(1):null},unparse:function(t){return"/"+t.join("/")},isMeta:function(t){var e=this.parse(t);return e?e[0]===this.META:null},isService:function(t){var e=this.parse(t);return e?e[0]===this.SERVICE:null},isSubscribable:function(t){return this.isValid(t)?!this.isMeta(t)&&!this.isService(t):null},Set:r({initialize:function(){this._channels={}},getKeys:function(){var t=[];for(var e in this._channels)t.push(e);return t},remove:function(t){delete this._channels[t]},hasSubscription:function(t){return this._channels.hasOwnProperty(t)},subscribe:function(t,e){for(var n,r=0,i=t.length;r<i;r++){n=t[r],(this._channels[n]=this._channels[n]||new a(n)).bind("message",e)}},unsubscribe:function(t,e){var n=this._channels[t];return!!n&&(n.unbind("message",e),!!n.isUnused()&&(this.remove(t),!0))},distributeMessage:function(t){for(var e=a.expand(t.channel),n=0,r=e.length;n<r;n++){var i=this._channels[e[n]];i&&i.trigger("message",t)}}})}),e.exports=a},{"../mixins/publisher":51,"../util/class":71,"../util/extend":76,"./grammar":58}],54:[function(b,_,t){(function(i){"use strict";var o=b("asap"),t=b("../util/class"),s=(b("../util/promise"),b("../util/uri")),a=b("../util/array"),n=b("../util/browser"),u=b("../util/constants"),e=b("../util/extend"),c=b("../util/validate_options"),r=b("../mixins/deferrable"),l=b("../mixins/logging"),h=b("../mixins/publisher"),f=b("./channel"),p=b("./dispatcher"),d=b("./error"),y=b("./extensible"),m=b("./publication"),g=b("./subscription"),v=t({className:"Client",UNCONNECTED:1,CONNECTING:2,CONNECTED:3,DISCONNECTED:4,HANDSHAKE:"handshake",RETRY:"retry",NONE:"none",CONNECTION_TIMEOUT:60,DEFAULT_ENDPOINT:"/bayeux",INTERVAL:0,initialize:function(t,e){this.info("New client created for ?",t),c(e=e||{},["interval","timeout","endpoints","proxy","retry","scheduler","websocketExtensions","tls","ca"]),this._channels=new f.Set,this._dispatcher=p.create(this,t||this.DEFAULT_ENDPOINT,e),this._messageId=0,this._state=this.UNCONNECTED,this._responseCallbacks={},this._advice={reconnect:this.RETRY,interval:1e3*(e.interval||this.INTERVAL),timeout:1e3*(e.timeout||this.CONNECTION_TIMEOUT)},this._dispatcher.timeout=this._advice.timeout/1e3,this._dispatcher.bind("message",this._receiveMessage,this),n.Event&&void 0!==i.onbeforeunload&&n.Event.on(i,"beforeunload",function(){a.indexOf(this._dispatcher._disabled,"autodisconnect")<0&&this.disconnect()},this)},addWebsocketExtension:function(t){return this._dispatcher.addWebsocketExtension(t)},disable:function(t){return this._dispatcher.disable(t)},setHeader:function(t,e){return this._dispatcher.setHeader(t,e)},handshake:function(e,n){if(this._advice.reconnect!==this.NONE&&this._state===this.UNCONNECTED){this._state=this.CONNECTING;var r=this;this.info("Initiating handshake with ?",s.stringify(this._dispatcher.endpoint)),this._dispatcher.selectTransport(u.MANDATORY_CONNECTION_TYPES),this._sendMessage({channel:f.HANDSHAKE,version:u.BAYEUX_VERSION,supportedConnectionTypes:this._dispatcher.getConnectionTypes()},{},function(t){t.successful?(this._state=this.CONNECTED,this._dispatcher.clientId=t.clientId,this._dispatcher.selectTransport(t.supportedConnectionTypes),this.info("Handshake successful: ?",this._dispatcher.clientId),this.subscribe(this._channels.getKeys(),!0),e&&o(function(){e.call(n)})):(this.info("Handshake unsuccessful"),i.setTimeout(function(){r.handshake(e,n)},1e3*this._dispatcher.retry),this._state=this.UNCONNECTED)},this)}},connect:function(t,e){if(this._advice.reconnect!==this.NONE&&this._state!==this.DISCONNECTED){if(this._state===this.UNCONNECTED)return this.handshake(function(){this.connect(t,e)},this);this.callback(t,e),this._state===this.CONNECTED&&(this.info("Calling deferred actions for ?",this._dispatcher.clientId),this.setDeferredStatus("succeeded"),this.setDeferredStatus("unknown"),this._connectRequest||(this._connectRequest=!0,this.info("Initiating connection for ?",this._dispatcher.clientId),this._sendMessage({channel:f.CONNECT,clientId:this._dispatcher.clientId,connectionType:this._dispatcher.connectionType},{},this._cycleConnection,this)))}},disconnect:function(){if(this._state===this.CONNECTED){this._state=this.DISCONNECTED,this.info("Disconnecting ?",this._dispatcher.clientId);var e=new m;return this._sendMessage({channel:f.DISCONNECT,clientId:this._dispatcher.clientId},{},function(t){t.successful?(this._dispatcher.close(),e.setDeferredStatus("succeeded")):e.setDeferredStatus("failed",d.parse(t.error))},this),this.info("Clearing channel listeners for ?",this._dispatcher.clientId),this._channels=new f.Set,e}},subscribe:function(n,e,r){if(n instanceof Array)return a.map(n,function(t){return this.subscribe(t,e,r)},this);var i=new g(this,n,e,r),t=!0===e;return this._channels.hasSubscription(n)&&!t?(this._channels.subscribe([n],i),i.setDeferredStatus("succeeded")):this.connect(function(){this.info("Client ? attempting to subscribe to ?",this._dispatcher.clientId,n),t||this._channels.subscribe([n],i),this._sendMessage({channel:f.SUBSCRIBE,clientId:this._dispatcher.clientId,subscription:n},{},function(t){if(!t.successful)return i.setDeferredStatus("failed",d.parse(t.error)),this._channels.unsubscribe(n,i);var e=[].concat(t.subscription);this.info("Subscription acknowledged for ? to ?",this._dispatcher.clientId,e),i.setDeferredStatus("succeeded")},this)},this),i},unsubscribe:function(t,e){if(t instanceof Array)return a.map(t,function(t){return this.unsubscribe(t,e)},this);this._channels.unsubscribe(t,e)&&this.connect(function(){this.info("Client ? attempting to unsubscribe from ?",this._dispatcher.clientId,t),this._sendMessage({channel:f.UNSUBSCRIBE,clientId:this._dispatcher.clientId,subscription:t},{},function(t){if(t.successful){var e=[].concat(t.subscription);this.info("Unsubscription acknowledged for ? from ?",this._dispatcher.clientId,e)}},this)},this)},publish:function(t,e,n){c(n||{},["attempts","deadline"]);var r=new m;return this.connect(function(){this.info("Client ? queueing published message to ?: ?",this._dispatcher.clientId,t,e),this._sendMessage({channel:t,data:e,clientId:this._dispatcher.clientId},n,function(t){t.successful?r.setDeferredStatus("succeeded"):r.setDeferredStatus("failed",d.parse(t.error))},this)},this),r},_sendMessage:function(t,e,n,r){t.id=this._generateMessageId();var i=this._advice.timeout?1.2*this._advice.timeout/1e3:1.2*this._dispatcher.retry;this.pipeThroughExtensions("outgoing",t,null,function(t){t&&(n&&(this._responseCallbacks[t.id]=[n,r]),this._dispatcher.sendMessage(t,i,e||{}))},this)},_generateMessageId:function(){return this._messageId+=1,this._messageId>=Math.pow(2,32)&&(this._messageId=0),this._messageId.toString(36)},_receiveMessage:function(t){var e,n=t.id;void 0!==t.successful&&(e=this._responseCallbacks[n],delete this._responseCallbacks[n]),this.pipeThroughExtensions("incoming",t,null,function(t){t&&(t.advice&&this._handleAdvice(t.advice),this._deliverMessage(t),e&&e[0].call(e[1],t))},this)},_handleAdvice:function(t){e(this._advice,t),this._dispatcher.timeout=this._advice.timeout/1e3,this._advice.reconnect===this.HANDSHAKE&&this._state!==this.DISCONNECTED&&(this._state=this.UNCONNECTED,this._dispatcher.clientId=null,this._cycleConnection())},_deliverMessage:function(t){t.channel&&void 0!==t.data&&(this.info("Client ? calling listeners for ? with ?",this._dispatcher.clientId,t.channel,t.data),this._channels.distributeMessage(t))},_cycleConnection:function(){this._connectRequest&&(this._connectRequest=null,this.info("Closed connection for ?",this._dispatcher.clientId));var t=this;i.setTimeout(function(){t.connect()},this._advice.interval)}});e(v.prototype,r),e(v.prototype,h),e(v.prototype,l),e(v.prototype,y),_.exports=v}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../mixins/deferrable":49,"../mixins/logging":50,"../mixins/publisher":51,"../util/array":69,"../util/browser":70,"../util/class":71,"../util/constants":72,"../util/extend":76,"../util/promise":77,"../util/uri":80,"../util/validate_options":81,"./channel":53,"./dispatcher":55,"./error":56,"./extensible":57,"./publication":59,"./subscription":61,asap:37}],55:[function(l,h,t){(function(s){"use strict";var t=l("../util/class"),a=l("../util/uri"),u=l("../util/cookies"),e=l("../util/extend"),n=l("../mixins/logging"),r=l("../mixins/publisher"),i=l("../transport"),c=l("./scheduler"),o=t({className:"Dispatcher",MAX_REQUEST_SIZE:2048,DEFAULT_RETRY:5,UP:1,DOWN:2,initialize:function(t,e,n){this._client=t,this.endpoint=a.parse(e),this._alternates=n.endpoints||{},this.cookies=u.CookieJar&&new u.CookieJar,this._disabled=[],this._envelopes={},this.headers={},this.retry=n.retry||this.DEFAULT_RETRY,this._scheduler=n.scheduler||c,this._state=0,this.transports={},this.wsExtensions=[],this.proxy=n.proxy||{},"string"==typeof this._proxy&&(this._proxy={origin:this._proxy});var r=n.websocketExtensions;if(r)for(var i=0,o=(r=[].concat(r)).length;i<o;i++)this.addWebsocketExtension(r[i]);for(var s in this.tls=n.tls||{},this.tls.ca=this.tls.ca||n.ca,this._alternates)this._alternates[s]=a.parse(this._alternates[s]);this.maxRequestSize=this.MAX_REQUEST_SIZE},endpointFor:function(t){return this._alternates[t]||this.endpoint},addWebsocketExtension:function(t){this.wsExtensions.push(t)},disable:function(t){this._disabled.push(t)},setHeader:function(t,e){this.headers[t]=e},close:function(){var t=this._transport;delete this._transport,t&&t.close()},getConnectionTypes:function(){return i.getConnectionTypes()},selectTransport:function(t){i.get(this,t,this._disabled,function(t){this.debug("Selected ? transport for ?",t.connectionType,a.stringify(t.endpoint)),t!==this._transport&&(this._transport&&this._transport.close(),this._transport=t,this.connectionType=t.connectionType)},this)},sendMessage:function(t,e,n){n=n||{};var r,i=t.id,o=n.attempts,s=n.deadline&&(new Date).getTime()+1e3*n.deadline,a=this._envelopes[i];a||(r=new this._scheduler(t,{timeout:e,interval:this.retry,attempts:o,deadline:s}),a=this._envelopes[i]={message:t,scheduler:r}),this._sendEnvelope(a)},_sendEnvelope:function(t){if(this._transport&&!t.request&&!t.timer){var e=t.message,n=t.scheduler,r=this;if(!n.isDeliverable())return n.abort(),void delete this._envelopes[e.id];t.timer=s.setTimeout(function(){r.handleError(e)},1e3*n.getTimeout()),n.send(),t.request=this._transport.sendMessage(e)}},handleResponse:function(t){var e=this._envelopes[t.id];void 0!==t.successful&&e&&(e.scheduler.succeed(),delete this._envelopes[t.id],s.clearTimeout(e.timer)),this.trigger("message",t),this._state!==this.UP&&(this._state=this.UP,this._client.trigger("transport:up"))},handleError:function(t,e){var n=this._envelopes[t.id],r=n&&n.request,i=this;if(r){r.then(function(t){t&&t.abort&&t.abort()});var o=n.scheduler;o.fail(),s.clearTimeout(n.timer),n.request=n.timer=null,e?this._sendEnvelope(n):n.timer=s.setTimeout(function(){n.timer=null,i._sendEnvelope(n)},1e3*o.getInterval()),this._state!==this.DOWN&&(this._state=this.DOWN,this._client.trigger("transport:down"))}}});o.create=function(t,e,n){return new o(t,e,n)},e(o.prototype,r),e(o.prototype,n),h.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../mixins/logging":50,"../mixins/publisher":51,"../transport":62,"../util/class":71,"../util/cookies":73,"../util/extend":76,"../util/uri":80,"./scheduler":60}],56:[function(t,e,n){"use strict";var r=t("../util/class"),i=t("./grammar"),o=r({initialize:function(t,e,n){this.code=t,this.params=Array.prototype.slice.call(e),this.message=n},toString:function(){return this.code+":"+this.params.join(",")+":"+this.message}});o.parse=function(t){if(t=t||"",!i.ERROR.test(t))return new o(null,[],t);var e=t.split(":"),n=parseInt(e[0]),r=e[1].split(",");t=e[2];return new o(n,r,t)};var s={versionMismatch:[300,"Version mismatch"],conntypeMismatch:[301,"Connection types not supported"],extMismatch:[302,"Extension mismatch"],badRequest:[400,"Bad request"],clientUnknown:[401,"Unknown client"],parameterMissing:[402,"Missing required parameter"],channelForbidden:[403,"Forbidden channel"],channelUnknown:[404,"Unknown channel"],channelInvalid:[405,"Invalid channel"],extUnknown:[406,"Unknown extension"],publishFailed:[407,"Failed to publish"],serverError:[500,"Internal server error"]};for(var a in s)!function(t){o[t]=function(){return new o(s[t][0],arguments,s[t][1]).toString()}}(a);e.exports=o},{"../util/class":71,"./grammar":58}],57:[function(t,e,n){"use strict";var r={addExtension:function(t){this._extensions=this._extensions||[],this._extensions.push(t),t.added&&t.added(this)},removeExtension:function(t){if(this._extensions)for(var e=this._extensions.length;e--;)this._extensions[e]===t&&(this._extensions.splice(e,1),t.removed&&t.removed(this))},pipeThroughExtensions:function(r,t,i,o,s){if(this.debug("Passing through ? extensions: ?",r,t),!this._extensions)return o.call(s,t);var a=this._extensions.slice(),u=function(t){if(!t)return o.call(s,t);var e=a.shift();if(!e)return o.call(s,t);var n=e[r];if(!n)return u(t);3<=n.length?e[r](t,i,u):e[r](t,u)};u(t)}};t("../util/extend")(r,t("../mixins/logging")),e.exports=r},{"../mixins/logging":50,"../util/extend":76}],58:[function(t,e,n){"use strict";e.exports={CHANNEL_NAME:/^\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*$/,CHANNEL_PATTERN:/^(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*\/\*{1,2}$/,ERROR:/^([0-9][0-9][0-9]:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*(,(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)*:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*|[0-9][0-9][0-9]::(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)$/,VERSION:/^([0-9])+(\.(([a-z]|[A-Z])|[0-9])(((([a-z]|[A-Z])|[0-9])|\-|\_))*)*$/}},{}],59:[function(t,e,n){"use strict";var r=t("../util/class"),i=t("../mixins/deferrable");e.exports=r(i)},{"../mixins/deferrable":49,"../util/class":71}],60:[function(t,e,n){"use strict";var r=function(t,e){this.message=t,this.options=e,this.attempts=0};t("../util/extend")(r.prototype,{getTimeout:function(){return this.options.timeout},getInterval:function(){return this.options.interval},isDeliverable:function(){var t=this.options.attempts,e=this.attempts,n=this.options.deadline,r=(new Date).getTime();return!(void 0!==t&&t<=e)&&!(void 0!==n&&n<r)},send:function(){this.attempts+=1},succeed:function(){},fail:function(){},abort:function(){}}),e.exports=r},{"../util/extend":76}],61:[function(t,e,n){"use strict";var r=t("../util/class"),i=t("../util/extend"),o=t("../mixins/deferrable"),s=r({initialize:function(t,e,n,r){this._client=t,this._channels=e,this._callback=n,this._context=r,this._cancelled=!1},withChannel:function(t,e){return this._withChannel=[t,e],this},apply:function(t,e){var n=e[0];this._callback&&this._callback.call(this._context,n.data),this._withChannel&&this._withChannel[0].call(this._withChannel[1],n.channel,n.data)},cancel:function(){this._cancelled||(this._client.unsubscribe(this._channels,this),this._cancelled=!0)},unsubscribe:function(){this.cancel()}});i(s.prototype,o),e.exports=s},{"../mixins/deferrable":49,"../util/class":71,"../util/extend":76}],62:[function(t,e,n){"use strict";var r=t("./transport");r.register("websocket",t("./web_socket")),r.register("eventsource",t("./event_source")),r.register("long-polling",t("./xhr")),r.register("cross-origin-long-polling",t("./cors")),r.register("callback-polling",t("./jsonp")),e.exports=r},{"./cors":63,"./event_source":64,"./jsonp":65,"./transport":66,"./web_socket":67,"./xhr":68}],63:[function(i,o,t){(function(u){"use strict";var t=i("../util/class"),e=i("../util/set"),c=i("../util/uri"),n=i("../util/extend"),r=i("../util/to_json"),l=n(t(i("./transport"),{encode:function(t){return"message="+encodeURIComponent(r(t))},request:function(e){var t,n=u.XDomainRequest?XDomainRequest:XMLHttpRequest,r=new n,i=++l._id,o=this._dispatcher.headers,s=this;if(r.open("POST",c.stringify(this.endpoint),!0),r.setRequestHeader)for(t in r.setRequestHeader("Pragma","no-cache"),o)o.hasOwnProperty(t)&&r.setRequestHeader(t,o[t]);var a=function(){if(!r)return!1;l._pending.remove(i),r.onload=r.onerror=r.ontimeout=r.onprogress=null,r=null};return r.onload=function(){var t;try{t=JSON.parse(r.responseText)}catch(t){}a(),t?s._receive(t):s._handleError(e)},r.onerror=r.ontimeout=function(){a(),s._handleError(e)},r.onprogress=function(){},n===u.XDomainRequest&&l._pending.add({id:i,xhr:r}),r.send(this.encode(e)),r}}),{_id:0,_pending:new e,isUsable:function(t,e,n,r){if(c.isSameOrigin(e))return n.call(r,!1);if(u.XDomainRequest)return n.call(r,e.protocol===location.protocol);if(u.XMLHttpRequest){var i=new XMLHttpRequest;return n.call(r,void 0!==i.withCredentials)}return n.call(r,!1)}});o.exports=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util/class":71,"../util/extend":76,"../util/set":78,"../util/to_json":79,"../util/uri":80,"./transport":66}],64:[function(c,l,t){(function(i){"use strict";var t=c("../util/class"),o=c("../util/uri"),s=c("../util/copy_object"),e=c("../util/extend"),n=c("../mixins/deferrable"),a=c("./transport"),u=c("./xhr"),r=e(t(a,{initialize:function(t,e){if(a.prototype.initialize.call(this,t,e),!i.EventSource)return this.setDeferredStatus("failed");this._xhr=new u(t,e),(e=s(e)).pathname+="/"+t.clientId;var n=new i.EventSource(o.stringify(e)),r=this;n.onopen=function(){r._everConnected=!0,r.setDeferredStatus("succeeded")},n.onerror=function(){r._everConnected?r._handleError([]):(r.setDeferredStatus("failed"),n.close())},n.onmessage=function(t){var e;try{e=JSON.parse(t.data)}catch(t){}e?r._receive(e):r._handleError([])},this._socket=n},close:function(){this._socket&&(this._socket.onopen=this._socket.onerror=this._socket.onmessage=null,this._socket.close(),delete this._socket)},isUsable:function(t,e){this.callback(function(){t.call(e,!0)}),this.errback(function(){t.call(e,!1)})},encode:function(t){return this._xhr.encode(t)},request:function(t){return this._xhr.request(t)}}),{isUsable:function(e,n,r,i){if(!e.clientId)return r.call(i,!1);u.isUsable(e,n,function(t){if(!t)return r.call(i,!1);this.create(e,n).isUsable(r,i)},this)},create:function(t,e){var n=t.transports.eventsource=t.transports.eventsource||{},r=t.clientId,i=s(e);return i.pathname+="/"+(r||""),n[i=o.stringify(i)]=n[i]||new this(t,e),n[i]}});e(r.prototype,n),l.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../mixins/deferrable":49,"../util/class":71,"../util/copy_object":74,"../util/extend":76,"../util/uri":80,"./transport":66,"./xhr":68}],65:[function(n,r,t){(function(a){"use strict";var t=n("../util/class"),u=n("../util/uri"),c=n("../util/copy_object"),e=n("../util/extend"),l=n("../util/to_json"),h=e(t(n("./transport"),{encode:function(t){var e=c(this.endpoint);return e.query.message=l(t),e.query.jsonp="__jsonp"+h._cbCount+"__",u.stringify(e)},request:function(t){var e=document.getElementsByTagName("head")[0],n=document.createElement("script"),r=h.getCallbackName(),i=c(this.endpoint),o=this;i.query.message=l(t),i.query.jsonp=r;var s=function(){if(!a[r])return!1;a[r]=void 0;try{delete a[r]}catch(t){}n.parentNode.removeChild(n)};return a[r]=function(t){s(),o._receive(t)},n.type="text/javascript",n.src=u.stringify(i),e.appendChild(n),n.onerror=function(){s(),o._handleError(t)},{abort:s}}}),{_cbCount:0,getCallbackName:function(){return this._cbCount+=1,"__jsonp"+this._cbCount+"__"},isUsable:function(t,e,n,r){n.call(r,!0)}});r.exports=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util/class":71,"../util/copy_object":74,"../util/extend":76,"../util/to_json":79,"../util/uri":80,"./transport":66}],66:[function(c,f,t){(function(s){"use strict";var t=c("../util/class"),a=c("../util/cookies").Cookie,n=c("../util/promise"),l=c("../util/uri"),h=c("../util/array"),r=c("../util/extend"),e=c("../mixins/logging"),i=c("../mixins/timeouts"),o=c("../protocol/channel"),u=r(t({className:"Transport",DEFAULT_PORTS:{"http:":80,"https:":443,"ws:":80,"wss:":443},MAX_DELAY:0,batching:!0,initialize:function(t,e){this._dispatcher=t,this.endpoint=e,this._outbox=[],this._proxy=r({},this._dispatcher.proxy),this._proxy.origin||(this._proxy.origin=this._findProxy())},close:function(){},encode:function(t){return""},sendMessage:function(t){return this.debug("Client ? sending message to ?: ?",this._dispatcher.clientId,l.stringify(this.endpoint),t),this.batching?(this._outbox.push(t),this._flushLargeBatch(),t.channel===o.HANDSHAKE?this._publish(.01):(t.channel===o.CONNECT&&(this._connectMessage=t),this._publish(this.MAX_DELAY))):n.resolve(this.request([t]))},_makePromise:function(){var e=this;this._requestPromise=this._requestPromise||new n(function(t){e._resolvePromise=t})},_publish:function(t){return this._makePromise(),this.addTimeout("publish",t,function(){this._flush(),delete this._requestPromise},this),this._requestPromise},_flush:function(){this.removeTimeout("publish"),1<this._outbox.length&&this._connectMessage&&(this._connectMessage.advice={timeout:0}),this._resolvePromise(this.request(this._outbox)),this._connectMessage=null,this._outbox=[]},_flushLargeBatch:function(){if(!(this.encode(this._outbox).length<this._dispatcher.maxRequestSize)){var t=this._outbox.pop();this._makePromise(),this._flush(),t&&this._outbox.push(t)}},_receive:function(t){if(t){t=[].concat(t),this.debug("Client ? received from ? via ?: ?",this._dispatcher.clientId,l.stringify(this.endpoint),this.connectionType,t);for(var e=0,n=t.length;e<n;e++)this._dispatcher.handleResponse(t[e])}},_handleError:function(t,e){t=[].concat(t),this.debug("Client ? failed to send to ? via ?: ?",this._dispatcher.clientId,l.stringify(this.endpoint),this.connectionType,t);for(var n=0,r=t.length;n<r;n++)this._dispatcher.handleError(t[n])},_getCookies:function(){var t=this._dispatcher.cookies,e=l.stringify(this.endpoint);return t?h.map(t.getCookiesSync(e),function(t){return t.cookieString()}).join("; "):""},_storeCookies:function(t){var e,n=this._dispatcher.cookies,r=l.stringify(this.endpoint);if(t&&n)for(var i=0,o=(t=[].concat(t)).length;i<o;i++)e=a.parse(t[i]),n.setCookieSync(e,r)},_findProxy:function(){if(void 0!==s){var t=this.endpoint.protocol;if(t){var e,n,r=t.replace(/:$/,"").toLowerCase()+"_proxy",i=r.toUpperCase(),o=s.env;return"http_proxy"===r&&o.REQUEST_METHOD?(1===(e=Object.keys(o).filter(function(t){return/^http_proxy$/i.test(t)})).length?e[0]===r&&void 0===o[i]&&(n=o[r]):1<e.length&&(n=o[r]),n=n||o["CGI_"+i]):(n=o[r]||o[i])&&!o[r]&&console.warn("The environment variable "+i+" is discouraged. Use "+r+"."),n}}}}),{get:function(o,s,a,u,c){var t=o.endpoint;h.asyncEach(this._transports,function(t,n){var e=t[0],r=t[1],i=o.endpointFor(e);return 0<=h.indexOf(a,e)?n():h.indexOf(s,e)<0?(r.isUsable(o,i,function(){}),n()):void r.isUsable(o,i,function(t){if(!t)return n();var e=r.hasOwnProperty("create")?r.create(o,i):new r(o,i);u.call(c,e)})},function(){throw new Error("Could not find a usable connection type for "+l.stringify(t))})},register:function(t,e){this._transports.push([t,e]),e.prototype.connectionType=t},getConnectionTypes:function(){return h.map(this._transports,function(t){return t[0]})},_transports:[]});r(u.prototype,e),r(u.prototype,i),f.exports=u}).call(this,c("_process"))},{"../mixins/logging":50,"../mixins/timeouts":52,"../protocol/channel":53,"../util/array":69,"../util/class":71,"../util/cookies":73,"../util/extend":76,"../util/promise":77,"../util/uri":80,_process:91}],67:[function(f,p,t){(function(t){"use strict";var e=f("../util/class"),o=f("../util/promise"),s=f("../util/set"),n=f("../util/uri"),r=f("../util/browser"),i=f("../util/copy_object"),a=f("../util/extend"),u=f("../util/to_json"),c=f("../util/websocket"),l=f("../mixins/deferrable"),h=a(e(f("./transport"),{UNCONNECTED:1,CONNECTING:2,CONNECTED:3,batching:!1,isUsable:function(t,e){this.callback(function(){t.call(e,!0)}),this.errback(function(){t.call(e,!1)}),this.connect()},request:function(n){this._pending=this._pending||new s;for(var t=0,e=n.length;t<e;t++)this._pending.add(n[t]);var r=this,i=new o(function(e,t){r.callback(function(t){t&&1===t.readyState&&(t.send(u(n)),e(t))}),r.connect()});return{abort:function(){i.then(function(t){t.close()})}}},connect:function(){if(!h._unloaded&&(this._state=this._state||this.UNCONNECTED,this._state===this.UNCONNECTED)){this._state=this.CONNECTING;var n=this._createSocket();if(!n)return this.setDeferredStatus("failed");var i=this,r=!(n.onopen=function(){n.headers&&i._storeCookies(n.headers["set-cookie"]),i._socket=n,i._state=i.CONNECTED,i._everConnected=!0,i._ping(),i.setDeferredStatus("succeeded",n)});n.onclose=n.onerror=function(){if(!r){r=!0;var t=i._state===i.CONNECTED;n.onopen=n.onclose=n.onerror=n.onmessage=null,delete i._socket,i._state=i.UNCONNECTED,i.removeTimeout("ping");var e=i._pending?i._pending.toArray():[];delete i._pending,t||i._everConnected?(i.setDeferredStatus("unknown"),i._handleError(e,t)):i.setDeferredStatus("failed")}},n.onmessage=function(t){var e;try{e=JSON.parse(t.data)}catch(t){}if(e){for(var n=0,r=(e=[].concat(e)).length;n<r;n++)void 0!==e[n].successful&&i._pending.remove(e[n]);i._receive(e)}}}},close:function(){this._socket&&this._socket.close()},_createSocket:function(){var t=h.getSocketUrl(this.endpoint),e=this._dispatcher.headers,n=this._dispatcher.wsExtensions,r=this._getCookies(),i=this._dispatcher.tls,o={extensions:n,headers:e,proxy:this._proxy,tls:i};return""!==r&&(o.headers.Cookie=r),c.create(t,[],o)},_ping:function(){this._socket&&1===this._socket.readyState&&(this._socket.send("[]"),this.addTimeout("ping",this._dispatcher.timeout/2,this._ping,this))}}),{PROTOCOLS:{"http:":"ws:","https:":"wss:"},create:function(t,e){var n=t.transports.websocket=t.transports.websocket||{};return n[e.href]=n[e.href]||new this(t,e),n[e.href]},getSocketUrl:function(t){return(t=i(t)).protocol=this.PROTOCOLS[t.protocol],n.stringify(t)},isUsable:function(t,e,n,r){this.create(t,e).isUsable(n,r)}});a(h.prototype,l),r.Event&&void 0!==t.onbeforeunload&&r.Event.on(t,"beforeunload",function(){h._unloaded=!0}),p.exports=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../mixins/deferrable":49,"../util/browser":70,"../util/class":71,"../util/copy_object":74,"../util/extend":76,"../util/promise":77,"../util/set":78,"../util/to_json":79,"../util/uri":80,"../util/websocket":82,"./transport":66}],68:[function(i,s,t){(function(u){"use strict";var t=i("../util/class"),o=i("../util/uri"),c=i("../util/browser"),e=i("../util/extend"),n=i("../util/to_json"),r=e(t(i("./transport"),{encode:function(t){return n(t)},request:function(i){var o,t=this.endpoint.href,s=this;if(u.XMLHttpRequest)o=new XMLHttpRequest;else{if(!u.ActiveXObject)return this._handleError(i);o=new ActiveXObject("Microsoft.XMLHTTP")}o.open("POST",t,!0),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Pragma","no-cache"),o.setRequestHeader("X-Requested-With","XMLHttpRequest");var e=this._dispatcher.headers;for(var n in e)e.hasOwnProperty(n)&&o.setRequestHeader(n,e[n]);var a=function(){o.abort()};return void 0!==u.onbeforeunload&&c.Event.on(u,"beforeunload",a),o.onreadystatechange=function(){if(o&&4===o.readyState){var t=null,e=o.status,n=o.responseText,r=200<=e&&e<300||304===e||1223===e;if(void 0!==u.onbeforeunload&&c.Event.detach(u,"beforeunload",a),o.onreadystatechange=function(){},o=null,!r)return s._handleError(i);try{t=JSON.parse(n)}catch(t){}t?s._receive(t):s._handleError(i)}},o.send(this.encode(i)),o}}),{isUsable:function(t,e,n,r){var i="ReactNative"===navigator.product||o.isSameOrigin(e);n.call(r,i)}});s.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util/browser":70,"../util/class":71,"../util/extend":76,"../util/to_json":79,"../util/uri":80,"./transport":66}],69:[function(t,e,n){"use strict";e.exports={commonElement:function(t,e){for(var n=0,r=t.length;n<r;n++)if(-1!==this.indexOf(e,t[n]))return t[n];return null},indexOf:function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},map:function(t,e,n){if(t.map)return t.map(e,n);var r=[];if(t instanceof Array)for(var i=0,o=t.length;i<o;i++)r.push(e.call(n||null,t[i],i));else for(var s in t)t.hasOwnProperty(s)&&r.push(e.call(n||null,s,t[s]));return r},filter:function(t,e,n){if(t.filter)return t.filter(e,n);for(var r=[],i=0,o=t.length;i<o;i++)e.call(n||null,t[i],i)&&r.push(t[i]);return r},asyncEach:function(t,e,n,r){var i=t.length,o=-1,s=0,a=!1,u=function(){if(s-=1,(o+=1)===i)return n&&n.call(r);e(t[o],c)},c=function(){s+=1,function(){if(!a){for(a=!0;0<s;)u();a=!1}}()};c()}}},{}],70:[function(t,n,e){(function(t){"use strict";var e={_registry:[],on:function(t,e,n,r){var i=function(){n.call(r)};t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent("on"+e,i),this._registry.push({_element:t,_type:e,_callback:n,_context:r,_handler:i})},detach:function(t,e,n,r){for(var i,o=this._registry.length;o--;)i=this._registry[o],t&&t!==i._element||e&&e!==i._type||n&&n!==i._callback||r&&r!==i._context||(i._element.removeEventListener?i._element.removeEventListener(i._type,i._handler,!1):i._element.detachEvent("on"+i._type,i._handler),this._registry.splice(o,1),i=null)}};void 0!==t.onunload&&e.on(t,"unload",e.detach,e),n.exports={Event:e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],71:[function(t,e,n){"use strict";var i=t("./extend");e.exports=function(t,e){"function"!=typeof t&&(e=t,t=Object);var n=function(){return this.initialize&&this.initialize.apply(this,arguments)||this},r=function(){};return r.prototype=t.prototype,n.prototype=new r,i(n.prototype,e),n}},{"./extend":76}],72:[function(t,e,n){e.exports={VERSION:"1.2.4",BAYEUX_VERSION:"1.0",ID_LENGTH:160,JSONP_CALLBACK:"jsonpcallback",CONNECTION_TYPES:["long-polling","cross-origin-long-polling","callback-polling","websocket","eventsource","in-process"],MANDATORY_CONNECTION_TYPES:["long-polling","callback-polling","in-process"]}},{}],73:[function(t,e,n){"use strict";e.exports={}},{}],74:[function(t,e,n){"use strict";var i=function(t){var e,n,r;if(t instanceof Array){for(e=[],n=t.length;n--;)e[n]=i(t[n]);return e}if("object"!=typeof t)return t;for(r in e=null===t?null:{},t)e[r]=i(t[r]);return e};e.exports=i},{}],75:[function(t,e,n){var s="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};function r(){}(e.exports=r).prototype.emit=function(t){if("error"===t&&(!this._events||!this._events.error||s(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var e=this._events[t];if(!e)return!1;if("function"==typeof e){switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:var n=Array.prototype.slice.call(arguments,1);e.apply(this,n)}return!0}if(s(e)){n=Array.prototype.slice.call(arguments,1);for(var r=e.slice(),i=0,o=r.length;i<o;i++)r[i].apply(this,n);return!0}return!1},r.prototype.on=r.prototype.addListener=function(t,e){if("function"!=typeof e)throw new Error("addListener only takes instances of Function");return this._events||(this._events={}),this.emit("newListener",t,e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,this},r.prototype.once=function(e,n){var r=this;return r.on(e,function t(){r.removeListener(e,t),n.apply(this,arguments)}),this},r.prototype.removeListener=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[t])return this;var n=this._events[t];if(s(n)){var r=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1}(n,e);if(r<0)return this;n.splice(r,1),0==n.length&&delete this._events[t]}else this._events[t]===e&&delete this._events[t];return this},r.prototype.removeAllListeners=function(t){return 0===arguments.length?this._events={}:t&&this._events&&this._events[t]&&(this._events[t]=null),this},r.prototype.listeners=function(t){return this._events||(this._events={}),this._events[t]||(this._events[t]=[]),s(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]}},{}],76:[function(t,e,n){"use strict";e.exports=function(t,e,n){if(!e)return t;for(var r in e)e.hasOwnProperty(r)&&(t.hasOwnProperty(r)&&!1===n||t[r]!==e[r]&&(t[r]=e[r]));return t}},{}],77:[function(t,e,n){"use strict";var r=t("asap"),i=function(t){return t},o=function(t){throw t},s=function(t){if(this._state=0,this._onFulfilled=[],this._onRejected=[],"function"==typeof t){var e=this;t(function(t){h(e,t)},function(t){p(e,t)})}};s.prototype.then=function(t,e){var n=new s;return a(this,t,n),u(this,e,n),n},s.prototype.catch=function(t){return this.then(null,t)};var a=function(t,e,n){"function"!=typeof e&&(e=i);var r=function(t){c(e,t,n)};0===t._state?t._onFulfilled.push(r):1===t._state&&r(t._value)},u=function(t,e,n){"function"!=typeof e&&(e=o);var r=function(t){c(e,t,n)};0===t._state?t._onRejected.push(r):2===t._state&&r(t._reason)},c=function(t,e,n){r(function(){l(t,e,n)})},l=function(t,e,n){var r;try{r=t(e)}catch(t){return p(n,t)}r===n?p(n,new TypeError("Recursive promise chain detected")):h(n,r)},h=function(e,t){var n,r,i=!1;try{if(n=typeof t,"function"!=typeof(r=null!==t&&("function"===n||"object"===n)&&t.then))return f(e,t);r.call(t,function(t){i^(i=!0)&&h(e,t)},function(t){i^(i=!0)&&p(e,t)})}catch(t){if(!(i^(i=!0)))return;p(e,t)}},f=function(t,e){if(0===t._state){t._state=1,t._value=e,t._onRejected=[];for(var n,r=t._onFulfilled;n=r.shift();)n(e)}},p=function(t,e){if(0===t._state){t._state=2,t._reason=e,t._onFulfilled=[];for(var n,r=t._onRejected;n=r.shift();)n(e)}};s.resolve=function(n){return new s(function(t,e){t(n)})},s.reject=function(n){return new s(function(t,e){e(n)})},s.all=function(e){return new s(function(n,r){var t,i=[],o=e.length;if(0===o)return n(i);for(t=0;t<o;t++)!function(t,e){s.resolve(t).then(function(t){i[e]=t,0==--o&&n(i)},r)}(e[t],t)})},s.race=function(i){return new s(function(t,e){for(var n=0,r=i.length;n<r;n++)s.resolve(i[n]).then(t,e)})},s.deferred=s.pending=function(){var n={};return n.promise=new s(function(t,e){n.resolve=t,n.reject=e}),n},e.exports=s},{asap:37}],78:[function(t,e,n){"use strict";var r=t("./class");e.exports=r({initialize:function(){this._index={}},add:function(t){var e=void 0!==t.id?t.id:t;return!this._index.hasOwnProperty(e)&&(this._index[e]=t,!0)},forEach:function(t,e){for(var n in this._index)this._index.hasOwnProperty(n)&&t.call(e,this._index[n])},isEmpty:function(){for(var t in this._index)if(this._index.hasOwnProperty(t))return!1;return!0},member:function(t){for(var e in this._index)if(this._index[e]===t)return!0;return!1},remove:function(t){var e=void 0!==t.id?t.id:t,n=this._index[e];return delete this._index[e],n},toArray:function(){var e=[];return this.forEach(function(t){e.push(t)}),e}})},{"./class":71}],79:[function(t,e,n){"use strict";e.exports=function(t){return JSON.stringify(t,function(t,e){return this[t]instanceof Array?this[t]:e})}},{}],80:[function(t,e,n){"use strict";e.exports={isURI:function(t){return t&&t.protocol&&t.host&&t.path},isSameOrigin:function(t){return t.protocol===location.protocol&&t.hostname===location.hostname&&t.port===location.port},parse:function(n){if("string"!=typeof n)return n;var t,e,r,i,o,s,a={},u=function(e,t){n=n.replace(t,function(t){return a[e]=t,""}),a[e]=a[e]||""};for(u("protocol",/^[a-z]+\:/i),u("host",/^\/\/[^\/\?#]+/),/^\//.test(n)||a.host||(n=location.pathname.replace(/[^\/]*$/,"")+n),u("pathname",/^[^\?#]*/),u("search",/^\?[^#]*/),u("hash",/^#.*/),a.protocol=a.protocol||location.protocol,a.host?(a.host=a.host.substr(2),t=a.host.split(":"),a.hostname=t[0],a.port=t[1]||""):(a.host=location.host,a.hostname=location.hostname,a.port=location.port),a.pathname=a.pathname||"/",a.path=a.pathname+a.search,s={},i=0,o=(r=(e=a.search.replace(/^\?/,""))?e.split("&"):[]).length;i<o;i++)t=r[i].split("="),s[decodeURIComponent(t[0]||"")]=decodeURIComponent(t[1]||"");return a.query=s,a.href=this.stringify(a),a},stringify:function(t){var e=t.protocol+"//"+t.hostname;return t.port&&(e+=":"+t.port),e+=t.pathname+this.queryString(t.query)+(t.hash||"")},queryString:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return 0===e.length?"":"?"+e.join("&")}}},{}],81:[function(t,e,n){"use strict";var r=t("./array");e.exports=function(t,e){for(var n in t)if(r.indexOf(e,n)<0)throw new Error("Unrecognized option: "+n)}},{"./array":69}],82:[function(t,e,n){(function(t){"use strict";var r=t.MozWebSocket||t.WebSocket;e.exports={create:function(t,e,n){return"function"!=typeof r?null:new r(t)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],83:[function(t,e,n){n.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,h=n?i-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;0<l;o=256*o+t[e+h],h+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;0<l;s=256*s+t[e+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=c}return(p?-1:1)*s*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),2<=(e+=1<=s+h?f/u:f*Math.pow(2,1-h))*u&&(s++,u/=2),l<=s+h?(a=0,s=l):1<=s+h?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));8<=i;t[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;0<c;t[n+p]=255&s,p+=d,s/=256,c-=8);t[n+p-d]|=128*y}},{}],84:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],85:[function(t,e,n){function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}e.exports=function(t){return null!=t&&(r(t)||"function"==typeof(e=t).readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))||!!t._isBuffer);var e}},{}],86:[function(t,e,n){var r={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},{}],87:[function(t,V,e){(function(t){var e="Expected a function",r="__lodash_hash_undefined__",n=1/0,i="[object Function]",o="[object GeneratorFunction]",s="[object Symbol]",a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/,c=/^\./,l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h=/\\(\\)?/g,f=/^\[object .+?Constructor\]$/,p="object"==typeof t&&t&&t.Object===Object&&t,d="object"==typeof self&&self&&self.Object===Object&&self,y=p||d||Function("return this")();var m,g=Array.prototype,v=Function.prototype,b=Object.prototype,_=y["__core-js_shared__"],w=(m=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"",T=v.toString,E=b.hasOwnProperty,x=b.toString,S=RegExp("^"+T.call(E).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),C=y.Symbol,N=g.splice,k=P(y,"Map"),I=P(Object,"create"),D=C?C.prototype:void 0,A=D?D.toString:void 0;function O(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function j(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function L(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function R(t,e){for(var n,r,i=t.length;i--;)if((n=t[i][0])===(r=e)||n!=n&&r!=r)return i;return-1}function M(t,e){for(var n,r=0,i=(e=function(t,e){if(X(t))return!1;var n=typeof t;if("number"==n||"symbol"==n||"boolean"==n||null==t||z(t))return!0;return u.test(t)||!a.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:X(n=e)?n:$(n)).length;null!=t&&r<i;)t=t[B(e[r++])];return r&&r==i?t:void 0}function U(t){return!(!H(t)||(e=t,w&&w in e))&&((r=H(n=t)?x.call(n):"")==i||r==o||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?S:f).test(function(t){if(null!=t){try{return T.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e,n,r}function q(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function P(t,e){var n,r,i=(r=e,null==(n=t)?void 0:n[r]);return U(i)?i:void 0}O.prototype.clear=function(){this.__data__=I?I(null):{}},O.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},O.prototype.get=function(t){var e=this.__data__;if(I){var n=e[t];return n===r?void 0:n}return E.call(e,t)?e[t]:void 0},O.prototype.has=function(t){var e=this.__data__;return I?void 0!==e[t]:E.call(e,t)},O.prototype.set=function(t,e){return this.__data__[t]=I&&void 0===e?r:e,this},j.prototype.clear=function(){this.__data__=[]},j.prototype.delete=function(t){var e=this.__data__,n=R(e,t);return!(n<0||(n==e.length-1?e.pop():N.call(e,n,1),0))},j.prototype.get=function(t){var e=this.__data__,n=R(e,t);return n<0?void 0:e[n][1]},j.prototype.has=function(t){return-1<R(this.__data__,t)},j.prototype.set=function(t,e){var n=this.__data__,r=R(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},L.prototype.clear=function(){this.__data__={hash:new O,map:new(k||j),string:new O}},L.prototype.delete=function(t){return q(this,t).delete(t)},L.prototype.get=function(t){return q(this,t).get(t)},L.prototype.has=function(t){return q(this,t).has(t)},L.prototype.set=function(t,e){return q(this,t).set(t,e),this};var $=F(function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(z(t))return A?A.call(t):"";var e=t+"";return"0"==e&&1/t==-n?"-0":e}(e);var i=[];return c.test(t)&&i.push(""),t.replace(l,function(t,e,n,r){i.push(n?r.replace(h,"$1"):e||t)}),i});function B(t){if("string"==typeof t||z(t))return t;var e=t+"";return"0"==e&&1/t==-n?"-0":e}function F(i,o){if("function"!=typeof i||o&&"function"!=typeof o)throw new TypeError(e);var s=function(){var t=arguments,e=o?o.apply(this,t):t[0],n=s.cache;if(n.has(e))return n.get(e);var r=i.apply(this,t);return s.cache=n.set(e,r),r};return s.cache=new(F.Cache||L),s}F.Cache=L;var X=Array.isArray;function H(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function z(t){return"symbol"==typeof t||!!(e=t)&&"object"==typeof e&&x.call(t)==s;var e}V.exports=function(t,e,n){var r=null==t?void 0:M(t,e);return void 0===r?n:r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],88:[function(t,le,he){(function(ce){(function(){var _,i="Expected a function",w=1,T=2,a=9007199254740991,E="[object Arguments]",x="[object Array]",n="[object AsyncFunction]",S="[object Boolean]",C="[object Date]",N="[object Error]",r="[object Function]",o="[object GeneratorFunction]",k="[object Number]",I="[object Object]",s="[object Proxy]",D="[object RegExp]",A="[object String]",e=/[&<>"']/g,u=RegExp(e.source),c=/^(?:0|[1-9]\d*)$/,t="object"==typeof ce&&ce&&ce.Object===Object&&ce,l="object"==typeof self&&self&&self.Object===Object&&self,f=t||l||Function("return this")(),h="object"==typeof he&&he&&!he.nodeType&&he,p=h&&"object"==typeof le&&le&&!le.nodeType&&le;function d(t,e){return t.push.apply(t,e),t}function y(e){return function(t){return null==t?_:t[e]}}var m,g=(m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},function(t){return null==m?_:m[t]});var v,b,O=Array.prototype,j=Object.prototype,L=j.hasOwnProperty,R=0,M=j.toString,U=f._,q=Object.create,P=j.propertyIsEnumerable,$=f.isFinite,B=(v=Object.keys,b=Object,function(t){return v(b(t))}),F=Math.max;function X(t){return t instanceof z?t:new z(t)}var H=function(){function n(){}return function(t){if(!Ft(t))return{};if(q)return q(t);n.prototype=t;var e=new n;return n.prototype=_,e}}();function z(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e}function V(t,e,n){t[e]=n}function W(t,e,n){if("function"!=typeof t)throw new TypeError(i);return setTimeout(function(){t.apply(_,n)},e)}(z.prototype=H(X.prototype)).constructor=z;var G,J,Y=(G=nt,function(t,e){if(null==t)return t;if(!Pt(t))return G(t,e);for(var n=t.length,r=J?n:-1,i=Object(t);(J?r--:++r<n)&&!1!==e(i[r],r,i););return t});function Q(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],s=e(o);if(null!=s&&(a===_?s==s:n(s,a)))var a=s,u=o}return u}function K(t,r){var i=[];return Y(t,function(t,e,n){r(t,e,n)&&i.push(t)}),i}function Z(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=bt),i||(i=[]);++o<s;){var a=t[o];0<e&&n(a)?1<e?Z(a,e-1,n,r,i):d(i,a):r||(i[i.length]=a)}return i}var tt,et=function(t,e,n){for(var r=-1,i=Object(t),o=n(t),s=o.length;s--;){var a=o[tt?s:++r];if(!1===e(i[a],a,i))break}return t};function nt(t,e){return t&&et(t,e,te)}function rt(e,t){return K(t,function(t){return Bt(e[t])})}function it(t){return e=t,M.call(e);var e}function ot(t,e){return e<t}var st=ue;function at(t,e,n,r,i){return t===e||(null==t||null==e||!Xt(t)&&!Xt(e)?t!=t&&e!=e:function(e,n,t,r,i,o){var s=qt(e),a=qt(n),u=s?x:it(e),c=a?x:it(n),l=(u=u==E?I:u)==I,h=(c=c==E?I:c)==I,f=u==c;o||(o=[]);var p=It(o,function(t){return t[0]==e}),d=It(o,function(t){return t[0]==n});if(p&&d)return p[1]==n;if(o.push([e,n]),o.push([n,e]),f&&!l){var y=s?function(t,e,n,r,i,o){var s=n&w,a=t.length,u=e.length;if(a!=u&&!(s&&a<u))return!1;var c=-1,l=!0,h=n&T?[]:_;for(;++c<a;){var f=t[c],p=e[c];if(void 0!==_){void 0,l=!1;break}if(h){if(!yt(e,function(t,e){if(!Ct(h,e)&&(f===t||i(f,t,n,r,o)))return h.push(e)})){l=!1;break}}else if(f!==p&&!i(f,p,n,r,o)){l=!1;break}}return l}(e,n,t,r,i,o):function(t,e,n,r,i,o,s){switch(n){case S:case C:case k:return Mt(+t,+e);case N:return t.name==e.name&&t.message==e.message;case D:case A:return t==e+""}return!1}(e,n,u);return o.pop(),y}if(!(t&w)){var m=l&&L.call(e,"__wrapped__"),g=h&&L.call(n,"__wrapped__");if(m||g){var v=m?e.value():e,b=g?n.value():n,y=i(v,b,t,r,o);return o.pop(),y}}if(!f)return!1;var y=function(t,e,n,r,i,o){var s=n&w,a=te(t),u=a.length,c=te(e).length;if(u!=c&&!s)return!1;var l=u;for(;l--;){var h=a[l];if(!(s?h in e:L.call(e,h)))return!1}var f=!0,p=s;for(;++l<u;){h=a[l];var d=t[h],y=e[h];if(!(void 0===_?d===y||i(d,y,n,r,o):void 0)){f=!1;break}p||(p="constructor"==h)}if(f&&!p){var m=t.constructor,g=e.constructor;m!=g&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof g&&g instanceof g)&&(f=!1)}return f}(e,n,t,r,i,o);return o.pop(),y}(t,e,n,r,at,i))}function ut(t){return"function"==typeof t?t:null==t?ie:("object"==typeof t?ht:y)(t)}function ct(t,e){return t<e}function lt(t,r){var i=-1,o=Pt(t)?Array(t.length):[];return Y(t,function(t,e,n){o[++i]=r(t,e,n)}),o}function ht(r){var i=B(r);return function(t){var e=i.length;if(null==t)return!e;for(t=Object(t);e--;){var n=i[e];if(!(n in t&&at(r[n],t[n],w|T)))return!1}return!0}}function ft(t,e){return Et(Tt(t,e,ie),t+"")}function pt(t,e,n){var r=-1,i=t.length;e<0&&(e=i<-e?0:i+e),(n=i<n?i:n)<0&&(n+=i),i=n<e?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}function dt(t){return pt(t,0,t.length)}function yt(t,r){var i;return Y(t,function(t,e,n){return!(i=r(t,e,n))}),!!i}function mt(t,e,n,r){var i=!n;n||(n={});for(var o,s,a,u,c=-1,l=e.length;++c<l;){var h=e[c],f=r?r(n[h],t[h],h,n,t):_;f===_&&(f=t[h]),i?V(n,h,f):(a=f,void 0,u=(o=n)[s=h],L.call(o,s)&&Mt(u,a)&&(a!==_||s in o)||V(o,s,a))}return n}function gt(s){return ft(function(t,e){var n=-1,r=e.length,i=1<r?e[r-1]:_;for(i=3<s.length&&"function"==typeof i?(r--,i):_,t=Object(t);++n<r;){var o=e[n];o&&s(t,o,n,i)}return t})}function vt(a,t,u,c){if("function"!=typeof a)throw new TypeError(i);var r,l=1&t,h=(r=a,function(){var t=arguments,e=H(r.prototype),n=r.apply(e,t);return Ft(n)?n:e});return function t(){for(var e=-1,n=arguments.length,r=-1,i=c.length,o=Array(i+n),s=this&&this!==f&&this instanceof t?h:a;++r<i;)o[r]=c[r];for(;n--;)o[r++]=arguments[++e];return s.apply(l?u:this,o)}}function bt(t){return qt(t)||Ut(t)}function _t(t,e,n){if(!Ft(n))return!1;var r,i,o,s=typeof e;return!!("number"==s?Pt(n)&&(r=e,i=n.length,o=typeof r,(i=null==i?a:i)&&("number"==o||"symbol"!=o&&c.test(r))&&-1<r&&r%1==0&&r<i):"string"==s&&e in n)&&Mt(n[e],t)}function wt(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}function Tt(o,s,a){return s=F(s===_?o.length-1:s,0),function(){for(var t=arguments,e=-1,n=F(t.length-s,0),r=Array(n);++e<n;)r[e]=t[s+e];e=-1;for(var i=Array(s+1);++e<s;)i[e]=t[e];return i[s]=a(r),o.apply(this,i)}}var Et=ie;function xt(t){return(null==t?0:t.length)?Z(t,1):[]}function St(t){return t&&t.length?t[0]:_}function Ct(t,e,n){for(var r=null==t?0:t.length,i=((n="number"==typeof n?n<0?F(r+n,0):n:0)||0)-1,o=e==e;++i<r;){var s=t[i];if(o?s===e:s!=s)return i}return-1}function Nt(t){var e=X(t);return e.__chain__=!0,e}var kt,It=(kt=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Wt(n);return i<0&&(i=F(r+i,0)),function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}(t,ut(e),i)},function(t,e,n){var r=Object(t);if(!Pt(t)){var i=ut(e);t=te(t),e=function(t){return i(r[t],t,r)}}var o=kt(t,e,n);return-1<o?r[i?t[o]:o]:_});function Dt(t,e){return Y(t,ut(e))}function At(t,e,n){return r=t,i=ut(e),o=n,s=arguments.length<3,Y(r,function(t,e,n){o=s?(s=!1,t):i(o,t,e,n)}),o;var r,i,o,s}function Ot(t,e){var n;if("function"!=typeof e)throw new TypeError(i);return t=Wt(t),function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=_),n}}var jt=ft(function(t,e,n){return vt(t,33,e,n)}),Lt=ft(function(t,e){return W(t,1,e)}),Rt=ft(function(t,e,n){return W(t,Gt(e)||0,n)});function Mt(t,e){return t===e||t!=t&&e!=e}var Ut=st(function(){return arguments}())?st:function(t){return Xt(t)&&L.call(t,"callee")&&!P.call(t,"callee")},qt=Array.isArray;function Pt(t){return null!=t&&("number"==typeof(e=t.length)&&-1<e&&e%1==0&&e<=a)&&!Bt(t);var e}var $t=function(t){return Xt(t)&&it(t)==C};function Bt(t){if(!Ft(t))return!1;var e=it(t);return e==r||e==o||e==n||e==s}function Ft(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Xt(t){return null!=t&&"object"==typeof t}function Ht(t){return"number"==typeof t||Xt(t)&&it(t)==k}var zt=function(t){return Xt(t)&&it(t)==D};function Vt(t){return"string"==typeof t||!qt(t)&&Xt(t)&&it(t)==A}var Wt=Number,Gt=Number;function Jt(t){return"string"==typeof t?t:null==t?"":t+""}var Yt=gt(function(t,e){mt(e,B(e),t)}),Qt=gt(function(t,e){mt(e,wt(e),t)});var Kt=ft(function(t,e){t=Object(t);var n=-1,r=e.length,i=2<r?e[2]:_;for(i&&_t(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],s=ee(o),a=-1,u=s.length;++a<u;){var c=s[a],l=t[c];(l===_||Mt(l,j[c])&&!L.call(t,c))&&(t[c]=o[c])}return t});var Zt,te=B,ee=wt,ne=Et(Tt(Zt=function(t,e){return null==t?{}:(n=t,r=e,n=Object(n),At(r,function(t,e){return e in n&&(t[e]=n[e]),t},{}));var n,r},_,xt),Zt+"");function re(t){return null==t?[]:lt(te(e=t),function(t){return e[t]});var e}function ie(t){return t}var oe,se=ut;function ae(r,e,t){var n=te(e),i=rt(e,n);null!=t||Ft(e)&&(i.length||!n.length)||(t=e,e=r,r=this,i=rt(e,te(e)));var o=!(Ft(t)&&"chain"in t&&!t.chain),s=Bt(r);return Y(i,function(t){var n=e[t];r[t]=n,s&&(r.prototype[t]=function(){var t=this.__chain__;if(o||t){var e=r(this.__wrapped__);return(e.__actions__=dt(this.__actions__)).push({func:n,args:arguments,thisArg:r}),e.__chain__=t,e}return n.apply(r,d([this.value()],arguments))})}),r}function ue(){}X.assignIn=Qt,X.before=Ot,X.bind=jt,X.chain=Nt,X.compact=function(t){return K(t,Boolean)},X.concat=function(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return d(qt(n)?dt(n):[n],Z(e,1))},X.create=function(t,e){var n=H(t);return null==e?n:Yt(n,e)},X.defaults=Kt,X.defer=Lt,X.delay=Rt,X.filter=function(t,e){return K(t,ut(e))},X.flatten=xt,X.flattenDeep=function(t){return null!=t&&t.length?Z(t,1/0):[]},X.iteratee=se,X.keys=te,X.map=function(t,e){return lt(t,ut(e))},X.matches=function(t){return ht(Yt({},t))},X.mixin=ae,X.negate=function(e){if("function"!=typeof e)throw new TypeError(i);return function(){var t=arguments;return!e.apply(this,t)}},X.once=function(t){return Ot(2,t)},X.pick=ne,X.slice=function(t,e,n){var r=null==t?0:t.length;return e=null==e?0:+e,n=n===_?r:+n,r?pt(t,e,n):[]},X.sortBy=function(t,r){var i=0;return r=ut(r),lt(lt(t,function(t,e,n){return{value:t,index:i++,criteria:r(t,e,n)}}).sort(function(t,e){return function(t,e){if(t!==e){var n=t!==_,r=null===t,i=t==t,o=e!==_,s=null===e,a=e==e;if(!s&&e<t||r&&o&&a||!n&&a||!i)return 1;if(!r&&t<e||s&&n&&i||!o&&i||!a)return-1}return 0}(t.criteria,e.criteria)||t.index-e.index}),y("value"))},X.tap=function(t,e){return e(t),t},X.thru=function(t,e){return e(t)},X.toArray=function(t){return Pt(t)?t.length?dt(t):[]:re(t)},X.values=re,X.extend=Qt,ae(X,X),X.clone=function(t){return Ft(t)?qt(t)?dt(t):mt(t,B(t)):t},X.escape=function(t){return(t=Jt(t))&&u.test(t)?t.replace(e,g):t},X.every=function(t,e,n){return r=t,i=ut(e=n?_:e),o=!0,Y(r,function(t,e,n){return o=!!i(t,e,n)}),o;var r,i,o},X.find=It,X.forEach=Dt,X.has=function(t,e){return null!=t&&L.call(t,e)},X.head=St,X.identity=ie,X.indexOf=Ct,X.isArguments=Ut,X.isArray=qt,X.isBoolean=function(t){return!0===t||!1===t||Xt(t)&&it(t)==S},X.isDate=$t,X.isEmpty=function(t){return Pt(t)&&(qt(t)||Vt(t)||Bt(t.splice)||Ut(t))?!t.length:!B(t).length},X.isEqual=function(t,e){return at(t,e)},X.isFinite=function(t){return"number"==typeof t&&$(t)},X.isFunction=Bt,X.isNaN=function(t){return Ht(t)&&t!=+t},X.isNull=function(t){return null===t},X.isNumber=Ht,X.isObject=Ft,X.isRegExp=zt,X.isString=Vt,X.isUndefined=function(t){return t===_},X.last=function(t){var e=null==t?0:t.length;return e?t[e-1]:_},X.max=function(t){return t&&t.length?Q(t,ie,ot):_},X.min=function(t){return t&&t.length?Q(t,ie,ct):_},X.noConflict=function(){return f._===this&&(f._=U),this},X.noop=ue,X.reduce=At,X.result=function(t,e,n){var r=null==t?_:t[e];return r===_&&(r=n),Bt(r)?r.call(t):r},X.size=function(t){return null==t?0:(t=Pt(t)?t:B(t)).length},X.some=function(t,e,n){return yt(t,ut(e=n?_:e))},X.uniqueId=function(t){var e=++R;return Jt(t)+e},X.each=Dt,X.first=St,ae(X,(oe={},nt(X,function(t,e){L.call(X.prototype,e)||(oe[e]=t)}),oe),{chain:!1}),X.VERSION="4.17.10",Y(["pop","join","replace","reverse","split","push","shift","sort","splice","unshift"],function(t){var n=(/^(?:replace|split)$/.test(t)?String.prototype:O)[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|join|replace|shift)$/.test(t);X.prototype[t]=function(){var e=arguments;if(!i||this.__chain__)return this[r](function(t){return n.apply(qt(t)?t:[],e)});var t=this.value();return n.apply(qt(t)?t:[],e)}}),X.prototype.toJSON=X.prototype.valueOf=X.prototype.value=function(){return t=this.__wrapped__,At(this.__actions__,function(t,e){return e.func.apply(e.thisArg,d([t],e.args))},t);var t},p?((p.exports=X)._=X,h._=X):f._=X}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],89:[function(t,e,n){e.exports=o;var r=t("inherits"),i=t("readable-stream");function o(t,e){var n=this;if(!(n instanceof o))return new o(t,e);i.Readable.call(n,e),n.destroyed=!1,n._drained=!1,n._forwarding=!1,n._current=null,n._toStreams2=e&&e.objectMode?s:a,"function"==typeof t?n._queue=t:(n._queue=t.map(n._toStreams2),n._queue.forEach(function(t){"function"!=typeof t&&n._attachErrorListener(t)})),n._next()}function s(t){return u(t,{objectMode:!0,highWaterMark:16})}function a(t){return u(t)}function u(t,e){if(!t||"function"==typeof t||t._readableState)return t;var n=new i.Readable(e).wrap(t);return t.destroy&&(n.destroy=t.destroy.bind(t)),n}r(o,i.Readable),o.obj=function(t){return new o(t,{objectMode:!0,highWaterMark:16})},o.prototype._read=function(){this._drained=!0,this._forward()},o.prototype._forward=function(){if(!this._forwarding&&this._drained&&this._current){var t;for(this._forwarding=!0;null!==(t=this._current.read());)this._drained=this.push(t);this._forwarding=!1}},o.prototype.destroy=function(t){this.destroyed||(this.destroyed=!0,this._current&&this._current.destroy&&this._current.destroy(),"function"!=typeof this._queue&&this._queue.forEach(function(t){t.destroy&&t.destroy()}),t&&this.emit("error",t),this.emit("close"))},o.prototype._next=function(){var n=this;if(n._current=null,"function"==typeof n._queue)n._queue(function(t,e){if(t)return n.destroy(t);e=n._toStreams2(e),n._attachErrorListener(e),n._gotNextStream(e)});else{var t=n._queue.shift();"function"==typeof t&&(t=n._toStreams2(t()),n._attachErrorListener(t)),n._gotNextStream(t)}},o.prototype._gotNextStream=function(e){var n=this;if(!e)return n.push(null),void n.destroy();function r(){n._forward()}function i(){e._readableState.ended||n.destroy()}n._current=e,n._forward(),e.on("readable",r),e.once("end",function t(){n._current=null;e.removeListener("readable",r);e.removeListener("end",t);e.removeListener("close",i);n._next()}),e.once("close",i)},o.prototype._attachErrorListener=function(n){var r=this;n&&n.once("error",function t(e){n.removeListener("error",t);r.destroy(e)})}},{inherits:84,"readable-stream":107}],90:[function(t,e,n){(function(a){"use strict";!a.version||0===a.version.indexOf("v0.")||0===a.version.indexOf("v1.")&&0!==a.version.indexOf("v1.8.")?e.exports={nextTick:function(t,e,n,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var i,o,s=arguments.length;switch(s){case 0:case 1:return a.nextTick(t);case 2:return a.nextTick(function(){t.call(null,e)});case 3:return a.nextTick(function(){t.call(null,e,n)});case 4:return a.nextTick(function(){t.call(null,e,n,r)});default:for(i=new Array(s-1),o=0;o<i.length;)i[o++]=arguments[o];return a.nextTick(function(){t.apply(null,i)})}}}:e.exports=a}).call(this,t("_process"))},{_process:91}],91:[function(t,e,n){var r,i,o=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(t){r=s}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var c,l=[],h=!1,f=-1;function p(){h&&c&&(h=!1,c.length?l=c.concat(l):f=-1,l.length&&d())}function d(){if(!h){var t=u(p);h=!0;for(var e=l.length;e;){for(c=l,l=[];++f<e;)c&&c[f].run();f=-1,e=l.length}c=null,h=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function y(t,e){this.fun=t,this.array=e}function m(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new y(t,e)),1!==l.length||h||u(d)},y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],92:[function(t,e,n){"use strict";var i=t("asap/raw");function s(){}var o=null,a={};function u(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("Promise constructor's argument is not a function");this._40=0,this._65=0,this._55=null,this._72=null,t!==s&&p(t,this)}function c(t,e){for(;3===t._65;)t=t._55;if(u._37&&u._37(t),0===t._65)return 0===t._40?(t._40=1,void(t._72=e)):1===t._40?(t._40=2,void(t._72=[t._72,e])):void t._72.push(e);var n,r;n=t,r=e,i(function(){var t=1===n._65?r.onFulfilled:r.onRejected;if(null!==t){var e=function(t,e){try{return t(e)}catch(t){return o=t,a}}(t,n._55);e===a?h(r.promise,o):l(r.promise,e)}else 1===n._65?l(r.promise,n._55):h(r.promise,n._55)})}function l(t,e){if(e===t)return h(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var n=function(t){try{return t.then}catch(t){return o=t,a}}(e);if(n===a)return h(t,o);if(n===t.then&&e instanceof u)return t._65=3,t._55=e,void r(t);if("function"==typeof n)return void p(n.bind(e),t)}t._65=1,t._55=e,r(t)}function h(t,e){t._65=2,t._55=e,u._87&&u._87(t,e),r(t)}function r(t){if(1===t._40&&(c(t,t._72),t._72=null),2===t._40){for(var e=0;e<t._72.length;e++)c(t,t._72[e]);t._72=null}}function f(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function p(t,e){var n=!1,r=function(t,e,n){try{t(e,n)}catch(t){return o=t,a}}(t,function(t){n||(n=!0,l(e,t))},function(t){n||(n=!0,h(e,t))});n||r!==a||(n=!0,h(e,o))}(e.exports=u)._37=null,u._87=null,u._61=s,u.prototype.then=function(t,e){if(this.constructor!==u)return i=t,o=e,new(r=this).constructor(function(t,e){var n=new u(s);n.then(t,e),c(r,new f(i,o,n))});var r,i,o,n=new u(s);return c(this,new f(t,e,n)),n}},{"asap/raw":38}],93:[function(t,e,n){"use strict";var u=t("./core.js");e.exports=u;var r=l(!0),i=l(!1),o=l(null),s=l(void 0),a=l(0),c=l("");function l(t){var e=new u(u._61);return e._65=1,e._55=t,e}u.resolve=function(t){if(t instanceof u)return t;if(null===t)return o;if(void 0===t)return s;if(!0===t)return r;if(!1===t)return i;if(0===t)return a;if(""===t)return c;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new u(e.bind(t))}catch(n){return new u(function(t,e){e(n)})}return l(t)},u.all=function(t){var a=Array.prototype.slice.call(t);return new u(function(r,i){if(0===a.length)return r([]);var o=a.length;function s(e,t){if(t&&("object"==typeof t||"function"==typeof t)){if(t instanceof u&&t.then===u.prototype.then){for(;3===t._65;)t=t._55;return 1===t._65?s(e,t._55):(2===t._65&&i(t._55),void t.then(function(t){s(e,t)},i))}var n=t.then;if("function"==typeof n)return void new u(n.bind(t)).then(function(t){s(e,t)},i)}a[e]=t,0==--o&&r(a)}for(var t=0;t<a.length;t++)s(t,a[t])})},u.reject=function(n){return new u(function(t,e){e(n)})},u.race=function(t){return new u(function(e,n){t.forEach(function(t){u.resolve(t).then(e,n)})})},u.prototype.catch=function(t){return this.then(null,t)}},{"./core.js":92}],94:[function(t,e,n){e.exports=function(t,e,n,r){e=e||"&",n=n||"=";var i={};if("string"!=typeof t||0===t.length)return i;var o=/\+/g;t=t.split(e);var s=1e3;r&&"number"==typeof r.maxKeys&&(s=r.maxKeys);var a,u,c=t.length;0<s&&s<c&&(c=s);for(var l=0;l<c;++l){var h,f,p,d,y=t[l].replace(o,"%20"),m=y.indexOf(n);f=0<=m?(h=y.substr(0,m),y.substr(m+1)):(h=y,""),p=decodeURIComponent(h),d=decodeURIComponent(f),a=i,u=p,Object.prototype.hasOwnProperty.call(a,u)?g(i[p])?i[p].push(d):i[p]=[i[p],d]:i[p]=d}return i};var g=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],95:[function(t,e,n){var o=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(n,r,i,t){return r=r||"&",i=i||"=",null===n&&(n=void 0),"object"==typeof n?a(u(n),function(t){var e=encodeURIComponent(o(t))+i;return s(n[t])?a(n[t],function(t){return e+encodeURIComponent(o(t))}).join(r):e+encodeURIComponent(o(n[t]))}).join(r):t?encodeURIComponent(o(t))+i+encodeURIComponent(o(n)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function a(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var u=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},{}],96:[function(t,e,n){"use strict";n.decode=n.parse=t("./decode"),n.encode=n.stringify=t("./encode")},{"./decode":94,"./encode":95}],97:[function(t,e,n){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":98}],98:[function(t,e,n){var r=t("process-nextick-args"),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};e.exports=h;var o=t("core-util-is");o.inherits=t("inherits");var s=t("./_stream_readable"),a=t("./_stream_writable");o.inherits(h,s);for(var u=i(a.prototype),c=0;c<u.length;c++){var l=u[c];h.prototype[l]||(h.prototype[l]=a.prototype[l])}function h(t){if(!(this instanceof h))return new h(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(p,this)}function p(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},{"./_stream_readable":100,"./_stream_writable":102,"core-util-is":42,inherits:84,"process-nextick-args":90}],99:[function(t,e,n){e.exports=o;var r=t("./_stream_transform"),i=t("core-util-is");function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}i.inherits=t("inherits"),i.inherits(o,r),o.prototype._transform=function(t,e,n){n(null,t)}},{"./_stream_transform":101,"core-util-is":42,inherits:84}],100:[function(j,L,t){(function(m,t){var g=j("process-nextick-args");L.exports=f;var s,v=j("isarray");f.ReadableState=o;j("events").EventEmitter;var b=function(t,e){return t.listeners(e).length},i=j("./internal/streams/stream"),c=j("safe-buffer").Buffer,l=t.Uint8Array||function(){};var e=j("core-util-is");e.inherits=j("inherits");var n=j("util"),_=void 0;_=n&&n.debuglog?n.debuglog("stream"):function(){};var a,u=j("./internal/streams/BufferList"),r=j("./internal/streams/destroy");e.inherits(f,i);var h=["error","close","destroy","pause","resume"];function o(t,e){t=t||{};var n=e instanceof(s=s||j("./_stream_duplex"));this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,i=t.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(i||0===i)?i:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(a||(a=j("string_decoder/").StringDecoder),this.decoder=new a(t.encoding),this.encoding=t.encoding)}function f(t){if(s=s||j("./_stream_duplex"),!(this instanceof f))return new f(t);this._readableState=new o(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),i.call(this)}function p(t,e,n,r,i){var o,s,a,u=t._readableState;null===e?(u.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,T(t)}(t,u)):(i||(o=function(t,e){var n;r=e,c.isBuffer(r)||r instanceof l||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(u,e)),o?t.emit("error",o):u.objectMode||e&&0<e.length?("string"==typeof e||u.objectMode||Object.getPrototypeOf(e)===c.prototype||(s=e,e=c.from(s)),r?u.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):d(t,u,e,!0):u.ended?t.emit("error",new Error("stream.push() after EOF")):(u.reading=!1,u.decoder&&!n?(e=u.decoder.write(e),u.objectMode||0!==e.length?d(t,u,e,!1):x(t,u)):d(t,u,e,!1))):r||(u.reading=!1));return!(a=u).ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function d(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&T(t)),x(t,e)}Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),f.prototype.destroy=r.destroy,f.prototype._undestroy=r.undestroy,f.prototype._destroy=function(t,e){this.push(null),e(t)},f.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=c.from(t,e),e=""),n=!0),p(this,t,e,!1,n)},f.prototype.unshift=function(t){return p(this,t,null,!0,!1)},f.prototype.isPaused=function(){return!1===this._readableState.flowing},f.prototype.setEncoding=function(t){return a||(a=j("string_decoder/").StringDecoder),this._readableState.decoder=new a(t),this._readableState.encoding=t,this};var y=8388608;function w(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=(y<=(n=t)?n=y:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0));var n}function T(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(_("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?g.nextTick(E,t):E(t))}function E(t){_("emit readable"),t.emit("readable"),k(t)}function x(t,e){e.readingMore||(e.readingMore=!0,g.nextTick(S,t,e))}function S(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(_("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function C(t){_("readable nexttick read 0"),t.read(0)}function N(t,e){e.reading||(_("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),k(t),e.flowing&&!e.reading&&t.read(0)}function k(t){var e=t._readableState;for(_("flow",e.flowing);e.flowing&&null!==t.read(););}function I(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;t-=i.length;for(;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),0===(t-=s)){s===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n).data=o.slice(s);break}++r}return e.length-=r,i}(t,e):function(t,e){var n=c.allocUnsafe(t),r=e.head,i=1;r.data.copy(n),t-=r.data.length;for(;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,s),0===(t-=s)){s===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r).data=o.slice(s);break}++i}return e.length-=i,n}(t,e);return r}(t,e.buffer,e.decoder),n);var n}function D(t){var e=t._readableState;if(0<e.length)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,g.nextTick(A,e,t))}function A(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function O(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}f.prototype.read=function(t){_("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return _("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?D(this):T(this),null;if(0===(t=w(t,e))&&e.ended)return 0===e.length&&D(this),null;var r,i=e.needReadable;return _("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&_("length less than watermark",i=!0),e.ended||e.reading?_("reading or ended",i=!1):i&&(_("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=w(n,e))),null===(r=0<t?I(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&D(this)),null!==r&&this.emit("data",r),r},f.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},f.prototype.pipe=function(n,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=n;break;case 1:i.pipes=[i.pipes,n];break;default:i.pipes.push(n)}i.pipesCount+=1,_("pipe count=%d opts=%j",i.pipesCount,t);var e=(!t||!1!==t.end)&&n!==m.stdout&&n!==m.stderr?s:y;function o(t,e){_("onunpipe"),t===r&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,_("cleanup"),n.removeListener("close",p),n.removeListener("finish",d),n.removeListener("drain",u),n.removeListener("error",f),n.removeListener("unpipe",o),r.removeListener("end",s),r.removeListener("end",y),r.removeListener("data",h),c=!0,!i.awaitDrain||n._writableState&&!n._writableState.needDrain||u())}function s(){_("onend"),n.end()}i.endEmitted?g.nextTick(e):r.once("end",e),n.on("unpipe",o);var a,u=(a=r,function(){var t=a._readableState;_("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&b(a,"data")&&(t.flowing=!0,k(a))});n.on("drain",u);var c=!1;var l=!1;function h(t){_("ondata"),(l=!1)!==n.write(t)||l||((1===i.pipesCount&&i.pipes===n||1<i.pipesCount&&-1!==O(i.pipes,n))&&!c&&(_("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,l=!0),r.pause())}function f(t){_("onerror",t),y(),n.removeListener("error",f),0===b(n,"error")&&n.emit("error",t)}function p(){n.removeListener("finish",d),y()}function d(){_("onfinish"),n.removeListener("close",p),y()}function y(){_("unpipe"),r.unpipe(n)}return r.on("data",h),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?v(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(n,"error",f),n.once("close",p),n.once("finish",d),n.emit("pipe",r),i.flowing||(_("pipe resume"),r.resume()),n},f.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var s=O(e.pipes,t);return-1===s||(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},f.prototype.addListener=f.prototype.on=function(t,e){var n=i.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&T(this):g.nextTick(C,this))}return n},f.prototype.resume=function(){var t,e,n=this._readableState;return n.flowing||(_("resume"),n.flowing=!0,t=this,(e=n).resumeScheduled||(e.resumeScheduled=!0,g.nextTick(N,t,e))),this},f.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this},f.prototype.wrap=function(e){var n=this,r=this._readableState,i=!1;for(var t in e.on("end",function(){if(_("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&n.push(t)}n.push(null)}),e.on("data",function(t){(_("wrapped data"),r.decoder&&(t=r.decoder.write(t)),r.objectMode&&null==t)||(r.objectMode||t&&t.length)&&(n.push(t)||(i=!0,e.pause()))}),e)void 0===this[t]&&"function"==typeof e[t]&&(this[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t));for(var o=0;o<h.length;o++)e.on(h[o],this.emit.bind(this,h[o]));return this._read=function(t){_("wrapped _read",t),i&&(i=!1,e.resume())},this},Object.defineProperty(f.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),f._fromList=I}).call(this,j("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":98,"./internal/streams/BufferList":103,"./internal/streams/destroy":104,"./internal/streams/stream":105,_process:91,"core-util-is":42,events:47,inherits:84,isarray:86,"process-nextick-args":90,"safe-buffer":110,"string_decoder/":113,util:40}],101:[function(t,e,n){e.exports=o;var r=t("./_stream_duplex"),i=t("core-util-is");function o(t){if(!(this instanceof o))return new o(t);r.call(this,t),this._transformState={afterTransform:function(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,(n.writecb=null)!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var n=this;"function"==typeof this._flush?this._flush(function(t,e){a(n,t,e)}):a(this,null,null)}function a(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=t("inherits"),i.inherits(o,r),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},{"./_stream_duplex":98,"core-util-is":42,inherits:84}],102:[function(E,x,t){(function(t,e,n){var g=E("process-nextick-args");function h(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}x.exports=l;var a,f=!t.browser&&-1<["v0.10","v0.9."].indexOf(t.version.slice(0,5))?n:g.nextTick;l.WritableState=c;var r=E("core-util-is");r.inherits=E("inherits");var i={deprecate:E("util-deprecate")},o=E("./internal/streams/stream"),v=E("safe-buffer").Buffer,b=e.Uint8Array||function(){};var s,u=E("./internal/streams/destroy");function _(){}function c(t,e){a=a||E("./_stream_duplex"),t=t||{};var n=e instanceof a;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,i=t.writableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(i||0===i)?i:o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=(this.destroyed=!1)===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(h=n,h.writing=!1,h.writecb=null,h.length-=h.writelen,h.writelen=0,e)s=t,a=n,u=r,c=e,l=i,--a.pendingcb,u?(g.nextTick(l,c),g.nextTick(T,s,a),s._writableState.errorEmitted=!0,s.emit("error",c)):(l(c),s._writableState.errorEmitted=!0,s.emit("error",c),T(s,a));else{var o=y(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||d(t,n),r?f(p,t,n,o,i):p(t,n,o,i)}var s,a,u,c,l;var h}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new h(this)}function l(t){if(a=a||E("./_stream_duplex"),!(s.call(l,this)||this instanceof a))return new l(t);this._writableState=new c(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),o.call(this)}function w(t,e,n,r,i,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function p(t,e,n,r){var i,o;n||(i=t,0===(o=e).length&&o.needDrain&&(o.needDrain=!1,i.emit("drain"))),e.pendingcb--,r(),T(t,e)}function d(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var s=0,a=!0;n;)(i[s]=n).isBuf||(a=!1),n=n.next,s+=1;i.allBuffers=a,w(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new h(e),e.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,c=n.encoding,l=n.callback;if(w(t,e,!1,e.objectMode?1:u.length,u,c,l),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function y(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function m(e,n){e._final(function(t){n.pendingcb--,t&&e.emit("error",t),n.prefinished=!0,e.emit("prefinish"),T(e,n)})}function T(t,e){var n,r,i=y(e);return i&&(n=t,(r=e).prefinished||r.finalCalled||("function"==typeof n._final?(r.pendingcb++,r.finalCalled=!0,g.nextTick(m,n,r)):(r.prefinished=!0,n.emit("prefinish"))),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),i}r.inherits(l,o),c.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(c.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(s=Function.prototype[Symbol.hasInstance],Object.defineProperty(l,Symbol.hasInstance,{value:function(t){return!!s.call(this,t)||this===l&&(t&&t._writableState instanceof c)}})):s=function(t){return t instanceof this},l.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},l.prototype.write=function(t,e,n){var r,i,o,s,a,u,c,l,h,f,p,d=this._writableState,y=!1,m=!d.objectMode&&(r=t,v.isBuffer(r)||r instanceof b);return m&&!v.isBuffer(t)&&(i=t,t=v.from(i)),"function"==typeof e&&(n=e,e=null),m?e="buffer":e||(e=d.defaultEncoding),"function"!=typeof n&&(n=_),d.ended?(h=this,f=n,p=new Error("write after end"),h.emit("error",p),g.nextTick(f,p)):(m||(o=this,s=d,u=n,l=!(c=!0),null===(a=t)?l=new TypeError("May not write null values to stream"):"string"==typeof a||void 0===a||s.objectMode||(l=new TypeError("Invalid non-string/buffer chunk")),l&&(o.emit("error",l),g.nextTick(u,l),c=!1),c))&&(d.pendingcb++,y=function(t,e,n,r,i,o){if(!n){var s=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=v.from(e,n));return e}(e,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=e.objectMode?1:r.length;e.length+=a;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else w(t,e,!1,a,r,i,o);return u}(this,d,m,t,e,n)),y},l.prototype.cork=function(){this._writableState.corked++},l.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||d(this,t))},l.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),l.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},l.prototype._writev=null,l.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,e=t=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,T(t,e),n&&(e.finished?g.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),l.prototype.destroy=u.destroy,l.prototype._undestroy=u.undestroy,l.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,E("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},E("timers").setImmediate)},{"./_stream_duplex":98,"./internal/streams/destroy":104,"./internal/streams/stream":105,_process:91,"core-util-is":42,inherits:84,"process-nextick-args":90,"safe-buffer":110,timers:114,"util-deprecate":115}],103:[function(t,e,n){"use strict";var a=t("safe-buffer").Buffer,r=t("util");e.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return a.alloc(0);if(1===this.length)return this.head.data;for(var e,n,r,i=a.allocUnsafe(t>>>0),o=this.head,s=0;o;)e=o.data,n=i,r=s,e.copy(n,r),s+=o.data.length,o=o.next;return i},t}(),r&&r.inspect&&r.inspect.custom&&(e.exports.prototype[r.inspect.custom]=function(){var t=r.inspect({length:this.length});return this.constructor.name+" "+t})},{"safe-buffer":110,util:40}],104:[function(t,e,n){"use strict";var o=t("process-nextick-args");function s(t,e){t.emit("error",e)}e.exports={destroy:function(t,e){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?e?e(t):!t||this._writableState&&this._writableState.errorEmitted||o.nextTick(s,this,t):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(o.nextTick(s,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":90}],105:[function(t,e,n){e.exports=t("events").EventEmitter},{events:47}],106:[function(t,e,n){e.exports=t("./readable").PassThrough},{"./readable":107}],107:[function(t,e,n){(((n=e.exports=t("./lib/_stream_readable.js")).Stream=n).Readable=n).Writable=t("./lib/_stream_writable.js"),n.Duplex=t("./lib/_stream_duplex.js"),n.Transform=t("./lib/_stream_transform.js"),n.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":98,"./lib/_stream_passthrough.js":99,"./lib/_stream_readable.js":100,"./lib/_stream_transform.js":101,"./lib/_stream_writable.js":102}],108:[function(t,e,n){e.exports=t("./readable").Transform},{"./readable":107}],109:[function(t,e,n){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":102}],110:[function(t,e,n){var r=t("buffer"),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,n),n.Buffer=s),o(i,s),s.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},{buffer:41}],111:[function(P,t,e){(function(n){!function(c){c.parser=function(t,e){return new i(t,e)},c.SAXParser=i,c.SAXStream=s,c.createStream=function(t,e){return new s(t,e)},c.MAX_BUFFER_LENGTH=65536;var r,l=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function i(t,e){if(!(this instanceof i))return new i(t,e);var n=this;!function(t){for(var e=0,n=l.length;e<n;e++)t[l[e]]=""}(n),n.q=n.c="",n.bufferCheckPosition=c.MAX_BUFFER_LENGTH,n.opt=e||{},n.opt.lowercase=n.opt.lowercase||n.opt.lowercasetags,n.looseCase=n.opt.lowercase?"toLowerCase":"toUpperCase",n.tags=[],n.closed=n.closedRoot=n.sawRoot=!1,n.tag=n.error=null,n.strict=!!t,n.noscript=!(!t&&!n.opt.noscript),n.state=E.BEGIN,n.strictEntities=n.opt.strictEntities,n.ENTITIES=n.strictEntities?Object.create(c.XML_ENTITIES):Object.create(c.ENTITIES),n.attribList=[],n.opt.xmlns&&(n.ns=Object.create(p)),n.trackPosition=!1!==n.opt.position,n.trackPosition&&(n.position=n.line=n.column=0),x(n,"onready")}c.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(t){function e(){}return e.prototype=t,new e}),Object.keys||(Object.keys=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}),i.prototype={end:function(){I(this)},write:function(t){var e=this;if(this.error)throw this.error;if(e.closed)return k(e,"Cannot write after close. Assign an onready handler.");if(null===t)return I(e);"object"==typeof t&&(t=t.toString());var n=0,r="";for(;r=q(t,n++),e.c=r;)switch(e.trackPosition&&(e.position++,"\n"===r?(e.line++,e.column=0):e.column++),e.state){case E.BEGIN:if(e.state=E.BEGIN_WHITESPACE,"\ufeff"===r)continue;U(e,r);continue;case E.BEGIN_WHITESPACE:U(e,r);continue;case E.TEXT:if(e.sawRoot&&!e.closedRoot){for(var i=n-1;r&&"<"!==r&&"&"!==r;)(r=q(t,n++))&&e.trackPosition&&(e.position++,"\n"===r?(e.line++,e.column=0):e.column++);e.textNode+=t.substring(i,n-1)}"<"!==r||e.sawRoot&&e.closedRoot&&!e.strict?(v(r)||e.sawRoot&&!e.closedRoot||D(e,"Text data outside of root node."),"&"===r?e.state=E.TEXT_ENTITY:e.textNode+=r):(e.state=E.OPEN_WAKA,e.startTagPosition=e.position);continue;case E.SCRIPT:"<"===r?e.state=E.SCRIPT_ENDING:e.script+=r;continue;case E.SCRIPT_ENDING:e.state="/"===r?E.CLOSE_TAG:(e.script+="<"+r,E.SCRIPT);continue;case E.OPEN_WAKA:if("!"===r)e.state=E.SGML_DECL,e.sgmlDecl="";else if(v(r));else if(_(d,r))e.state=E.OPEN_TAG,e.tagName=r;else if("/"===r)e.state=E.CLOSE_TAG,e.tagName="";else if("?"===r)e.state=E.PROC_INST,e.procInstName=e.procInstBody="";else{if(D(e,"Unencoded <"),e.startTagPosition+1<e.position){var o=e.position-e.startTagPosition;r=new Array(o).join(" ")+r}e.textNode+="<"+r,e.state=E.TEXT}continue;case E.SGML_DECL:(e.sgmlDecl+r).toUpperCase()===h?(S(e,"onopencdata"),e.state=E.CDATA,e.sgmlDecl="",e.cdata=""):e.sgmlDecl+r==="--"?(e.state=E.COMMENT,e.comment="",e.sgmlDecl=""):(e.sgmlDecl+r).toUpperCase()===f?(e.state=E.DOCTYPE,(e.doctype||e.sawRoot)&&D(e,"Inappropriately located doctype declaration"),e.doctype="",e.sgmlDecl=""):">"===r?(S(e,"onsgmldeclaration",e.sgmlDecl),e.sgmlDecl="",e.state=E.TEXT):(b(r)&&(e.state=E.SGML_DECL_QUOTED),e.sgmlDecl+=r);continue;case E.SGML_DECL_QUOTED:r===e.q&&(e.state=E.SGML_DECL,e.q=""),e.sgmlDecl+=r;continue;case E.DOCTYPE:">"===r?(e.state=E.TEXT,S(e,"ondoctype",e.doctype),e.doctype=!0):(e.doctype+=r,"["===r?e.state=E.DOCTYPE_DTD:b(r)&&(e.state=E.DOCTYPE_QUOTED,e.q=r));continue;case E.DOCTYPE_QUOTED:e.doctype+=r,r===e.q&&(e.q="",e.state=E.DOCTYPE);continue;case E.DOCTYPE_DTD:e.doctype+=r,"]"===r?e.state=E.DOCTYPE:b(r)&&(e.state=E.DOCTYPE_DTD_QUOTED,e.q=r);continue;case E.DOCTYPE_DTD_QUOTED:e.doctype+=r,r===e.q&&(e.state=E.DOCTYPE_DTD,e.q="");continue;case E.COMMENT:"-"===r?e.state=E.COMMENT_ENDING:e.comment+=r;continue;case E.COMMENT_ENDING:"-"===r?(e.state=E.COMMENT_ENDED,e.comment=N(e.opt,e.comment),e.comment&&S(e,"oncomment",e.comment),e.comment=""):(e.comment+="-"+r,e.state=E.COMMENT);continue;case E.COMMENT_ENDED:e.state=">"!==r?(D(e,"Malformed comment"),e.comment+="--"+r,E.COMMENT):E.TEXT;continue;case E.CDATA:"]"===r?e.state=E.CDATA_ENDING:e.cdata+=r;continue;case E.CDATA_ENDING:e.state="]"===r?E.CDATA_ENDING_2:(e.cdata+="]"+r,E.CDATA);continue;case E.CDATA_ENDING_2:">"===r?(e.cdata&&S(e,"oncdata",e.cdata),S(e,"onclosecdata"),e.cdata="",e.state=E.TEXT):"]"===r?e.cdata+="]":(e.cdata+="]]"+r,e.state=E.CDATA);continue;case E.PROC_INST:"?"===r?e.state=E.PROC_INST_ENDING:v(r)?e.state=E.PROC_INST_BODY:e.procInstName+=r;continue;case E.PROC_INST_BODY:if(!e.procInstBody&&v(r))continue;"?"===r?e.state=E.PROC_INST_ENDING:e.procInstBody+=r;continue;case E.PROC_INST_ENDING:e.state=">"===r?(S(e,"onprocessinginstruction",{name:e.procInstName,body:e.procInstBody}),e.procInstName=e.procInstBody="",E.TEXT):(e.procInstBody+="?"+r,E.PROC_INST_BODY);continue;case E.OPEN_TAG:_(y,r)?e.tagName+=r:(A(e),">"===r?L(e):e.state="/"===r?E.OPEN_TAG_SLASH:(v(r)||D(e,"Invalid character in tag name"),E.ATTRIB));continue;case E.OPEN_TAG_SLASH:">"===r?(L(e,!0),R(e)):(D(e,"Forward-slash in opening tag not followed by >"),e.state=E.ATTRIB);continue;case E.ATTRIB:if(v(r))continue;">"===r?L(e):"/"===r?e.state=E.OPEN_TAG_SLASH:_(d,r)?(e.attribName=r,e.attribValue="",e.state=E.ATTRIB_NAME):D(e,"Invalid attribute name");continue;case E.ATTRIB_NAME:"="===r?e.state=E.ATTRIB_VALUE:">"===r?(D(e,"Attribute without value"),e.attribValue=e.attribName,j(e),L(e)):v(r)?e.state=E.ATTRIB_NAME_SAW_WHITE:_(y,r)?e.attribName+=r:D(e,"Invalid attribute name");continue;case E.ATTRIB_NAME_SAW_WHITE:if("="===r)e.state=E.ATTRIB_VALUE;else{if(v(r))continue;D(e,"Attribute without value"),e.tag.attributes[e.attribName]="",e.attribValue="",S(e,"onattribute",{name:e.attribName,value:""}),e.attribName="",">"===r?L(e):_(d,r)?(e.attribName=r,e.state=E.ATTRIB_NAME):(D(e,"Invalid attribute name"),e.state=E.ATTRIB)}continue;case E.ATTRIB_VALUE:if(v(r))continue;b(r)?(e.q=r,e.state=E.ATTRIB_VALUE_QUOTED):(D(e,"Unquoted attribute value"),e.state=E.ATTRIB_VALUE_UNQUOTED,e.attribValue=r);continue;case E.ATTRIB_VALUE_QUOTED:if(r!==e.q){"&"===r?e.state=E.ATTRIB_VALUE_ENTITY_Q:e.attribValue+=r;continue}j(e),e.q="",e.state=E.ATTRIB_VALUE_CLOSED;continue;case E.ATTRIB_VALUE_CLOSED:v(r)?e.state=E.ATTRIB:">"===r?L(e):"/"===r?e.state=E.OPEN_TAG_SLASH:_(d,r)?(D(e,"No whitespace between attributes"),e.attribName=r,e.attribValue="",e.state=E.ATTRIB_NAME):D(e,"Invalid attribute name");continue;case E.ATTRIB_VALUE_UNQUOTED:if(">"!==(u=r)&&!v(u)){"&"===r?e.state=E.ATTRIB_VALUE_ENTITY_U:e.attribValue+=r;continue}j(e),">"===r?L(e):e.state=E.ATTRIB;continue;case E.CLOSE_TAG:if(e.tagName)">"===r?R(e):_(y,r)?e.tagName+=r:e.script?(e.script+="</"+e.tagName,e.tagName="",e.state=E.SCRIPT):(v(r)||D(e,"Invalid tagname in closing tag"),e.state=E.CLOSE_TAG_SAW_WHITE);else{if(v(r))continue;_(d,r)?e.tagName=r:e.script?(e.script+="</"+r,e.state=E.SCRIPT):D(e,"Invalid tagname in closing tag.")}continue;case E.CLOSE_TAG_SAW_WHITE:if(v(r))continue;">"===r?R(e):D(e,"Invalid characters in closing tag");continue;case E.TEXT_ENTITY:case E.ATTRIB_VALUE_ENTITY_Q:case E.ATTRIB_VALUE_ENTITY_U:var s,a;switch(e.state){case E.TEXT_ENTITY:s=E.TEXT,a="textNode";break;case E.ATTRIB_VALUE_ENTITY_Q:s=E.ATTRIB_VALUE_QUOTED,a="attribValue";break;case E.ATTRIB_VALUE_ENTITY_U:s=E.ATTRIB_VALUE_UNQUOTED,a="attribValue"}";"===r?(e[a]+=M(e),e.entity="",e.state=s):_(e.entity.length?g:m,r)?e.entity+=r:(D(e,"Invalid character in entity name"),e[a]+="&"+e.entity+r,e.entity="",e.state=s);continue;default:throw new Error(e,"Unknown state: "+e.state)}var u;e.position>=e.bufferCheckPosition&&function(t){for(var e=Math.max(c.MAX_BUFFER_LENGTH,10),n=0,r=0,i=l.length;r<i;r++){var o=t[l[r]].length;if(e<o)switch(l[r]){case"textNode":C(t);break;case"cdata":S(t,"oncdata",t.cdata),t.cdata="";break;case"script":S(t,"onscript",t.script),t.script="";break;default:k(t,"Max buffer length exceeded: "+l[r])}n=Math.max(n,o)}var s=c.MAX_BUFFER_LENGTH-n;t.bufferCheckPosition=s+t.position}(e);return e},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var t;C(t=this),""!==t.cdata&&(S(t,"oncdata",t.cdata),t.cdata=""),""!==t.script&&(S(t,"onscript",t.script),t.script="")}};try{r=P("stream").Stream}catch(t){r=function(){}}var o=c.EVENTS.filter(function(t){return"error"!==t&&"end"!==t});function s(t,e){if(!(this instanceof s))return new s(t,e);r.apply(this),this._parser=new i(t,e),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(t){n.emit("error",t),n._parser.error=null},this._decoder=null,o.forEach(function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){if(!t)return n.removeAllListeners(e),n._parser["on"+e]=t;n.on(e,t)},enumerable:!0,configurable:!1})})}(s.prototype=Object.create(r.prototype,{constructor:{value:s}})).write=function(t){if("function"==typeof n&&"function"==typeof n.isBuffer&&n.isBuffer(t)){if(!this._decoder){var e=P("string_decoder").StringDecoder;this._decoder=new e("utf8")}t=this._decoder.write(t)}return this._parser.write(t.toString()),this.emit("data",t),!0},s.prototype.end=function(t){return t&&t.length&&this.write(t),this._parser.end(),!0},s.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||-1===o.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),r.prototype.on.call(n,e,t)};var h="[CDATA[",f="DOCTYPE",a="http://www.w3.org/XML/1998/namespace",u="http://www.w3.org/2000/xmlns/",p={xml:a,xmlns:u},d=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,m=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,g=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function v(t){return" "===t||"\n"===t||"\r"===t||"\t"===t}function b(t){return'"'===t||"'"===t}function _(t,e){return t.test(e)}var w,T,t,E=0;for(var e in c.STATE={BEGIN:E++,BEGIN_WHITESPACE:E++,TEXT:E++,TEXT_ENTITY:E++,OPEN_WAKA:E++,SGML_DECL:E++,SGML_DECL_QUOTED:E++,DOCTYPE:E++,DOCTYPE_QUOTED:E++,DOCTYPE_DTD:E++,DOCTYPE_DTD_QUOTED:E++,COMMENT_STARTING:E++,COMMENT:E++,COMMENT_ENDING:E++,COMMENT_ENDED:E++,CDATA:E++,CDATA_ENDING:E++,CDATA_ENDING_2:E++,PROC_INST:E++,PROC_INST_BODY:E++,PROC_INST_ENDING:E++,OPEN_TAG:E++,OPEN_TAG_SLASH:E++,ATTRIB:E++,ATTRIB_NAME:E++,ATTRIB_NAME_SAW_WHITE:E++,ATTRIB_VALUE:E++,ATTRIB_VALUE_QUOTED:E++,ATTRIB_VALUE_CLOSED:E++,ATTRIB_VALUE_UNQUOTED:E++,ATTRIB_VALUE_ENTITY_Q:E++,ATTRIB_VALUE_ENTITY_U:E++,CLOSE_TAG:E++,CLOSE_TAG_SAW_WHITE:E++,SCRIPT:E++,SCRIPT_ENDING:E++},c.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},c.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(c.ENTITIES).forEach(function(t){var e=c.ENTITIES[t],n="number"==typeof e?String.fromCharCode(e):e;c.ENTITIES[t]=n}),c.STATE)c.STATE[c.STATE[e]]=e;function x(t,e,n){t[e]&&t[e](n)}function S(t,e,n){t.textNode&&C(t),x(t,e,n)}function C(t){t.textNode=N(t.opt,t.textNode),t.textNode&&x(t,"ontext",t.textNode),t.textNode=""}function N(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function k(t,e){return C(t),t.trackPosition&&(e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c),e=new Error(e),t.error=e,x(t,"onerror",e),t}function I(t){return t.sawRoot&&!t.closedRoot&&D(t,"Unclosed root tag"),t.state!==E.BEGIN&&t.state!==E.BEGIN_WHITESPACE&&t.state!==E.TEXT&&k(t,"Unexpected end"),C(t),t.c="",t.closed=!0,x(t,"onend"),i.call(t,t.strict,t.opt),t}function D(t,e){if("object"!=typeof t||!(t instanceof i))throw new Error("bad call to strictFail");t.strict&&k(t,e)}function A(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var e=t.tags[t.tags.length-1]||t,n=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(n.ns=e.ns),t.attribList.length=0,S(t,"onopentagstart",n)}function O(t,e){var n=t.indexOf(":")<0?["",t]:t.split(":"),r=n[0],i=n[1];return e&&"xmlns"===t&&(r="xmlns",i=""),{prefix:r,local:i}}function j(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),-1!==t.attribList.indexOf(t.attribName)||t.tag.attributes.hasOwnProperty(t.attribName))t.attribName=t.attribValue="";else{if(t.opt.xmlns){var e=O(t.attribName,!0),n=e.prefix,r=e.local;if("xmlns"===n)if("xml"===r&&t.attribValue!==a)D(t,"xml: prefix must be bound to "+a+"\nActual: "+t.attribValue);else if("xmlns"===r&&t.attribValue!==u)D(t,"xmlns: prefix must be bound to "+u+"\nActual: "+t.attribValue);else{var i=t.tag,o=t.tags[t.tags.length-1]||t;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[r]=t.attribValue}t.attribList.push([t.attribName,t.attribValue])}else t.tag.attributes[t.attribName]=t.attribValue,S(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue=""}}function L(e,t){if(e.opt.xmlns){var n=e.tag,r=O(e.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(D(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=r.prefix);var i=e.tags[e.tags.length-1]||e;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach(function(t){S(e,"onopennamespace",{prefix:t,uri:n.ns[t]})});for(var o=0,s=e.attribList.length;o<s;o++){var a=e.attribList[o],u=a[0],c=a[1],l=O(u,!0),h=l.prefix,f=l.local,p=""===h?"":n.ns[h]||"",d={name:u,value:c,prefix:h,local:f,uri:p};h&&"xmlns"!==h&&!p&&(D(e,"Unbound namespace prefix: "+JSON.stringify(h)),d.uri=h),e.tag.attributes[u]=d,S(e,"onattribute",d)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),S(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=E.TEXT:e.state=E.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function R(n){if(!n.tagName)return D(n,"Weird empty close tag."),n.textNode+="</>",void(n.state=E.TEXT);if(n.script){if("script"!==n.tagName)return n.script+="</"+n.tagName+">",n.tagName="",void(n.state=E.SCRIPT);S(n,"onscript",n.script),n.script=""}var t=n.tags.length,e=n.tagName;n.strict||(e=e[n.looseCase]());for(var r=e;t--;){if(n.tags[t].name===r)break;D(n,"Unexpected close tag")}if(t<0)return D(n,"Unmatched closing tag: "+n.tagName),n.textNode+="</"+n.tagName+">",void(n.state=E.TEXT);n.tagName=e;for(var i=n.tags.length;i-- >t;){var o=n.tag=n.tags.pop();n.tagName=n.tag.name,S(n,"onclosetag",n.tagName);var s={};for(var a in o.ns)s[a]=o.ns[a];var u=n.tags[n.tags.length-1]||n;n.opt.xmlns&&o.ns!==u.ns&&Object.keys(o.ns).forEach(function(t){var e=o.ns[t];S(n,"onclosenamespace",{prefix:t,uri:e})})}0===t&&(n.closedRoot=!0),n.tagName=n.attribValue=n.attribName="",n.attribList.length=0,n.state=E.TEXT}function M(t){var e,n=t.entity,r=n.toLowerCase(),i="";return t.ENTITIES[n]?t.ENTITIES[n]:t.ENTITIES[r]?t.ENTITIES[r]:("#"===(n=r).charAt(0)&&(i="x"===n.charAt(1)?(n=n.slice(2),(e=parseInt(n,16)).toString(16)):(n=n.slice(1),(e=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),isNaN(e)||i.toLowerCase()!==n?(D(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCodePoint(e))}function U(t,e){"<"===e?(t.state=E.OPEN_WAKA,t.startTagPosition=t.position):v(e)||(D(t,"Non-whitespace before first tag."),t.textNode=e,t.state=E.TEXT)}function q(t,e){var n="";return e<t.length&&(n=t.charAt(e)),n}E=c.STATE,String.fromCodePoint||(w=String.fromCharCode,T=Math.floor,t=function(){var t,e,n=[],r=-1,i=arguments.length;if(!i)return"";for(var o="";++r<i;){var s=Number(arguments[r]);if(!isFinite(s)||s<0||1114111<s||T(s)!==s)throw RangeError("Invalid code point: "+s);s<=65535?n.push(s):(t=55296+((s-=65536)>>10),e=s%1024+56320,n.push(t,e)),(r+1===i||16384<n.length)&&(o+=w.apply(null,n),n.length=0)}return o},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:t,configurable:!0,writable:!0}):String.fromCodePoint=t)}(void 0===e?this.sax={}:e)}).call(this,P("buffer").Buffer)},{buffer:41,stream:112,string_decoder:113}],112:[function(t,e,n){e.exports=r;var l=t("events").EventEmitter;function r(){l.call(this)}t("inherits")(r,l),r.Readable=t("readable-stream/readable.js"),r.Writable=t("readable-stream/writable.js"),r.Duplex=t("readable-stream/duplex.js"),r.Transform=t("readable-stream/transform.js"),r.PassThrough=t("readable-stream/passthrough.js"),(r.Stream=r).prototype.pipe=function(e,t){var n=this;function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",r),e.on("drain",i),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",a));var o=!1;function s(){o||(o=!0,e.end())}function a(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function u(t){if(c(),0===l.listenerCount(this,"error"))throw t}function c(){n.removeListener("data",r),e.removeListener("drain",i),n.removeListener("end",s),n.removeListener("close",a),n.removeListener("error",u),e.removeListener("error",u),n.removeListener("end",c),n.removeListener("close",c),e.removeListener("close",c)}return n.on("error",u),e.on("error",u),n.on("end",c),n.on("close",c),e.on("close",c),e.emit("pipe",n),e}},{events:47,inherits:84,"readable-stream/duplex.js":97,"readable-stream/passthrough.js":106,"readable-stream/readable.js":107,"readable-stream/transform.js":108,"readable-stream/writable.js":109}],113:[function(t,e,n){var r=t("safe-buffer").Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=c,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=l,this.end=h,e=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"";if(1<t.lastNeed&&1<e.length){if(128!=(192&e[1]))return t.lastNeed=1,"";if(2<t.lastNeed&&2<e.length&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1);var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function l(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}(n.StringDecoder=o).prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=s(e[r]);if(0<=i)return 0<i&&(t.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if(0<=(i=s(e[r])))return 0<i&&(t.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if(0<=(i=s(e[r])))return 0<i&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},{"safe-buffer":110}],114:[function(u,t,c){(function(t,e){var r=u("process/browser.js").nextTick,n=Function.prototype.apply,i=Array.prototype.slice,o={},s=0;function a(t,e){this._id=t,this._clearFn=e}c.setTimeout=function(){return new a(n.call(setTimeout,window,arguments),clearTimeout)},c.setInterval=function(){return new a(n.call(setInterval,window,arguments),clearInterval)},c.clearTimeout=c.clearInterval=function(t){t.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},c.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},c.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},c._unrefActive=c.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},c.setImmediate="function"==typeof t?t:function(t){var e=s++,n=!(arguments.length<2)&&i.call(arguments,1);return o[e]=!0,r(function(){o[e]&&(n?t.apply(null,n):t.call(null),c.clearImmediate(e))}),e},c.clearImmediate="function"==typeof e?e:function(t){delete o[t]}}).call(this,u("timers").setImmediate,u("timers").clearImmediate)},{"process/browser.js":91,timers:114}],115:[function(t,e,n){(function(n){function r(t){try{if(!n.localStorage)return!1}catch(t){return!1}var e=n.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}e.exports=function(t,e){if(r("noDeprecation"))return t;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],116:[function(t,e,n){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],117:[function(f,t,N){(function(r,i){var a=/%[sdj%]/g;N.format=function(t){if(!_(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(u(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,i=r.length,o=String(t).replace(a,function(t){if("%%"===t)return"%";if(i<=n)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),s=r[n];n<i;s=r[++n])v(s)||!l(s)?o+=" "+s:o+=" "+u(s);return o},N.deprecate=function(t,e){if(w(i.process))return function(){return N.deprecate(t,e).apply(this,arguments)};if(!0===r.noDeprecation)return t;var n=!1;return function(){if(!n){if(r.throwDeprecation)throw new Error(e);r.traceDeprecation?console.trace(e):console.error(e),n=!0}return t.apply(this,arguments)}};var t,o={};function u(t,e){var n={seen:[],stylize:c};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),g(e)?n.showHidden=e:e&&N._extend(n,e),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=s),p(n,t,n.depth)}function s(t,e){var n=u.styles[e];return n?"["+u.colors[n][0]+"m"+t+"["+u.colors[n][1]+"m":t}function c(t,e){return t}function p(e,n,r){if(e.customInspect&&n&&S(n.inspect)&&n.inspect!==N.inspect&&(!n.constructor||n.constructor.prototype!==n)){var t=n.inspect(r,e);return _(t)||(t=p(e,t,r)),t}var i=function(t,e){if(w(e))return t.stylize("undefined","undefined");if(_(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(b(e))return t.stylize(""+e,"number");if(g(e))return t.stylize(""+e,"boolean");if(v(e))return t.stylize("null","null")}(e,n);if(i)return i;var o,s=Object.keys(n),a=(o={},s.forEach(function(t,e){o[t]=!0}),o);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),x(n)&&(0<=s.indexOf("message")||0<=s.indexOf("description")))return d(n);if(0===s.length){if(S(n)){var u=n.name?": "+n.name:"";return e.stylize("[Function"+u+"]","special")}if(T(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(E(n))return e.stylize(Date.prototype.toString.call(n),"date");if(x(n))return d(n)}var c,l="",h=!1,f=["{","}"];(m(n)&&(h=!0,f=["[","]"]),S(n))&&(l=" [Function"+(n.name?": "+n.name:"")+"]");return T(n)&&(l=" "+RegExp.prototype.toString.call(n)),E(n)&&(l=" "+Date.prototype.toUTCString.call(n)),x(n)&&(l=" "+d(n)),0!==s.length||h&&0!=n.length?r<0?T(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),c=h?function(e,n,r,i,t){for(var o=[],s=0,a=n.length;s<a;++s)C(n,String(s))?o.push(y(e,n,r,i,String(s),!0)):o.push("");return t.forEach(function(t){t.match(/^\d+$/)||o.push(y(e,n,r,i,t,!0))}),o}(e,n,r,a,s):s.map(function(t){return y(e,n,r,a,t,h)}),e.seen.pop(),function(t,e,n){if(60<t.reduce(function(t,e){return 0,0<=e.indexOf("\n")&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0))return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(c,l,f)):f[0]+l+f[1]}function d(t){return"["+Error.prototype.toString.call(t)+"]"}function y(t,e,n,r,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),C(r,i)||(s="["+i+"]"),a||(t.seen.indexOf(u.value)<0?-1<(a=v(n)?p(t,u.value,null):p(t,u.value,n-1)).indexOf("\n")&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n")):a=t.stylize("[Circular]","special")),w(s)){if(o&&i.match(/^\d+$/))return a;s=(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),t.stylize(s,"string"))}return s+": "+a}function m(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function v(t){return null===t}function b(t){return"number"==typeof t}function _(t){return"string"==typeof t}function w(t){return void 0===t}function T(t){return l(t)&&"[object RegExp]"===e(t)}function l(t){return"object"==typeof t&&null!==t}function E(t){return l(t)&&"[object Date]"===e(t)}function x(t){return l(t)&&("[object Error]"===e(t)||t instanceof Error)}function S(t){return"function"==typeof t}function e(t){return Object.prototype.toString.call(t)}function n(t){return t<10?"0"+t.toString(10):t.toString(10)}N.debuglog=function(e){if(w(t)&&(t=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!o[e])if(new RegExp("\\b"+e+"\\b","i").test(t)){var n=r.pid;o[e]=function(){var t=N.format.apply(N,arguments);console.error("%s %d: %s",e,n,t)}}else o[e]=function(){};return o[e]},(N.inspect=u).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},N.isArray=m,N.isBoolean=g,N.isNull=v,N.isNullOrUndefined=function(t){return null==t},N.isNumber=b,N.isString=_,N.isSymbol=function(t){return"symbol"==typeof t},N.isUndefined=w,N.isRegExp=T,N.isObject=l,N.isDate=E,N.isError=x,N.isFunction=S,N.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},N.isBuffer=f("./support/isBuffer");var h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}N.log=function(){var t,e;console.log("%s - %s",(t=new Date,e=[n(t.getHours()),n(t.getMinutes()),n(t.getSeconds())].join(":"),[t.getDate(),h[t.getMonth()],e].join(" ")),N.format.apply(N,arguments))},N.inherits=f("inherits"),N._extend=function(t,e){if(!e||!l(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,f("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":116,_process:91,inherits:84}],118:[function(t,e,n){(function(){"use strict";n.stripBOM=function(t){return"\ufeff"===t[0]?t.substring(1):t}}).call(this)},{}],119:[function(t,e,n){(function(){"use strict";var r,i,e,f,p,d={}.hasOwnProperty;r=t("xmlbuilder"),i=t("./defaults").defaults,f=function(t){return"string"==typeof t&&(0<=t.indexOf("&")||0<=t.indexOf(">")||0<=t.indexOf("<"))},p=function(t){return"<![CDATA["+e(t)+"]]>"},e=function(t){return t.replace("]]>","]]]]><![CDATA[>")},n.Builder=function(){function t(t){var e,n,r;for(e in this.options={},n=i[.2])d.call(n,e)&&(r=n[e],this.options[e]=r);for(e in t)d.call(t,e)&&(r=t[e],this.options[e]=r)}return t.prototype.buildObject=function(t){var u,c,l,e,n,h;return u=this.options.attrkey,c=this.options.charkey,1===Object.keys(t).length&&this.options.rootName===i[.2].rootName?t=t[n=Object.keys(t)[0]]:n=this.options.rootName,h=this,l=function(t,e){var n,r,i,o,s,a;if("object"!=typeof e)h.options.cdata&&f(e)?t.raw(p(e)):t.txt(e);else if(Array.isArray(e)){for(o in e)if(d.call(e,o))for(s in r=e[o])i=r[s],t=l(t.ele(s),i).up()}else for(s in e)if(d.call(e,s))if(r=e[s],s===u){if("object"==typeof r)for(n in r)a=r[n],t=t.att(n,a)}else if(s===c)t=h.options.cdata&&f(r)?t.raw(p(r)):t.txt(r);else if(Array.isArray(r))for(o in r)d.call(r,o)&&(t="string"==typeof(i=r[o])?h.options.cdata&&f(i)?t.ele(s).raw(p(i)).up():t.ele(s,i).up():l(t.ele(s),i).up());else t="object"==typeof r?l(t.ele(s),r).up():"string"==typeof r&&h.options.cdata&&f(r)?t.ele(s).raw(p(r)).up():(null==r&&(r=""),t.ele(s,r.toString()).up());return t},e=r.create(n,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),l(e,t).end(this.options.renderOpts)},t}()}).call(this)},{"./defaults":120,xmlbuilder:145}],120:[function(t,e,n){(function(){n.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},{}],121:[function(t,e,c){(function(){"use strict";var r,i,n,p,d,o,u,s,a=function(t,e){return function(){return t.apply(e,arguments)}},y={}.hasOwnProperty;u=t("sax"),n=t("events"),r=t("./bom"),o=t("./processors"),s=t("timers").setImmediate,i=t("./defaults").defaults,p=function(t){return"object"==typeof t&&null!=t&&0===Object.keys(t).length},d=function(t,e,n){var r,i;for(r=0,i=t.length;r<i;r++)e=(0,t[r])(e,n);return e},c.Parser=function(t){function e(t){var e,n,r;if(this.parseString=a(this.parseString,this),this.reset=a(this.reset,this),this.assignOrPush=a(this.assignOrPush,this),this.processAsync=a(this.processAsync,this),!(this instanceof c.Parser))return new c.Parser(t);for(e in this.options={},n=i[.2])y.call(n,e)&&(r=n[e],this.options[e]=r);for(e in t)y.call(t,e)&&(r=t[e],this.options[e]=r);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(o.normalize)),this.reset()}return function(t,e){for(var n in e)y.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,n.EventEmitter),e.prototype.processAsync=function(){var t,e;try{return this.remaining.length<=this.options.chunkSize?(t=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(t),this.saxParser.close()):(t=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(t),s(this.processAsync))}catch(t){if(e=t,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(e)}},e.prototype.assignOrPush=function(t,e,n){return e in t?(t[e]instanceof Array||(t[e]=[t[e]]),t[e].push(n)):this.options.explicitArray?t[e]=[n]:t[e]=n},e.prototype.reset=function(){var s,l,n,h,e,t,a,f,r;return this.removeAllListeners(),this.saxParser=u.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(e=this,function(t){if(e.saxParser.resume(),!e.saxParser.errThrown)return e.saxParser.errThrown=!0,e.emit("error",t)}),this.saxParser.onend=(t=this,function(){if(!t.saxParser.ended)return t.saxParser.ended=!0,t.emit("end",t.resultObject)}),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,h=[],s=this.options.attrkey,l=this.options.charkey,this.saxParser.onopentag=(a=this,function(t){var e,n,r,i,o;if((r={})[l]="",!a.options.ignoreAttrs)for(e in o=t.attributes)y.call(o,e)&&(s in r||a.options.mergeAttrs||(r[s]={}),n=a.options.attrValueProcessors?d(a.options.attrValueProcessors,t.attributes[e],e):t.attributes[e],i=a.options.attrNameProcessors?d(a.options.attrNameProcessors,e):e,a.options.mergeAttrs?a.assignOrPush(r,i,n):r[s][i]=n);return r["#name"]=a.options.tagNameProcessors?d(a.options.tagNameProcessors,t.name):t.name,a.options.xmlns&&(r[a.options.xmlnskey]={uri:t.uri,local:t.local}),h.push(r)}),this.saxParser.onclosetag=(f=this,function(){var t,e,n,r,i,o,s,a,u,c;if(o=h.pop(),i=o["#name"],f.options.explicitChildren&&f.options.preserveChildrenOrder||delete o["#name"],!0===o.cdata&&(t=o.cdata,delete o.cdata),u=h[h.length-1],o[l].match(/^\s*$/)&&!t?(e=o[l],delete o[l]):(f.options.trim&&(o[l]=o[l].trim()),f.options.normalize&&(o[l]=o[l].replace(/\s{2,}/g," ").trim()),o[l]=f.options.valueProcessors?d(f.options.valueProcessors,o[l],i):o[l],1===Object.keys(o).length&&l in o&&!f.EXPLICIT_CHARKEY&&(o=o[l])),p(o)&&(o=""!==f.options.emptyTag?f.options.emptyTag:e),null!=f.options.validator&&(c="/"+function(){var t,e,n;for(n=[],t=0,e=h.length;t<e;t++)r=h[t],n.push(r["#name"]);return n}().concat(i).join("/"),function(){var e;try{o=f.options.validator(c,u&&u[i],o)}catch(t){return e=t,f.emit("error",e)}}()),f.options.explicitChildren&&!f.options.mergeAttrs&&"object"==typeof o)if(f.options.preserveChildrenOrder){if(u){for(n in u[f.options.childkey]=u[f.options.childkey]||[],s={},o)y.call(o,n)&&(s[n]=o[n]);u[f.options.childkey].push(s),delete o["#name"],1===Object.keys(o).length&&l in o&&!f.EXPLICIT_CHARKEY&&(o=o[l])}}else r={},f.options.attrkey in o&&(r[f.options.attrkey]=o[f.options.attrkey],delete o[f.options.attrkey]),!f.options.charsAsChildren&&f.options.charkey in o&&(r[f.options.charkey]=o[f.options.charkey],delete o[f.options.charkey]),0<Object.getOwnPropertyNames(o).length&&(r[f.options.childkey]=o),o=r;return 0<h.length?f.assignOrPush(u,i,o):(f.options.explicitRoot&&(a=o,(o={})[i]=a),f.resultObject=o,f.saxParser.ended=!0,f.emit("end",f.resultObject))}),n=function(t){var e,n;if(n=h[h.length-1])return n[l]+=t,r.options.explicitChildren&&r.options.preserveChildrenOrder&&r.options.charsAsChildren&&(r.options.includeWhiteChars||""!==t.replace(/\\n/g,"").trim())&&(n[r.options.childkey]=n[r.options.childkey]||[],(e={"#name":"__text__"})[l]=t,r.options.normalize&&(e[l]=e[l].replace(/\s{2,}/g," ").trim()),n[r.options.childkey].push(e)),n},(r=this).saxParser.ontext=n,this.saxParser.oncdata=function(t){var e;if(e=n(t))return e.cdata=!0}},e.prototype.parseString=function(t,e){var n;null!=e&&"function"==typeof e&&(this.on("end",function(t){return this.reset(),e(null,t)}),this.on("error",function(t){return this.reset(),e(t)}));try{return""===(t=t.toString()).trim()?(this.emit("end",null),!0):(t=r.stripBOM(t),this.options.async?(this.remaining=t,s(this.processAsync),this.saxParser):this.saxParser.write(t).close())}catch(t){if(n=t,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",n),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw n}},e}(),c.parseString=function(t,e,n){var r,i;return null!=n?("function"==typeof n&&(r=n),"object"==typeof e&&(i=e)):("function"==typeof e&&(r=e),i={}),new c.Parser(i).parseString(t,r)}}).call(this)},{"./bom":118,"./defaults":120,"./processors":122,events:47,sax:111,timers:114}],122:[function(t,e,n){(function(){"use strict";var e;e=new RegExp(/(?!xmlns)^.*:/),n.normalize=function(t){return t.toLowerCase()},n.firstCharLowerCase=function(t){return t.charAt(0).toLowerCase()+t.slice(1)},n.stripPrefix=function(t){return t.replace(e,"")},n.parseNumbers=function(t){return isNaN(t)||(t=t%1==0?parseInt(t,10):parseFloat(t)),t},n.parseBooleans=function(t){return/^(?:true|false)$/i.test(t)&&(t="true"===t.toLowerCase()),t}}).call(this)},{}],123:[function(o,t,s){(function(){"use strict";var t,e,n,r,i={}.hasOwnProperty;e=o("./defaults"),t=o("./builder"),n=o("./parser"),r=o("./processors"),s.defaults=e.defaults,s.processors=r,s.ValidationError=function(t){function e(t){this.message=t}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,Error),e}(),s.Builder=t.Builder,s.Parser=n.Parser,s.parseString=n.parseString}).call(this)},{"./builder":119,"./defaults":120,"./parser":121,"./processors":122}],124:[function(t,o,e){(function(){var t,n,e,s,r,i,a=[].slice,u={}.hasOwnProperty;t=function(){var t,e,n,r,i,o;if(o=arguments[0],i=2<=arguments.length?a.call(arguments,1):[],s(Object.assign))Object.assign.apply(null,arguments);else for(t=0,n=i.length;t<n;t++)if(null!=(r=i[t]))for(e in r)u.call(r,e)&&(o[e]=r[e]);return o},s=function(t){return!!t&&"[object Function]"===Object.prototype.toString.call(t)},r=function(t){var e;return!!t&&("function"==(e=typeof t)||"object"===e)},n=function(t){return s(Array.isArray)?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},e=function(t){var e;if(n(t))return!t.length;for(e in t)if(u.call(t,e))return!1;return!0},i=function(t){var e,n;return r(t)&&(n=Object.getPrototypeOf(t))&&(e=n.constructor)&&"function"==typeof e&&e instanceof e&&Function.prototype.toString.call(e)===Function.prototype.toString.call(Object)},o.exports.assign=t,o.exports.isFunction=s,o.exports.isObject=r,o.exports.isArray=n,o.exports.isEmpty=e,o.exports.isPlainObject=i}).call(this)},{}],125:[function(t,e,n){(function(){e.exports=function(){function t(t,e,n){if(this.options=t.options,this.stringify=t.stringify,null==e)throw new Error("Missing attribute name of element "+t.name);if(null==n)throw new Error("Missing attribute value for attribute "+e+" of element "+t.name);this.name=this.stringify.attName(e),this.value=this.stringify.attValue(n)}return t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(t){return this.options.writer.set(t).attribute(this)},t}()}).call(this)},{}],126:[function(t,n,e){(function(){var e,i={}.hasOwnProperty;e=t("./XMLNode"),n.exports=function(t){function n(t,e){if(n.__super__.constructor.call(this,t),null==e)throw new Error("Missing CDATA text");this.text=this.stringify.cdata(e)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return this.options.writer.set(t).cdata(this)},n}()}).call(this)},{"./XMLNode":137}],127:[function(t,n,e){(function(){var e,i={}.hasOwnProperty;e=t("./XMLNode"),n.exports=function(t){function n(t,e){if(n.__super__.constructor.call(this,t),null==e)throw new Error("Missing comment text");this.text=this.stringify.comment(e)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return this.options.writer.set(t).comment(this)},n}()}).call(this)},{"./XMLNode":137}],128:[function(t,n,e){(function(){var e,i={}.hasOwnProperty;e=t("./XMLNode"),n.exports=function(t){function s(t,e,n,r,i,o){if(s.__super__.constructor.call(this,t),null==e)throw new Error("Missing DTD element name");if(null==n)throw new Error("Missing DTD attribute name");if(!r)throw new Error("Missing DTD attribute type");if(!i)throw new Error("Missing DTD attribute default");if(0!==i.indexOf("#")&&(i="#"+i),!i.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT");if(o&&!i.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT");this.elementName=this.stringify.eleName(e),this.attributeName=this.stringify.attName(n),this.attributeType=this.stringify.dtdAttType(r),this.defaultValue=this.stringify.dtdAttDefault(o),this.defaultValueType=i}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(s,e),s.prototype.toString=function(t){return this.options.writer.set(t).dtdAttList(this)},s}()}).call(this)},{"./XMLNode":137}],129:[function(t,n,e){(function(){var e,i={}.hasOwnProperty;e=t("./XMLNode"),n.exports=function(t){function r(t,e,n){if(r.__super__.constructor.call(this,t),null==e)throw new Error("Missing DTD element name");n||(n="(#PCDATA)"),Array.isArray(n)&&(n="("+n.join(",")+")"),this.name=this.stringify.eleName(e),this.value=this.stringify.dtdElementValue(n)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(r,e),r.prototype.toString=function(t){return this.options.writer.set(t).dtdElement(this)},r}()}).call(this)},{"./XMLNode":137}],130:[function(t,n,e){(function(){var e,o,s={}.hasOwnProperty;o=t("./Utility").isObject,e=t("./XMLNode"),n.exports=function(t){function i(t,e,n,r){if(i.__super__.constructor.call(this,t),null==n)throw new Error("Missing entity name");if(null==r)throw new Error("Missing entity value");if(this.pe=!!e,this.name=this.stringify.eleName(n),o(r)){if(!r.pubID&&!r.sysID)throw new Error("Public and/or system identifiers are required for an external entity");if(r.pubID&&!r.sysID)throw new Error("System identifier is required for a public external entity");if(null!=r.pubID&&(this.pubID=this.stringify.dtdPubID(r.pubID)),null!=r.sysID&&(this.sysID=this.stringify.dtdSysID(r.sysID)),null!=r.nData&&(this.nData=this.stringify.dtdNData(r.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity")}else this.value=this.stringify.dtdEntityValue(r)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(i,e),i.prototype.toString=function(t){return this.options.writer.set(t).dtdEntity(this)},i}()}).call(this)},{"./Utility":124,"./XMLNode":137}],131:[function(t,n,e){(function(){var e,i={}.hasOwnProperty;e=t("./XMLNode"),n.exports=function(t){function r(t,e,n){if(r.__super__.constructor.call(this,t),null==e)throw new Error("Missing notation name");if(!n.pubID&&!n.sysID)throw new Error("Public or system identifiers are required for an external entity");this.name=this.stringify.eleName(e),null!=n.pubID&&(this.pubID=this.stringify.dtdPubID(n.pubID)),null!=n.sysID&&(this.sysID=this.stringify.dtdSysID(n.sysID))}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(r,e),r.prototype.toString=function(t){return this.options.writer.set(t).dtdNotation(this)},r}()}).call(this)},{"./XMLNode":137}],132:[function(t,n,e){(function(){var e,s,i={}.hasOwnProperty;s=t("./Utility").isObject,e=t("./XMLNode"),n.exports=function(t){function o(t,e,n,r){var i;o.__super__.constructor.call(this,t),s(e)&&(e=(i=e).version,n=i.encoding,r=i.standalone),e||(e="1.0"),this.version=this.stringify.xmlVersion(e),null!=n&&(this.encoding=this.stringify.xmlEncoding(n)),null!=r&&(this.standalone=this.stringify.xmlStandalone(r))}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(o,e),o.prototype.toString=function(t){return this.options.writer.set(t).declaration(this)},o}()}).call(this)},{"./Utility":124,"./XMLNode":137}],133:[function(t,n,e){(function(){var s,r,i,a,e,u,c={}.hasOwnProperty;u=t("./Utility").isObject,e=t("./XMLNode"),s=t("./XMLDTDAttList"),i=t("./XMLDTDEntity"),r=t("./XMLDTDElement"),a=t("./XMLDTDNotation"),n.exports=function(t){function o(t,e,n){var r,i;o.__super__.constructor.call(this,t),this.documentObject=t,u(e)&&(e=(r=e).pubID,n=r.sysID),null==n&&(n=(i=[e,n])[0],e=i[1]),null!=e&&(this.pubID=this.stringify.dtdPubID(e)),null!=n&&(this.sysID=this.stringify.dtdSysID(n))}return function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(o,e),o.prototype.element=function(t,e){var n;return n=new r(this,t,e),this.children.push(n),this},o.prototype.attList=function(t,e,n,r,i){var o;return o=new s(this,t,e,n,r,i),this.children.push(o),this},o.prototype.entity=function(t,e){var n;return n=new i(this,!1,t,e),this.children.push(n),this},o.prototype.pEntity=function(t,e){var n;return n=new i(this,!0,t,e),this.children.push(n),this},o.prototype.notation=function(t,e){var n;return n=new a(this,t,e),this.children.push(n),this},o.prototype.toString=function(t){return this.options.writer.set(t).docType(this)},o.prototype.ele=function(t,e){return this.element(t,e)},o.prototype.att=function(t,e,n,r,i){return this.attList(t,e,n,r,i)},o.prototype.ent=function(t,e){return this.entity(t,e)},o.prototype.pent=function(t,e){return this.pEntity(t,e)},o.prototype.not=function(t,e){return this.notation(t,e)},o.prototype.up=function(){return this.root()||this.documentObject},o}()}).call(this)},{"./Utility":124,"./XMLDTDAttList":128,"./XMLDTDElement":129,"./XMLDTDEntity":130,"./XMLDTDNotation":131,"./XMLNode":137}],134:[function(t,e,n){(function(){var n,r,i,o,s={}.hasOwnProperty;o=t("./Utility").isPlainObject,n=t("./XMLNode"),i=t("./XMLStringifier"),r=t("./XMLStringWriter"),e.exports=function(t){function e(t){e.__super__.constructor.call(this,null),t||(t={}),t.writer||(t.writer=new r),this.options=t,this.stringify=new i(t),this.isDocument=!0}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,n),e.prototype.end=function(t){var e;return t?o(t)&&(e=t,t=this.options.writer.set(e)):t=this.options.writer,t.document(this)},e.prototype.toString=function(t){return this.options.writer.set(t).document(this)},e}()}).call(this)},{"./Utility":124,"./XMLNode":137,"./XMLStringWriter":141,"./XMLStringifier":142}],135:[function(e,w,t){(function(){var i,n,r,s,o,a,u,c,l,h,f,p,d,y,m,g,v,b,t,_={}.hasOwnProperty;t=e("./Utility"),v=t.isObject,g=t.isFunction,b=t.isPlainObject,h=e("./XMLElement"),n=e("./XMLCData"),r=e("./XMLComment"),p=e("./XMLRaw"),m=e("./XMLText"),f=e("./XMLProcessingInstruction"),c=e("./XMLDeclaration"),l=e("./XMLDocType"),s=e("./XMLDTDAttList"),a=e("./XMLDTDEntity"),o=e("./XMLDTDElement"),u=e("./XMLDTDNotation"),i=e("./XMLAttribute"),y=e("./XMLStringifier"),d=e("./XMLStringWriter"),w.exports=function(){function t(t,e,n){var r;t||(t={}),t.writer?b(t.writer)&&(r=t.writer,t.writer=new d(r)):t.writer=new d(t),this.options=t,this.writer=t.writer,this.stringify=new y(t),this.onDataCallback=e||function(){},this.onEndCallback=n||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return t.prototype.node=function(t,e,n){var r;if(null==t)throw new Error("Missing node name");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node");return this.openCurrent(),t=t.valueOf(),null==e&&(e={}),e=e.valueOf(),v(e)||(n=(r=[e,n])[0],e=r[1]),this.currentNode=new h(this,t,e),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=n&&this.text(n),this},t.prototype.element=function(t,e,n){return this.currentNode&&this.currentNode instanceof l?this.dtdElement.apply(this,arguments):this.node(t,e,n)},t.prototype.attribute=function(t,e){var n,r;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode");if(null!=t&&(t=t.valueOf()),v(t))for(n in t)_.call(t,n)&&(r=t[n],this.attribute(n,r));else g(e)&&(e=e.apply()),this.options.skipNullAttributes&&null==e||(this.currentNode.attributes[t]=new i(this,t,e));return this},t.prototype.text=function(t){var e;return this.openCurrent(),e=new m(this,t),this.onData(this.writer.text(e,this.currentLevel+1)),this},t.prototype.cdata=function(t){var e;return this.openCurrent(),e=new n(this,t),this.onData(this.writer.cdata(e,this.currentLevel+1)),this},t.prototype.comment=function(t){var e;return this.openCurrent(),e=new r(this,t),this.onData(this.writer.comment(e,this.currentLevel+1)),this},t.prototype.raw=function(t){var e;return this.openCurrent(),e=new p(this,t),this.onData(this.writer.raw(e,this.currentLevel+1)),this},t.prototype.instruction=function(t,e){var n,r,i,o,s;if(this.openCurrent(),null!=t&&(t=t.valueOf()),null!=e&&(e=e.valueOf()),Array.isArray(t))for(n=0,o=t.length;n<o;n++)r=t[n],this.instruction(r);else if(v(t))for(r in t)_.call(t,r)&&(i=t[r],this.instruction(r,i));else g(e)&&(e=e.apply()),s=new f(this,t,e),this.onData(this.writer.processingInstruction(s,this.currentLevel+1));return this},t.prototype.declaration=function(t,e,n){var r;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node");return r=new c(this,t,e,n),this.onData(this.writer.declaration(r,this.currentLevel+1)),this},t.prototype.doctype=function(t,e,n){if(this.openCurrent(),null==t)throw new Error("Missing root node name");if(this.root)throw new Error("dtd() must come before the root node");return this.currentNode=new l(this,e,n),this.currentNode.rootNodeName=t,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},t.prototype.dtdElement=function(t,e){var n;return this.openCurrent(),n=new o(this,t,e),this.onData(this.writer.dtdElement(n,this.currentLevel+1)),this},t.prototype.attList=function(t,e,n,r,i){var o;return this.openCurrent(),o=new s(this,t,e,n,r,i),this.onData(this.writer.dtdAttList(o,this.currentLevel+1)),this},t.prototype.entity=function(t,e){var n;return this.openCurrent(),n=new a(this,!1,t,e),this.onData(this.writer.dtdEntity(n,this.currentLevel+1)),this},t.prototype.pEntity=function(t,e){var n;return this.openCurrent(),n=new a(this,!0,t,e),this.onData(this.writer.dtdEntity(n,this.currentLevel+1)),this},t.prototype.notation=function(t,e){var n;return this.openCurrent(),n=new u(this,t,e),this.onData(this.writer.dtdNotation(n,this.currentLevel+1)),this},t.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},t.prototype.end=function(){for(;0<=this.currentLevel;)this.up();return this.onEnd()},t.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},t.prototype.openNode=function(t){if(!t.isOpen)return!this.root&&0===this.currentLevel&&t instanceof h&&(this.root=t),this.onData(this.writer.openNode(t,this.currentLevel)),t.isOpen=!0},t.prototype.closeNode=function(t){if(!t.isClosed)return this.onData(this.writer.closeNode(t,this.currentLevel)),t.isClosed=!0},t.prototype.onData=function(t){return this.documentStarted=!0,this.onDataCallback(t)},t.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},t.prototype.ele=function(){return this.element.apply(this,arguments)},t.prototype.nod=function(t,e,n){return this.node(t,e,n)},t.prototype.txt=function(t){return this.text(t)},t.prototype.dat=function(t){return this.cdata(t)},t.prototype.com=function(t){return this.comment(t)},t.prototype.ins=function(t,e){return this.instruction(t,e)},t.prototype.dec=function(t,e,n){return this.declaration(t,e,n)},t.prototype.dtd=function(t,e,n){return this.doctype(t,e,n)},t.prototype.e=function(t,e,n){return this.element(t,e,n)},t.prototype.n=function(t,e,n){return this.node(t,e,n)},t.prototype.t=function(t){return this.text(t)},t.prototype.d=function(t){return this.cdata(t)},t.prototype.c=function(t){return this.comment(t)},t.prototype.r=function(t){return this.raw(t)},t.prototype.i=function(t,e){return this.instruction(t,e)},t.prototype.att=function(){return this.currentNode&&this.currentNode instanceof l?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},t.prototype.a=function(){return this.currentNode&&this.currentNode instanceof l?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},t.prototype.ent=function(t,e){return this.entity(t,e)},t.prototype.pent=function(t,e){return this.pEntity(t,e)},t.prototype.not=function(t,e){return this.notation(t,e)},t}()}).call(this)},{"./Utility":124,"./XMLAttribute":125,"./XMLCData":126,"./XMLComment":127,"./XMLDTDAttList":128,"./XMLDTDElement":129,"./XMLDTDEntity":130,"./XMLDTDNotation":131,"./XMLDeclaration":132,"./XMLDocType":133,"./XMLElement":136,"./XMLProcessingInstruction":138,"./XMLRaw":139,"./XMLStringWriter":141,"./XMLStringifier":142,"./XMLText":143}],136:[function(n,r,t){(function(){var i,e,o,s,t,a={}.hasOwnProperty;t=n("./Utility"),s=t.isObject,o=t.isFunction,e=n("./XMLNode"),i=n("./XMLAttribute"),r.exports=function(t){function r(t,e,n){if(r.__super__.constructor.call(this,t),null==e)throw new Error("Missing element name");this.name=this.stringify.eleName(e),this.attributes={},null!=n&&this.attribute(n),t.isDocument&&(this.isRoot=!0,(this.documentObject=t).rootObject=this)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(r,e),r.prototype.clone=function(){var t,e,n,r;for(e in(n=Object.create(this)).isRoot&&(n.documentObject=null),n.attributes={},r=this.attributes)a.call(r,e)&&(t=r[e],n.attributes[e]=t.clone());return n.children=[],this.children.forEach(function(t){var e;return((e=t.clone()).parent=n).children.push(e)}),n},r.prototype.attribute=function(t,e){var n,r;if(null!=t&&(t=t.valueOf()),s(t))for(n in t)a.call(t,n)&&(r=t[n],this.attribute(n,r));else o(e)&&(e=e.apply()),this.options.skipNullAttributes&&null==e||(this.attributes[t]=new i(this,t,e));return this},r.prototype.removeAttribute=function(t){var e,n,r;if(null==t)throw new Error("Missing attribute name");if(t=t.valueOf(),Array.isArray(t))for(n=0,r=t.length;n<r;n++)e=t[n],delete this.attributes[e];else delete this.attributes[t];return this},r.prototype.toString=function(t){return this.options.writer.set(t).element(this)},r.prototype.att=function(t,e){return this.attribute(t,e)},r.prototype.a=function(t,e){return this.attribute(t,e)},r}()}).call(this)},{"./Utility":124,"./XMLAttribute":125,"./XMLNode":137}],137:[function(e,c,t){(function(){var n,r,o,h,s,a,i,u,p,d,y,t,m={}.hasOwnProperty;t=e("./Utility"),y=t.isObject,d=t.isFunction,p=t.isEmpty,a=u=i=h=o=r=n=s=null,c.exports=function(){function t(t){this.parent=t,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.children=[],s||(s=e("./XMLElement"),n=e("./XMLCData"),r=e("./XMLComment"),o=e("./XMLDeclaration"),h=e("./XMLDocType"),i=e("./XMLRaw"),u=e("./XMLText"),a=e("./XMLProcessingInstruction"))}return t.prototype.element=function(t,e,n){var r,i,o,s,a,u,c,l,h,f;if((u=null)==e&&(e={}),e=e.valueOf(),y(e)||(n=(h=[e,n])[0],e=h[1]),null!=t&&(t=t.valueOf()),Array.isArray(t))for(o=0,c=t.length;o<c;o++)i=t[o],u=this.element(i);else if(d(t))u=this.element(t.apply());else if(y(t)){for(a in t)if(m.call(t,a))if(f=t[a],d(f)&&(f=f.apply()),y(f)&&p(f)&&(f=null),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===a.indexOf(this.stringify.convertAttKey))u=this.attribute(a.substr(this.stringify.convertAttKey.length),f);else if(!this.options.separateArrayItems&&Array.isArray(f))for(s=0,l=f.length;s<l;s++)i=f[s],(r={})[a]=i,u=this.element(r);else y(f)?(u=this.element(a)).element(f):u=this.element(a,f)}else u=!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===t.indexOf(this.stringify.convertTextKey)?this.text(n):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===t.indexOf(this.stringify.convertCDataKey)?this.cdata(n):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===t.indexOf(this.stringify.convertCommentKey)?this.comment(n):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===t.indexOf(this.stringify.convertRawKey)?this.raw(n):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===t.indexOf(this.stringify.convertPIKey)?this.instruction(t.substr(this.stringify.convertPIKey.length),n):this.node(t,e,n);if(null==u)throw new Error("Could not create any elements with: "+t);return u},t.prototype.insertBefore=function(t,e,n){var r,i,o;if(this.isRoot)throw new Error("Cannot insert elements at root level");return i=this.parent.children.indexOf(this),o=this.parent.children.splice(i),r=this.parent.element(t,e,n),Array.prototype.push.apply(this.parent.children,o),r},t.prototype.insertAfter=function(t,e,n){var r,i,o;if(this.isRoot)throw new Error("Cannot insert elements at root level");return i=this.parent.children.indexOf(this),o=this.parent.children.splice(i+1),r=this.parent.element(t,e,n),Array.prototype.push.apply(this.parent.children,o),r},t.prototype.remove=function(){var t;if(this.isRoot)throw new Error("Cannot remove the root element");return t=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[t,t-t+1].concat([])),this.parent},t.prototype.node=function(t,e,n){var r,i;return null!=t&&(t=t.valueOf()),e||(e={}),e=e.valueOf(),y(e)||(n=(i=[e,n])[0],e=i[1]),r=new s(this,t,e),null!=n&&r.text(n),this.children.push(r),r},t.prototype.text=function(t){var e;return e=new u(this,t),this.children.push(e),this},t.prototype.cdata=function(t){var e;return e=new n(this,t),this.children.push(e),this},t.prototype.comment=function(t){var e;return e=new r(this,t),this.children.push(e),this},t.prototype.commentBefore=function(t){var e,n;return e=this.parent.children.indexOf(this),n=this.parent.children.splice(e),this.parent.comment(t),Array.prototype.push.apply(this.parent.children,n),this},t.prototype.commentAfter=function(t){var e,n;return e=this.parent.children.indexOf(this),n=this.parent.children.splice(e+1),this.parent.comment(t),Array.prototype.push.apply(this.parent.children,n),this},t.prototype.raw=function(t){var e;return e=new i(this,t),this.children.push(e),this},t.prototype.instruction=function(t,e){var n,r,i,o,s;if(null!=t&&(t=t.valueOf()),null!=e&&(e=e.valueOf()),Array.isArray(t))for(o=0,s=t.length;o<s;o++)n=t[o],this.instruction(n);else if(y(t))for(n in t)m.call(t,n)&&(r=t[n],this.instruction(n,r));else d(e)&&(e=e.apply()),i=new a(this,t,e),this.children.push(i);return this},t.prototype.instructionBefore=function(t,e){var n,r;return n=this.parent.children.indexOf(this),r=this.parent.children.splice(n),this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,r),this},t.prototype.instructionAfter=function(t,e){var n,r;return n=this.parent.children.indexOf(this),r=this.parent.children.splice(n+1),this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,r),this},t.prototype.declaration=function(t,e,n){var r,i;return r=this.document(),i=new o(r,t,e,n),r.children[0]instanceof o?r.children[0]=i:r.children.unshift(i),r.root()||r},t.prototype.doctype=function(t,e){var n,r,i,o,s,a,u,c,l;for(n=this.document(),r=new h(n,t,e),i=o=0,a=(c=n.children).length;o<a;i=++o)if(c[i]instanceof h)return n.children[i]=r;for(i=s=0,u=(l=n.children).length;s<u;i=++s)if(l[i].isRoot)return n.children.splice(i,0,r),r;return n.children.push(r),r},t.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},t.prototype.root=function(){var t;for(t=this;t;){if(t.isDocument)return t.rootObject;if(t.isRoot)return t;t=t.parent}},t.prototype.document=function(){var t;for(t=this;t;){if(t.isDocument)return t;t=t.parent}},t.prototype.end=function(t){return this.document().end(t)},t.prototype.prev=function(){var t;if((t=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node");return this.parent.children[t-1]},t.prototype.next=function(){var t;if(-1===(t=this.parent.children.indexOf(this))||t===this.parent.children.length-1)throw new Error("Already at the last node");return this.parent.children[t+1]},t.prototype.importDocument=function(t){var e;return(e=t.root().clone()).parent=this,e.isRoot=!1,this.children.push(e),this},t.prototype.ele=function(t,e,n){return this.element(t,e,n)},t.prototype.nod=function(t,e,n){return this.node(t,e,n)},t.prototype.txt=function(t){return this.text(t)},t.prototype.dat=function(t){return this.cdata(t)},t.prototype.com=function(t){return this.comment(t)},t.prototype.ins=function(t,e){return this.instruction(t,e)},t.prototype.doc=function(){return this.document()},t.prototype.dec=function(t,e,n){return this.declaration(t,e,n)},t.prototype.dtd=function(t,e){return this.doctype(t,e)},t.prototype.e=function(t,e,n){return this.element(t,e,n)},t.prototype.n=function(t,e,n){return this.node(t,e,n)},t.prototype.t=function(t){return this.text(t)},t.prototype.d=function(t){return this.cdata(t)},t.prototype.c=function(t){return this.comment(t)},t.prototype.r=function(t){return this.raw(t)},t.prototype.i=function(t,e){return this.instruction(t,e)},t.prototype.u=function(){return this.up()},t.prototype.importXMLBuilder=function(t){return this.importDocument(t)},t}()}).call(this)},{"./Utility":124,"./XMLCData":126,"./XMLComment":127,"./XMLDeclaration":132,"./XMLDocType":133,"./XMLElement":136,"./XMLProcessingInstruction":138,"./XMLRaw":139,"./XMLText":143}],138:[function(t,n,e){(function(){var e,i={}.hasOwnProperty;e=t("./XMLNode"),n.exports=function(t){function r(t,e,n){if(r.__super__.constructor.call(this,t),null==e)throw new Error("Missing instruction target");this.target=this.stringify.insTarget(e),n&&(this.value=this.stringify.insValue(n))}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(r,e),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(t){return this.options.writer.set(t).processingInstruction(this)},r}()}).call(this)},{"./XMLNode":137}],139:[function(t,n,e){(function(){var e,i={}.hasOwnProperty;e=t("./XMLNode"),n.exports=function(t){function n(t,e){if(n.__super__.constructor.call(this,t),null==e)throw new Error("Missing raw text");this.value=this.stringify.raw(e)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return this.options.writer.set(t).raw(this)},n}()}).call(this)},{"./XMLNode":137}],140:[function(t,n,e){(function(){var l,h,s,a,u,c,f,p,d,y,m,g,e,v={}.hasOwnProperty;f=t("./XMLDeclaration"),p=t("./XMLDocType"),l=t("./XMLCData"),h=t("./XMLComment"),d=t("./XMLElement"),m=t("./XMLRaw"),g=t("./XMLText"),y=t("./XMLProcessingInstruction"),s=t("./XMLDTDAttList"),a=t("./XMLDTDElement"),u=t("./XMLDTDEntity"),c=t("./XMLDTDNotation"),e=t("./XMLWriterBase"),n.exports=function(t){function n(t,e){n.__super__.constructor.call(this,e),this.stream=t}return function(t,e){for(var n in e)v.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,e),n.prototype.document=function(t){var e,n,r,i,o,s,a,u;for(n=0,i=(s=t.children).length;n<i;n++)(e=s[n]).isLastRootNode=!1;for(t.children[t.children.length-1].isLastRootNode=!0,u=[],r=0,o=(a=t.children).length;r<o;r++)switch(e=a[r],!1){case!(e instanceof f):u.push(this.declaration(e));break;case!(e instanceof p):u.push(this.docType(e));break;case!(e instanceof h):u.push(this.comment(e));break;case!(e instanceof y):u.push(this.processingInstruction(e));break;default:u.push(this.element(e))}return u},n.prototype.attribute=function(t){return this.stream.write(" "+t.name+'="'+t.value+'"')},n.prototype.cdata=function(t,e){return this.stream.write(this.space(e)+"<![CDATA["+t.text+"]]>"+this.endline(t))},n.prototype.comment=function(t,e){return this.stream.write(this.space(e)+"\x3c!-- "+t.text+" --\x3e"+this.endline(t))},n.prototype.declaration=function(t,e){return this.stream.write(this.space(e)),this.stream.write('<?xml version="'+t.version+'"'),null!=t.encoding&&this.stream.write(' encoding="'+t.encoding+'"'),null!=t.standalone&&this.stream.write(' standalone="'+t.standalone+'"'),this.stream.write(this.spacebeforeslash+"?>"),this.stream.write(this.endline(t))},n.prototype.docType=function(t,e){var n,r,i,o;if(e||(e=0),this.stream.write(this.space(e)),this.stream.write("<!DOCTYPE "+t.root().name),t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),0<t.children.length){for(this.stream.write(" ["),this.stream.write(this.endline(t)),r=0,i=(o=t.children).length;r<i;r++)switch(n=o[r],!1){case!(n instanceof s):this.dtdAttList(n,e+1);break;case!(n instanceof a):this.dtdElement(n,e+1);break;case!(n instanceof u):this.dtdEntity(n,e+1);break;case!(n instanceof c):this.dtdNotation(n,e+1);break;case!(n instanceof l):this.cdata(n,e+1);break;case!(n instanceof h):this.comment(n,e+1);break;case!(n instanceof y):this.processingInstruction(n,e+1);break;default:throw new Error("Unknown DTD node type: "+n.constructor.name)}this.stream.write("]")}return this.stream.write(this.spacebeforeslash+">"),this.stream.write(this.endline(t))},n.prototype.element=function(t,e){var n,r,i,o,s,a,u,c;for(s in e||(e=0),c=this.space(e),this.stream.write(c+"<"+t.name),a=t.attributes)v.call(a,s)&&(n=a[s],this.attribute(n));if(0===t.children.length||t.children.every(function(t){return""===t.value}))this.allowEmpty?this.stream.write("></"+t.name+">"):this.stream.write(this.spacebeforeslash+"/>");else if(this.pretty&&1===t.children.length&&null!=t.children[0].value)this.stream.write(">"),this.stream.write(t.children[0].value),this.stream.write("</"+t.name+">");else{for(this.stream.write(">"+this.newline),i=0,o=(u=t.children).length;i<o;i++)switch(r=u[i],!1){case!(r instanceof l):this.cdata(r,e+1);break;case!(r instanceof h):this.comment(r,e+1);break;case!(r instanceof d):this.element(r,e+1);break;case!(r instanceof m):this.raw(r,e+1);break;case!(r instanceof g):this.text(r,e+1);break;case!(r instanceof y):this.processingInstruction(r,e+1);break;default:throw new Error("Unknown XML node type: "+r.constructor.name)}this.stream.write(c+"</"+t.name+">")}return this.stream.write(this.endline(t))},n.prototype.processingInstruction=function(t,e){return this.stream.write(this.space(e)+"<?"+t.target),t.value&&this.stream.write(" "+t.value),this.stream.write(this.spacebeforeslash+"?>"+this.endline(t))},n.prototype.raw=function(t,e){return this.stream.write(this.space(e)+t.value+this.endline(t))},n.prototype.text=function(t,e){return this.stream.write(this.space(e)+t.value+this.endline(t))},n.prototype.dtdAttList=function(t,e){return this.stream.write(this.space(e)+"<!ATTLIST "+t.elementName+" "+t.attributeName+" "+t.attributeType),"#DEFAULT"!==t.defaultValueType&&this.stream.write(" "+t.defaultValueType),t.defaultValue&&this.stream.write(' "'+t.defaultValue+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(t))},n.prototype.dtdElement=function(t,e){return this.stream.write(this.space(e)+"<!ELEMENT "+t.name+" "+t.value),this.stream.write(this.spacebeforeslash+">"+this.endline(t))},n.prototype.dtdEntity=function(t,e){return this.stream.write(this.space(e)+"<!ENTITY"),t.pe&&this.stream.write(" %"),this.stream.write(" "+t.name),t.value?this.stream.write(' "'+t.value+'"'):(t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),t.nData&&this.stream.write(" NDATA "+t.nData)),this.stream.write(this.spacebeforeslash+">"+this.endline(t))},n.prototype.dtdNotation=function(t,e){return this.stream.write(this.space(e)+"<!NOTATION "+t.name),t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.pubID?this.stream.write(' PUBLIC "'+t.pubID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(t))},n.prototype.endline=function(t){return t.isLastRootNode?"":this.newline},n}()}).call(this)},{"./XMLCData":126,"./XMLComment":127,"./XMLDTDAttList":128,"./XMLDTDElement":129,"./XMLDTDEntity":130,"./XMLDTDNotation":131,"./XMLDeclaration":132,"./XMLDocType":133,"./XMLElement":136,"./XMLProcessingInstruction":138,"./XMLRaw":139,"./XMLText":143,"./XMLWriterBase":144}],141:[function(t,e,n){(function(){var y,m,a,u,c,l,s,h,g,v,b,_,n,w={}.hasOwnProperty;s=t("./XMLDeclaration"),h=t("./XMLDocType"),y=t("./XMLCData"),m=t("./XMLComment"),g=t("./XMLElement"),b=t("./XMLRaw"),_=t("./XMLText"),v=t("./XMLProcessingInstruction"),a=t("./XMLDTDAttList"),u=t("./XMLDTDElement"),c=t("./XMLDTDEntity"),l=t("./XMLDTDNotation"),n=t("./XMLWriterBase"),e.exports=function(t){function e(t){e.__super__.constructor.call(this,t)}return function(t,e){for(var n in e)w.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,n),e.prototype.document=function(t){var e,n,r,i,o;for(this.textispresent=!1,i="",n=0,r=(o=t.children).length;n<r;n++)e=o[n],i+=function(){switch(!1){case!(e instanceof s):return this.declaration(e);case!(e instanceof h):return this.docType(e);case!(e instanceof m):return this.comment(e);case!(e instanceof v):return this.processingInstruction(e);default:return this.element(e,0)}}.call(this);return this.pretty&&i.slice(-this.newline.length)===this.newline&&(i=i.slice(0,-this.newline.length)),i},e.prototype.attribute=function(t){return" "+t.name+'="'+t.value+'"'},e.prototype.cdata=function(t,e){return this.space(e)+"<![CDATA["+t.text+"]]>"+this.newline},e.prototype.comment=function(t,e){return this.space(e)+"\x3c!-- "+t.text+" --\x3e"+this.newline},e.prototype.declaration=function(t,e){var n;return n=this.space(e),n+='<?xml version="'+t.version+'"',null!=t.encoding&&(n+=' encoding="'+t.encoding+'"'),null!=t.standalone&&(n+=' standalone="'+t.standalone+'"'),n+=this.spacebeforeslash+"?>",n+=this.newline},e.prototype.docType=function(t,e){var n,r,i,o,s;if(e||(e=0),o=this.space(e),o+="<!DOCTYPE "+t.root().name,t.pubID&&t.sysID?o+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(o+=' SYSTEM "'+t.sysID+'"'),0<t.children.length){for(o+=" [",o+=this.newline,r=0,i=(s=t.children).length;r<i;r++)n=s[r],o+=function(){switch(!1){case!(n instanceof a):return this.dtdAttList(n,e+1);case!(n instanceof u):return this.dtdElement(n,e+1);case!(n instanceof c):return this.dtdEntity(n,e+1);case!(n instanceof l):return this.dtdNotation(n,e+1);case!(n instanceof y):return this.cdata(n,e+1);case!(n instanceof m):return this.comment(n,e+1);case!(n instanceof v):return this.processingInstruction(n,e+1);default:throw new Error("Unknown DTD node type: "+n.constructor.name)}}.call(this);o+="]"}return o+=this.spacebeforeslash+">",o+=this.newline},e.prototype.element=function(t,e){var n,r,i,o,s,a,u,c,l,h,f,p,d;for(u in e||(e=0),d=!1,this.textispresent?(this.newline="",this.pretty=!1):(this.newline=this.newlinedefault,this.pretty=this.prettydefault),c="",c+=(p=this.space(e))+"<"+t.name,l=t.attributes)w.call(l,u)&&(n=l[u],c+=this.attribute(n));if(0===t.children.length||t.children.every(function(t){return""===t.value}))this.allowEmpty?c+="></"+t.name+">"+this.newline:c+=this.spacebeforeslash+"/>"+this.newline;else if(this.pretty&&1===t.children.length&&null!=t.children[0].value)c+=">",c+=t.children[0].value,c+="</"+t.name+">"+this.newline;else{if(this.dontprettytextnodes)for(i=0,s=(h=t.children).length;i<s;i++)if(null!=(r=h[i]).value){this.textispresent++,d=!0;break}for(this.textispresent&&(this.newline="",this.pretty=!1,p=this.space(e)),c+=">"+this.newline,o=0,a=(f=t.children).length;o<a;o++)r=f[o],c+=function(){switch(!1){case!(r instanceof y):return this.cdata(r,e+1);case!(r instanceof m):return this.comment(r,e+1);case!(r instanceof g):return this.element(r,e+1);case!(r instanceof b):return this.raw(r,e+1);case!(r instanceof _):return this.text(r,e+1);case!(r instanceof v):return this.processingInstruction(r,e+1);default:throw new Error("Unknown XML node type: "+r.constructor.name)}}.call(this);d&&this.textispresent--,this.textispresent||(this.newline=this.newlinedefault,this.pretty=this.prettydefault),c+=p+"</"+t.name+">"+this.newline}return c},e.prototype.processingInstruction=function(t,e){var n;return n=this.space(e)+"<?"+t.target,t.value&&(n+=" "+t.value),n+=this.spacebeforeslash+"?>"+this.newline},e.prototype.raw=function(t,e){return this.space(e)+t.value+this.newline},e.prototype.text=function(t,e){return this.space(e)+t.value+this.newline},e.prototype.dtdAttList=function(t,e){var n;return n=this.space(e)+"<!ATTLIST "+t.elementName+" "+t.attributeName+" "+t.attributeType,"#DEFAULT"!==t.defaultValueType&&(n+=" "+t.defaultValueType),t.defaultValue&&(n+=' "'+t.defaultValue+'"'),n+=this.spacebeforeslash+">"+this.newline},e.prototype.dtdElement=function(t,e){return this.space(e)+"<!ELEMENT "+t.name+" "+t.value+this.spacebeforeslash+">"+this.newline},e.prototype.dtdEntity=function(t,e){var n;return n=this.space(e)+"<!ENTITY",t.pe&&(n+=" %"),n+=" "+t.name,t.value?n+=' "'+t.value+'"':(t.pubID&&t.sysID?n+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(n+=' SYSTEM "'+t.sysID+'"'),t.nData&&(n+=" NDATA "+t.nData)),n+=this.spacebeforeslash+">"+this.newline},e.prototype.dtdNotation=function(t,e){var n;return n=this.space(e)+"<!NOTATION "+t.name,t.pubID&&t.sysID?n+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.pubID?n+=' PUBLIC "'+t.pubID+'"':t.sysID&&(n+=' SYSTEM "'+t.sysID+'"'),n+=this.spacebeforeslash+">"+this.newline},e.prototype.openNode=function(t,e){var n,r,i,o;if(e||(e=0),t instanceof g){for(r in i=this.space(e)+"<"+t.name,o=t.attributes)w.call(o,r)&&(n=o[r],i+=this.attribute(n));return i+=(t.children?">":"/>")+this.newline}return i=this.space(e)+"<!DOCTYPE "+t.rootNodeName,t.pubID&&t.sysID?i+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(i+=' SYSTEM "'+t.sysID+'"'),i+=(t.children?" [":">")+this.newline},e.prototype.closeNode=function(t,e){switch(e||(e=0),!1){case!(t instanceof g):return this.space(e)+"</"+t.name+">"+this.newline;case!(t instanceof h):return this.space(e)+"]>"+this.newline}},e}()}).call(this)},{"./XMLCData":126,"./XMLComment":127,"./XMLDTDAttList":128,"./XMLDTDElement":129,"./XMLDTDEntity":130,"./XMLDTDNotation":131,"./XMLDeclaration":132,"./XMLDocType":133,"./XMLElement":136,"./XMLProcessingInstruction":138,"./XMLRaw":139,"./XMLText":143,"./XMLWriterBase":144}],142:[function(t,e,n){(function(){var s={}.hasOwnProperty;e.exports=function(){function t(t){var e,n,r,i,o;for(r in this.assertLegalChar=(e=this.assertLegalChar,n=this,function(){return e.apply(n,arguments)}),t||(t={}),this.noDoubleEncoding=t.noDoubleEncoding,i=t.stringify||{})s.call(i,r)&&(o=i[r],this[r]=o)}return t.prototype.eleName=function(t){return t=""+t||"",this.assertLegalChar(t)},t.prototype.eleText=function(t){return t=""+t||"",this.assertLegalChar(this.elEscape(t))},t.prototype.cdata=function(t){return t=(t=""+t||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(t)},t.prototype.comment=function(t){if((t=""+t||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+t);return this.assertLegalChar(t)},t.prototype.raw=function(t){return""+t||""},t.prototype.attName=function(t){return""+t||""},t.prototype.attValue=function(t){return t=""+t||"",this.attEscape(t)},t.prototype.insTarget=function(t){return""+t||""},t.prototype.insValue=function(t){if((t=""+t||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+t);return t},t.prototype.xmlVersion=function(t){if(!(t=""+t||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+t);return t},t.prototype.xmlEncoding=function(t){if(!(t=""+t||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+t);return t},t.prototype.xmlStandalone=function(t){return t?"yes":"no"},t.prototype.dtdPubID=function(t){return""+t||""},t.prototype.dtdSysID=function(t){return""+t||""},t.prototype.dtdElementValue=function(t){return""+t||""},t.prototype.dtdAttType=function(t){return""+t||""},t.prototype.dtdAttDefault=function(t){return null!=t?""+t||"":t},t.prototype.dtdEntityValue=function(t){return""+t||""},t.prototype.dtdNData=function(t){return""+t||""},t.prototype.convertAttKey="@",t.prototype.convertPIKey="?",t.prototype.convertTextKey="#text",t.prototype.convertCDataKey="#cdata",t.prototype.convertCommentKey="#comment",t.prototype.convertRawKey="#raw",t.prototype.assertLegalChar=function(t){var e;if(e=t.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/))throw new Error("Invalid character in string: "+t+" at index "+e.index);return t},t.prototype.elEscape=function(t){var e;return e=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(e,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},t.prototype.attEscape=function(t){var e;return e=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(e,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},t}()}).call(this)},{}],143:[function(t,n,e){(function(){var e,i={}.hasOwnProperty;e=t("./XMLNode"),n.exports=function(t){function n(t,e){if(n.__super__.constructor.call(this,t),null==e)throw new Error("Missing element text");this.value=this.stringify.eleText(e)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return this.options.writer.set(t).text(this)},n}()}).call(this)},{"./XMLNode":137}],144:[function(t,e,n){(function(){var l={}.hasOwnProperty;e.exports=function(){function t(t){var e,n,r,i,o,s,a,u,c;for(e in t||(t={}),this.pretty=t.pretty||!1,this.allowEmpty=null!=(n=t.allowEmpty)&&n,this.pretty?(this.indent=null!=(r=t.indent)?r:"  ",this.newline=null!=(i=t.newline)?i:"\n",this.offset=null!=(o=t.offset)?o:0,this.dontprettytextnodes=null!=(s=t.dontprettytextnodes)?s:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash=null!=(a=t.spacebeforeslash)?a:"",!0===this.spacebeforeslash&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,u=t.writer||{})l.call(u,e)&&(c=u[e],this[e]=c)}return t.prototype.set=function(t){var e,n,r;for(e in t||(t={}),"pretty"in t&&(this.pretty=t.pretty),"allowEmpty"in t&&(this.allowEmpty=t.allowEmpty),this.pretty?(this.indent="indent"in t?t.indent:"  ",this.newline="newline"in t?t.newline:"\n",this.offset="offset"in t?t.offset:0,this.dontprettytextnodes="dontprettytextnodes"in t?t.dontprettytextnodes:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash="spacebeforeslash"in t?t.spacebeforeslash:"",!0===this.spacebeforeslash&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,n=t.writer||{})l.call(n,e)&&(r=n[e],this[e]=r);return this},t.prototype.space=function(t){var e;return this.pretty&&0<(e=(t||0)+this.offset+1)?new Array(e).join(this.indent):""},t}()}).call(this)},{}],145:[function(r,u,t){(function(){var s,i,n,e,a,o,t;t=r("./Utility"),a=t.assign,o=t.isFunction,s=r("./XMLDocument"),i=r("./XMLDocumentCB"),e=r("./XMLStringWriter"),n=r("./XMLStreamWriter"),u.exports.create=function(t,e,n,r){var i,o;if(null==t)throw new Error("Root element needs a name");return r=a({},e,n,r),o=(i=new s(r)).element(t),r.headless||(i.declaration(r),null==r.pubID&&null==r.sysID||i.doctype(r)),o},u.exports.begin=function(t,e,n){var r;return o(t)&&(e=(r=[t,e])[0],n=r[1],t={}),e?new i(t,e,n):new s(t)},u.exports.stringWriter=function(t){return new e(t)},u.exports.streamWriter=function(t,e){return new n(t,e)}}).call(this)},{"./Utility":124,"./XMLDocument":134,"./XMLDocumentCB":135,"./XMLStreamWriter":140,"./XMLStringWriter":141}]},{},[1])(1)}),define("modules/login/LoginDialog",["jsforce"],function(t){var e,n=$("#loginDialog"),r=$("#loginCancel",n),i=$("#loginConnect",n),o=$("#loginOrgType",n),s=o[0].options[0].value;function a(){n.modal("hide")}return i.on("click",function(){t.browser.login({loginUrl:s},function(t){t&&(alert(t.message),a(),e.reject(t))})}),r.on("click",function(){a()}),o.on("change",function(t){var e=t.target;s=e.options[e.selectedIndex].value}),{init:function(){return t.browser.init({clientId:"3MVG9Rd3qC6oMalUsp2rPGB248uHAGVxkr6GZbLeF87wvo_z46PbBonmZ.xPfY8_pUdHwygzhfgRpSigiyF9e",redirectUri:"http://localhost:8000/callback.html",proxyUrl:"https://node-salesforce-proxy.herokuapp.com/proxy/"}),t.browser.on("connect",function(t){n.modal("hide"),e.resolve(t)}),(e=$.Deferred()).promise()}}}),define("org/contacts",["knockout"],function(t){function e(t){this.name=t.Name,this.title=t.Title,this.department=t.Department,this.mobile=t.MobilePhone,this.email=t.Email,this.leadSource=t.LeadSource}function n(){}return n.prototype={contacts:t.observableArray([]),totalContacts:t.observable(""),updateContacts:function(t){this.totalContacts(t.length),(t=t.slice(0,10)).forEach(function(t){this.contacts.push(new e(t))},this)},getContacts:function(){this.connector.query("SELECT Name, Title, Department, MobilePhone, Email, LeadSource FROM Contact",function(t,e){t&&console.error(t),console.log(e),this.updateContacts(e.records)}.bind(this))}},n}),define("org/accounts",["knockout"],function(t){function e(t){this.id=t.Id,this.name=t.Name,this.accNumber=t.AccountNumber,this.city=t.BillingAddress.city,this.priority=t.CustomerPriority__c,this.employees=t.NumberOfEmployees,this.ownership=t.Ownership}function n(){}return n.prototype={accounts:t.observableArray([]),totalAccounts:t.observable(""),updateAccounts:function(t){this.totalAccounts(t.length),(t=t.slice(0,10)).forEach(function(t){this.accounts.push(new e(t))},this)},getAccounts:function(){this.connector.query("SELECT Id, Name, NumberOfEmployees, AccountNumber,BillingAddress, CustomerPriority__c, Ownership FROM Account",function(t,e){t&&console.error(t),console.log(e),this.updateAccounts(e.records)}.bind(this))}},n}),define("org/todos",["knockout"],function(t){function e(t){this.contact=t.contact,this.assignee=t.assignee,this.notes=t.notes,this.when=t.when}function n(){}return n.prototype={todos:t.observableArray([]),totalTodos:t.observable(""),updateTodos:function(t){this.totalTodos(t.length),t.forEach(function(t){this.todos.push(new e(t))},this)},getTodos:function(){$.ajax({url:"/data/api/todos",context:this}).done(function(t){this.updateTodos(JSON.parse(t))})}},n}),define("org/OrgModelImp",["knockout","org/contacts","org/accounts","org/todos"],function(e,n,r,i){return function(){function t(){n.call(this),r.call(this),i.call(this)}return t.prototype=Object.create(n.prototype),$.extend(t.prototype,r.prototype),$.extend(t.prototype,i.prototype),t.prototype.username=e.observable(""),t.prototype.userPhoto=e.observable("/assets/images/avatar2.jpg"),t.prototype.reset=function(){this.username(null),this.sessionid=void 0,this.fullname(null),this.shows.removeAll()},t.prototype.isLoggedIn=e.observable(!1),t.prototype.setConnector=function(t){this.isLoggedIn(!0),this.connector=t},t.prototype.logout=function(){return this.isLoggedIn(!1),this.connector.logout()},t.prototype.getUserProfile=function(){var r=$.Deferred();return this.connector.identity().then(function(t,e){if(e&&r.reject(e),this.username(t.display_name),t.photos&&t.photos.thumbnail){var n=t.photos.thumbnail+"?oauth_token="+this.connector.accessToken;this.userPhoto(n)}r.resolve()}.bind(this)),r.promise()},t}()}),define("org/OrgModel",["org/OrgModelImp"],function(t){return new t}),define("org/main",["jsforce","knockout","org/OrgModel"],function(t,e,n){window.OrgModel=n;var r=!1,i=$("#login"),o=$("#loggedIn");return{init:function(){r||(e.applyBindings(n,$("#app")[0]),r=!0)},model:n,getLocalData:function(){n.getTodos()},setConnector:function(t){n.setConnector(t)},getUserProfile:function(){$.when(n.getUserProfile()).done(function(){i.addClass("slds-hide"),o.removeClass("slds-hide")}).fail(function(t){alert(t.message)})},logout:function(){t.browser.logout(),o.addClass("slds-hide"),i.removeClass("slds-hide")},reset:function(){n.reset()}}}),define("modules/login/LogoutDialog",["jsforce","org/main"],function(t,e){window.force=t;var n=$("#logoutDialog"),r=$("#logoutCancel",n);$("#logout",n).on("click",function(){n.modal("hide"),e.logout()}),r.on("click",function(){n.modal("hide")})}),define("modules/login/main",["modules/login/LoginDialog","modules/login/LogoutDialog"],function(t){return{init:function(){var e=$.Deferred();return t.init().done(function(t){e.resolve(t)}).fail(function(t){console.error("Error logging in."),e.reject(t)}),e.promise()}}}),require([],function(){$.fn.emulateTransitionEnd=function(t){var e=!1,n=this;return $(this).one("bsTransitionEnd",function(){e=!0}),setTimeout(function(){e||$(n).trigger($.support.transition.end)},t),this},$(function(){$.support.transition=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}(),$.support.transition&&($.event.special.bsTransitionEnd={bindType:$.support.transition.end,delegateType:$.support.transition.end,handle:function(t){if($(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}),define("modules/components/utils/transition",function(){}),require([],function(){var e='[data-dismiss="alert"]',o=function(t){$(t).on("click",e,this.close)};o.VERSION="3.3.5",o.TRANSITION_DURATION=150,o.prototype.close=function(t){var e=$(this),n=e.attr("data-target");n||(n=e.attr("href"));var r=$(n);function i(){r.detach().trigger("closed.bs.alert").remove()}t&&t.preventDefault(),r.length||(r=e.closest(".slds-notify_alert")),r.trigger(t=$.Event("close.bs.alert")),t.isDefaultPrevented()||(r.removeClass("in"),$.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",i).emulateTransitionEnd(o.TRANSITION_DURATION):i())};var t=$.fn.alert;$.fn.alert=function(n){return this.each(function(){var t=$(this),e=t.data("bs.alert");e||t.data("bs.alert",e=new o(this)),"string"==typeof n&&e[n].call(t)})},$.fn.alert.Constructor=o,$.fn.alert.noConflict=function(){return $.fn.alert=t,this},$(document).on("click.bs.alert.data-api",e,o.prototype.close)}),define("modules/components/alert",function(){}),function(){"use strict";require([],function(){var u=function(t){this.element=$(t)};function e(n){return this.each(function(){var t=$(this),e=t.data("bs.tab");e||t.data("bs.tab",e=new u(this)),"string"==typeof n&&e[n]()})}u.VERSION="3.3.5",u.TRANSITION_DURATION=150,u.prototype.show=function(){var t=this.element,e=t.closest("ul:not(.dropdown-menu)"),n=t.data("target");if(n||(n=(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("slds-active")){var r=e.find(".slds-active:last a"),i=$.Event("hide.bs.tab",{relatedTarget:t[0]}),o=$.Event("show.bs.tab",{relatedTarget:r[0]});if(r.trigger(i),t.trigger(o),!o.isDefaultPrevented()&&!i.isDefaultPrevented()){var s=$(n);this.activate(t.closest("li"),e),this.activate(s,s.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:r[0]})})}}},u.prototype.activate=function(t,e,n){var r="active",i="";n&&(r="show",i="hide");var o=e.find("> .slds-"+r),s=n&&$.support.transition&&(o.length&&o.hasClass("fade")||!!e.find("> .fade").length);function a(){o.removeClass("slds-"+r).addClass("slds-"+i).find("> .dropdown-menu > .slds-"+r).removeClass("slds-"+r).end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.removeClass("slds-"+i).addClass("slds-"+r).find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("slds-"+r).end().find('[data-toggle="tab"]').attr("aria-expanded",!0),n&&n()}o.length&&s?o.one("bsTransitionEnd",a).emulateTransitionEnd(u.TRANSITION_DURATION):a(),o.removeClass("in")};var t=$.fn.tab;$.fn.tab=e,$.fn.tab.Constructor=u,$.fn.tab.noConflict=function(){return $.fn.tab=t,this};var n=function(t){t.preventDefault(),e.call($(this),"show")};$(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',n).on("click.bs.tab.data-api",'[data-toggle="pill"]',n)})}(),define("modules/components/tab",function(){}),require([],function(){var i=function(t,e){this.$element=$(t),this.options=$.extend({},i.DEFAULTS,e),this.isLoading=!1};function n(r){return this.each(function(){var t=$(this),e=t.data("bs.button"),n="object"==typeof r&&r;e||t.data("bs.button",e=new i(this,n)),"toggle"===r?e.toggle():e.changeState()})}i.VERSION="3.3.5",i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');e.length?("checkbox"===e.data("grouptype")?(console.log("checkbox"),this.$element.hasClass("slds-is-selected")&&(t=!1),this.$element.toggleClass("slds-is-selected")):(this.$element.hasClass("slds-is-selected")&&(t=!1),e.find(".slds-is-selected").removeClass("slds-is-selected"),this.$element.addClass("slds-is-selected")),t&&this.$element.trigger("change")):(this.$element.attr("aria-pressed",!this.$element.hasClass("slds-is-selected")),this.$element.toggleClass("slds-is-selected"))},i.prototype.changeState=function(){this.$element.attr("aria-pressed",!this.$element.hasClass("slds-is-selected")),this.$element.toggleClass("slds-is-selected slds-not-selected")};var t=$.fn.button;$.fn.button=n,$.fn.button.Constructor=i,$.fn.button.noConflict=function(){return $.fn.button=t,this},$(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var e=$(t.target);e.hasClass("slds-button")||(e=e.closest(".slds-button")),e.data().buttontype?n.call(e,"changestate"):n.call(e,"toggle"),$(t.target).is('input[type="radio"]')||$(t.target).is('input[type="checkbox"]')||t.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){$(t.target).closest(".slds-button").toggleClass("focus",/^focus(in)?$/.test(t.type))})}),define("modules/components/button",function(){}),require([],function(){var o=function(t,e){this.options=e,this.$body=$(document.body),this.$element=$(t),this.$element.attr("tabindex",-1),this.$element.attr("style","display: none"),this.$dialog=this.$element.find(".slds-modal__container"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1};function s(r,i){return this.each(function(){var t=$(this),e=t.data("bs.modal"),n=$.extend({},o.DEFAULTS,t.data(),"object"==typeof r&&r);e||t.data("bs.modal",e=new o(this,n)),"string"==typeof r?e[r](i):n.show&&e.show(i)})}o.VERSION="3.3.5",o.TRANSITION_DURATION=300,o.BACKDROP_TRANSITION_DURATION=150,o.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},o.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},o.prototype.show=function(n){var r=this,t=$.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(t),this.isShown||t.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',$.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){$(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var t=$.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),t&&r.$element[0].offsetWidth,r.$element.addClass("slds-fade-in-open"),r.enforceFocus();var e=$.Event("shown.bs.modal",{relatedTarget:n});t?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(o.TRANSITION_DURATION):r.$element.trigger("focus").trigger(e)}))},o.prototype.hide=function(t){t&&t.preventDefault(),t=$.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),$(document).off("focusin.bs.modal"),this.$element.removeClass("slds-fade-in-open").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),$.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",$.proxy(this.hideModal,this)).emulateTransitionEnd(o.TRANSITION_DURATION):this.hideModal())},o.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},o.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",$.proxy(function(t){27===t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},o.prototype.resize=function(){this.isShown?$(window).on("resize.bs.modal",$.proxy(this.handleUpdate,this)):$(window).off("resize.bs.modal")},o.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},o.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},o.prototype.backdrop=function(t){var e=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=$.support.transition&&n;if(this.$backdrop=$(document.createElement("div")).addClass("slds-backdrop").appendTo(this.$body),setTimeout(function(t){t.$backdrop.addClass("slds-backdrop_open")},0,this),this.$element.on("click.dismiss.bs.modal",$.proxy(function(t){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"===this.options.backdrop?this.$element[0].focus():this.hide())},this)),r&&this.$backdrop[0].offsetWidth,!t)return;r?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(o.BACKDROP_TRANSITION_DURATION):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("slds-backdrop_open"),this.$backdrop.one("bsTransitionEnd",function(){e.removeBackdrop(),t&&t()}).emulateTransitionEnd(o.BACKDROP_TRANSITION_DURATION)):t&&t()},o.prototype.handleUpdate=function(){this.adjustDialog()},o.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},o.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},o.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},o.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},o.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},o.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var t=$.fn.modal;$.fn.modal=s,$.fn.modal.Constructor=o,$.fn.modal.noConflict=function(){return $.fn.modal=t,this},$(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var e=$(this),n=e.attr("href"),r=$(e.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),i=r.data("bs.modal")?"toggle":$.extend({remote:!/#/.test(n)&&n},r.data(),e.data());e.is("a")&&t.preventDefault(),r.one("show.bs.modal",function(t){t.isDefaultPrevented()||r.one("hidden.bs.modal",function(){e.is(":visible")&&e.trigger("focus")})}),s.call(r,i,this)})}),define("modules/components/modal",function(){}),function(){"use strict";require([],function(){var y=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};y.VERSION="3.3.5",y.TRANSITION_DURATION=150,y.DEFAULTS={animation:!0,placement:"right",selector:!1,template:'<div class="slds-tooltip" role="tooltip"><div class="slds-tooltip__content"><div class="slds-tooltip__body">This is some body content</div></div></div>',trigger:"hover focus",title:"",delay:500,html:!1,container:!1,viewport:{selector:"body",padding:0}},y.prototype.init=function(t,e,n){if(this.enabled=!0,this.type=t,this.$element=$(e),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&$($.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var r=this.options.trigger.split(" "),i=r.length;i--;){var o=r[i];if("click"===o)this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this));else if("manual"!==o){var s="hover"===o?"mouseenter":"focusin",a="hover"===o?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,$.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},y.prototype.SLDSPOSCLASSES={top:"slds-nubbin_bottom",right:"slds-nubbin_left",bottom:"slds-nubbin_top",left:"slds-nubbin_right"},y.prototype.getDefaults=function(){return y.DEFAULTS},y.prototype.getOptions=function(t){return(t=$.extend({},this.getDefaults(),this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},y.prototype.getDelegateOptions=function(){var n={},r=this.getDefaults();return this._options&&$.each(this._options,function(t,e){r[t]!==e&&(n[t]=e)}),n},y.prototype.enter=function(t){var e=t instanceof this.constructor?t:$(t.currentTarget).data("bs."+this.type);if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),$(t.currentTarget).data("bs."+this.type,e)),t instanceof $.Event&&(e.inState["focusin"===t.type?"focus":"hover"]=!0),e.tip().hasClass("in")||"in"===e.hoverState)e.hoverState="in";else{if(clearTimeout(e.timeout),e.hoverState="in",!e.options.delay||!e.options.delay.show)return e.show();e.timeout=setTimeout(function(){"in"===e.hoverState&&e.show()},e.options.delay.show)}},y.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},y.prototype.leave=function(t){var e=t instanceof this.constructor?t:$(t.currentTarget).data("bs."+this.type);if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),$(t.currentTarget).data("bs."+this.type,e)),t instanceof $.Event&&(e.inState["focusout"===t.type?"focus":"hover"]=!1),!e.isInStateTrue()){if(clearTimeout(e.timeout),e.hoverState="out",!e.options.delay||!e.options.delay.hide)return e.hide();e.timeout=setTimeout(function(){"out"===e.hoverState&&e.hide()},e.options.delay.hide)}},y.prototype.show=function(){var t=$.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var e=$.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!e)return;var n=this,r=this.tip(),i=this.getUID(this.type);this.setContent(),r.attr("id",i),this.$element.attr("aria-describedby",i),this.options.animation&&r.addClass("fade");var o="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,a=s.test(o);a&&(o=o.replace(s,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(this.getSLDSNubbinClass(o)).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var u=this.getPosition(),c=r[0].offsetWidth,l=r[0].offsetHeight;if(a){var h=o,f=this.getPosition(this.$viewport);o="bottom"===o&&u.bottom+l>f.bottom?"top":"top"===o&&u.top-l<f.top?"bottom":"right"===o&&u.right+c>f.width?"left":"left"===o&&u.left-c<f.left?"right":o,r.removeClass(h).addClass(o)}var p=this.getCalculatedOffset(o,u,c,l);this.applyPlacement(p,o);var d=function(){var t=n.hoverState;n.$element.trigger("shown.bs."+n.type),n.hoverState=null,"out"===t&&n.leave(n)};$.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",d).emulateTransitionEnd(y.TRANSITION_DURATION):d()}},y.prototype.applyPlacement=function(t,e){var n=this.tip(),r=n[0].offsetWidth,i=n[0].offsetHeight,o=parseInt(n.css("margin-top"),10),s=parseInt(n.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(s)&&(s=0),t.top+=o,t.left+=s,$.offset.setOffset(n[0],$.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},t),0),n.addClass("in");var a=n[0].offsetWidth,u=n[0].offsetHeight;"top"===e&&u!==i&&(t.top=t.top+i-u);var c=this.getViewportAdjustedDelta(e,t,a,u);c.left?t.left+=c.left:t.top+=c.top;var l=/top|bottom/.test(e),h=l?2*c.left-r+a:2*c.top-i+u,f=l?"offsetWidth":"offsetHeight";n.offset(t),this.replaceArrow(h,n[0][f],l)},y.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},y.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".slds-tooltip__body")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},y.prototype.hide=function(t){var e=this,n=$(this.$tip),r=$.Event("hide.bs."+this.type);function i(){"in"!==e.hoverState&&n.detach(),e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),t&&t()}if(this.$element.trigger(r),!r.isDefaultPrevented())return n.removeClass("in"),$.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",i).emulateTransitionEnd(y.TRANSITION_DURATION):i(),this.hoverState=null,this},y.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},y.prototype.hasContent=function(){return this.getTitle()},y.prototype.getPosition=function(t){var e=(t=t||this.$element)[0],n="BODY"===e.tagName,r=e.getBoundingClientRect();null===r.width&&(r=$.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var i=n?{top:0,left:0}:t.offset(),o={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=n?{width:$(window).width(),height:$(window).height()}:null;return $.extend({},r,o,s,i)},y.prototype.getCalculatedOffset=function(t,e,n,r){return"bottom"===t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"===t?{top:e.top-r,left:e.left+e.width/2-n/2}:"left"===t?{top:e.top+e.height/2-r/2,left:e.left-n}:{top:e.top+e.height/2-r/2,left:e.left+e.width}},y.prototype.getViewportAdjustedDelta=function(t,e,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var o=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-o-s.scroll,u=e.top+o-s.scroll+r;a<s.top?i.top=s.top-a:u>s.top+s.height&&(i.top=s.top+s.height-u)}else{var c=e.left-o,l=e.left+o+n;c<s.left?i.left=s.left-c:l>s.right&&(i.left=s.left+s.width-l)}return i},y.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},y.prototype.getSLDSNubbinClass=function(t){return this.SLDSPOSCLASSES[t]},y.prototype.getUID=function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},y.prototype.tip=function(){if(!this.$tip&&(this.$tip=$(this.options.template),1!==this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},y.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},y.prototype.enable=function(){this.enabled=!0},y.prototype.disable=function(){this.enabled=!1},y.prototype.toggleEnabled=function(){this.enabled=!this.enabled},y.prototype.toggle=function(t){var e=this;t&&((e=$(t.currentTarget).data("bs."+this.type))||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),$(t.currentTarget).data("bs."+this.type,e))),t?(e.inState.click=!e.inState.click,e.isInStateTrue()?e.enter(e):e.leave(e)):e.tip().hasClass("in")?e.leave(e):e.enter(e)},y.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null})};var t=$.fn.tooltip;$.fn.tooltip=function(r){return this.each(function(){var t=$(this),e=t.data("bs.tooltip"),n="object"==typeof r&&r;!e&&/destroy|hide/.test(r)||(e||t.data("bs.tooltip",e=new y(this,n)),"string"==typeof r&&e[r]())})},$.fn.tooltip.Constructor=y,$('[data-toggle="tooltip"]').tooltip(),$.fn.tooltip.noConflict=function(){return $.fn.tooltip=t,this}})}(),define("modules/components/tooltip",function(){}),require([],function(){var s='[data-toggle="dropdown"]',r=function(t){$(t).on("click.bs.dropdown",this.toggle)};function a(t){var e=t.attr("data-target");e||(e=(e=t.attr("href"))&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""));var n=e&&$(e);return n&&n.length?n:t.parent()}function o(r){r&&3===r.which||($(".dropdown-backdrop").remove(),$(s).each(function(){var t=$(this),e=a(t),n={relatedTarget:this};e.hasClass("open")&&(r&&"click"===r.type&&/input|textarea/i.test(r.target.tagName)&&$.contains(e[0],r.target)||(e.trigger(r=$.Event("hide.bs.dropdown",n)),r.isDefaultPrevented()||(t.attr("aria-expanded","false"),e.removeClass("open").trigger("hidden.bs.dropdown",n))))}))}r.VERSION="3.3.5",r.prototype.toggle=function(t){var e=$(this);if(!e.is(".disabled, :disabled")){var n=a(e),r=n.hasClass("open");if(o(),!r){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&$(document.createElement("div")).addClass("dropdown-backdrop").insertAfter($(this)).on("click",o);var i={relatedTarget:this};if(n.trigger(t=$.Event("show.bs.dropdown",i)),t.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),n.toggleClass("open").trigger("shown.bs.dropdown",i)}return!1}},r.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var e=$(this);if(t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled")){var n=a(e),r=n.hasClass("open");if(!r&&27!==t.which||r&&27===t.which)return 27===t.which&&n.find(s).trigger("focus"),e.trigger("click");var i=n.find(".dropdown-menu li:not(.disabled):visible a");if(i.length){var o=i.index(t.target);38===t.which&&0<o&&o--,40===t.which&&o<i.length-1&&o++,~o||(o=0),i.eq(o).trigger("focus")}}}};var t=$.fn.dropdown;$.fn.dropdown=function(n){return this.each(function(){var t=$(this),e=t.data("bs.dropdown");e||t.data("bs.dropdown",e=new r(this)),"string"==typeof n&&e[n].call(t)})},$.fn.dropdown.Constructor=r,$.fn.dropdown.noConflict=function(){return $.fn.dropdown=t,this},$(document).on("click.bs.dropdown.data-api",o).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",s,r.prototype.toggle).on("keydown.bs.dropdown.data-api",s,r.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",r.prototype.keydown)}),define("modules/components/dropdown",function(){}),require([],function(){var i=function(t,e){this.init("popover",t,e)};if(!$.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.5",i.DEFAULTS=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="slds-popover slds-nubbin_left" role="dialog"><div class="slds-popover__header"></div><div class="slds-popover__body"></div></div>'}),((i.prototype=$.extend({},$.fn.tooltip.Constructor.prototype)).constructor=i).prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".slds-popover__header")[this.options.html?"html":"text"](e),t.find(".slds-popover__body").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".slds-popover__header").html()||t.find(".slds-popover__header").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var t=$.fn.popover;$.fn.popover=function(r){return this.each(function(){var t=$(this),e=t.data("bs.popover"),n="object"==typeof r&&r;!e&&/destroy|hide/.test(r)||(e||t.data("bs.popover",e=new i(this,n)),"string"==typeof r&&e[r]())})},$.fn.popover.Constructor=i,$('[data-toggle="popover"]').popover(),$.fn.popover.noConflict=function(){return $.fn.popover=t,this}}),define("modules/components/popover",function(){}),define("modules/components/responsiveMenu",[],function(){var e=!1,t=$("#bfBurger"),n=$("#bfMenu"),r=$("#bfMenuShade");return t.on("click",function(){var t=window.bootforce.prefix;e?(e=!1,n.removeClass(t+"show"),r.removeClass("fadeUp"),setTimeout(function(){r.removeClass(t+"show")},250)):(e=!0,n.addClass(t+"show"),r.addClass(t+"show"),setTimeout(function(){r.addClass("fadeUp")},0))}),{}}),requirejs.config({baseUrl:"scripts"}),require(["modules/components/utils/transition","modules/components/alert","modules/components/tab","modules/components/button","modules/components/modal","modules/components/tooltip","modules/components/dropdown","modules/components/popover","modules/components/responsiveMenu"],function(){}),define("modules/components/main",function(){}),define("modules/data/accounts",["org/OrgModel"],function(t){var e=!1,n=$("#getAccounts"),r=$("#accountsLoading");function i(){r.removeClass("slds-hide"),$.when(t.getAccounts()).done(function(){r.addClass("slds-hide")}).fail(function(t){alert(t.message)})}e||(e=!0,n.on("click",i))}),define("modules/data/contacts",["org/OrgModel"],function(t){var e=!1,n=$("#getContacts"),r=$("#accountsLoading");function i(){r.removeClass("slds-hide"),$.when(t.getContacts()).done(function(){r.addClass("slds-hide")}).fail(function(t){alert(t.message)})}e||(e=!0,n.on("click",i))}),function(){"use strict";requirejs.config({baseUrl:"scripts",paths:{knockout:"/knockout/build/output/knockout-latest",jsforce:"/jsforce/build/jsforce"},shim:{}}),require(["knockout","modules/login/main","org/main","modules/components/main","modules/data/accounts","modules/data/contacts"],function(t,e,n){window.bootforce={},window.bootforce.prefix="slds-",n.init(),n.getLocalData(),e.init().done(function(t){n.setConnector(t),n.getUserProfile()}).fail(function(t){console.error("Error logging in."),console.log(t)})})}(),define("main",function(){}),require(["main"]);
//# sourceMappingURL=main.min.js.map